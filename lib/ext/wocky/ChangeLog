commit f2973853cb582547505bd1284cf261d064f6db97
Merge: e249ed8 c20db39
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Sep 15 17:50:50 2009 +0100

    Merge branch 'keep-old-new-test-certs'

commit c20db39f0c6d71bd895c9e17bc14001ad9bb1e04
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Sep 15 17:42:55 2009 +0100

    Temporary debug target 'moose' in Makefile.am shouldn't have been checked in.

 tests/Makefile.am |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit f79654645ae0f3a314f8d6f4ea6e86bc22f3eaf5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Sep 15 17:15:38 2009 +0100

    Preserve inactive, expired (and CA cert for same) to avoid datefudge build dep.

 .gitignore                |   23 ++++++++++++++++++++++-
 tests/Makefile.am         |   21 +++++++++++++--------
 tests/certs/ca-0-cert.cfg |    2 +-
 tests/certs/ca-0-cert.pem |   23 +++++++++++++++++++++++
 tests/certs/ca-0-key.pem  |   27 +++++++++++++++++++++++++++
 tests/certs/exp-cert.pem  |   24 ++++++++++++++++++++++++
 tests/certs/new-cert.pem  |   24 ++++++++++++++++++++++++
 7 files changed, 134 insertions(+), 10 deletions(-)

commit e249ed86915cf38663abbbcd328f6ad1321ef4c8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 15 11:04:33 2009 +0100

    configure.ac: don't call GTK_DOC_CHECK twice (fd.o #23943)

 configure.ac |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit 1a9e13714a4758eb5e73fe166aa42632feb2bad8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Sep 14 15:21:06 2009 +0100

    Update docstring with corrected canonical locations for CA certificates.

 wocky/wocky-connector.c |   16 ++++++++++++++--
 1 files changed, 14 insertions(+), 2 deletions(-)

commit 95aec41185e17f0f7b59ef3a7cf1f2b775617e88
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Sep 14 13:29:15 2009 +0100

    git ignore generated test CRLs.

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 3736688c6a71db7185722e41ef6404a7156a6ab3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Sep 14 12:59:57 2009 +0100

    Make distcheck happy again (generated test crls weren't handled properly)

 tests/Makefile.am |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

commit cc335c30eacf0c5f28974a6d319651d1e23f0658
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 20:05:52 2009 +0100

    Add tests for CRL verification.

 tests/wocky-connector-test.c        |   49 +++++++++++++++++++++++++++++++++++
 tests/wocky-test-connector-server.c |    1 +
 tests/wocky-test-connector-server.h |    3 +-
 3 files changed, 52 insertions(+), 1 deletions(-)

commit 2a4f18eafb29eba0137d2286cf5fe8d80006f22a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 20:04:45 2009 +0100

    Generate revoked certificate + crl for tests.

 tests/Makefile.am        |   27 +++++++++++++-
 tests/certs/ca-0-crl.cfg |    1 +
 tests/certs/rev-cert.cfg |   89 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 115 insertions(+), 2 deletions(-)

commit 2708fc257679324f67445963319d2bcaa88ced5e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 18:45:58 2009 +0100

    Update example connect program to new API for adding CAs.

 examples/connect.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b657eaa0861e64cc428adce99fa611e16ce0f763
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 18:45:31 2009 +0100

    Update tests to new API (CAs not added in constructor any more).

 tests/wocky-connector-test.c        |    3 ++-
 tests/wocky-test-connector-server.c |   15 +++++++--------
 2 files changed, 9 insertions(+), 9 deletions(-)

commit 1c6b431e6fbc2413f1e2c7557caf15a02048d399
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 18:44:52 2009 +0100

    CA and CRL lists not properties any more: added via public method instead.

 wocky/wocky-connector.c |  111 ++++++++++++++++++++++++------
 wocky/wocky-connector.h |    6 ++
 wocky/wocky-tls.c       |  173 ++++++++++++++++++++---------------------------
 wocky/wocky-tls.h       |   14 ++--
 4 files changed, 174 insertions(+), 130 deletions(-)

commit fd244a61ae5c6b58759978de49f7960e071f76de
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 16:02:52 2009 +0100

    Catch more cert verification failures from gnutls and alter return accordingly.

 wocky/wocky-tls.c |   34 ++++++++++++++++++++++++++++++++--
 wocky/wocky-tls.h |    3 +++
 2 files changed, 35 insertions(+), 2 deletions(-)

commit 96aa57b55afbb0c39920eb9f9a0f6c55438dd4d6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 16:01:56 2009 +0100

    Wocky specific error on TLS handshake failure, don't propagate the gnutls one.

 wocky/wocky-connector.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 00d906384defb0b283ea05c8fbb00e8853780368
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Sep 11 15:47:32 2009 +0100

    git ignore multi-ca certs built by tests.

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 6cfab2cec199cfe88585ee3781b9ad63c91c1437
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 18:52:09 2009 +0100

    Typo, missing arg in last checkin.

 wocky/wocky-tls.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b8d2ee6f6975374984551b2bf3f8bdf6ed9a1206
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 18:50:10 2009 +0100

    Update tests to include loading multiple ca certs from a directory.

 tests/Makefile.am            |   41 ++++++++++++-------
 tests/certs/ca-0-cert.cfg    |   89 ++++++++++++++++++++++++++++++++++++++++++
 tests/certs/ca-1-cert.cfg    |   89 ++++++++++++++++++++++++++++++++++++++++++
 tests/certs/ca-2-cert.cfg    |   89 ++++++++++++++++++++++++++++++++++++++++++
 tests/certs/ca-cert.cfg      |   89 ------------------------------------------
 tests/wocky-connector-test.c |   19 ++++++++-
 6 files changed, 310 insertions(+), 106 deletions(-)

commit 98039f72a3edacf48a40cf60f39a6075f4ebc108
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 18:48:43 2009 +0100

    Debugging now reports total certs loaded from dir.

 wocky/wocky-tls.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit dc0f398d347e0c3f6520b36b84a2fa5f8b830010
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 17:57:16 2009 +0100

    Abort with GError with wockytls-cert-error quark on cert verification problem.

 tests/wocky-connector-test.c |   25 +++++++++++++------------
 wocky/wocky-connector.c      |    7 +++++--
 2 files changed, 18 insertions(+), 14 deletions(-)

commit 6a8e5b48efe481ff0462259c8edd5a6e9193cb25
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 17:31:59 2009 +0100

    Define tls cert status quark.

 wocky/wocky-tls.c |   11 +++++++++++
 wocky/wocky-tls.h |    3 +++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit 56ceea3886aa5633bbdecff225fd85ae988e0c9c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:57:44 2009 +0100

    { } around if in for loop (only statement in loop) (starttls)

 tests/wocky-test-connector-server.c |   14 ++++++++------
 1 files changed, 8 insertions(+), 6 deletions(-)

commit c61df5036b33b67136d168efef456ced5405231d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:56:08 2009 +0100

    { } around if (only statement in for loop) (handle_starttls).

 tests/wocky-test-connector-server.c |   14 ++++++++------
 1 files changed, 8 insertions(+), 6 deletions(-)

commit e5c5aaff32ce3774468de790ef9e938270699ada
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:52:45 2009 +0100

    DEBUG when stat of candidate ca/crl file or dir fails.

 wocky/wocky-tls.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit e57f5c4f29c753e64b48f19fd4cb5c2a3e23b725
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:44:38 2009 +0100

    Change signature to specifically be WockyTLSCertStatus *, not guint *.

 wocky/wocky-tls.c |    8 ++++----
 wocky/wocky-tls.h |    8 ++++----
 2 files changed, 8 insertions(+), 8 deletions(-)

commit d030e836b5e10fd661f9a2b23b443ad3aa9242ac
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:38:24 2009 +0100

    Follow gnio style for wocky-tls (code borrowed from there)

 wocky/wocky-tls.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 142bcfcc27a32db2833640e2fa3df582a56e5841
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:36:58 2009 +0100

    Tweak "$binary not installed" make error message.

 tests/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit b8b76837f273ff1d40d3e71eb916e25f6ae19466
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:16:11 2009 +0100

    Tests for certificate strict/lenient verification.

 tests/wocky-connector-test.c        |  308 ++++++++++++++++++++++++++++++++++-
 tests/wocky-test-connector-server.c |   53 ++++++-
 tests/wocky-test-connector-server.h |   13 ++-
 3 files changed, 363 insertions(+), 11 deletions(-)

commit 6264c62f742834361fdf5030fb6358a212293e26
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:15:35 2009 +0100

    Update example to conform to new wocky_tls_session_new API.

 examples/connect.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 5a2f92a47b18fb1402c5f7b07c2677b3b23af88e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:14:40 2009 +0100

    Support certificate verification via wocky_tls_session
    new API for wocky_tls_session_new used
    correctly handle results of wocky_tls_session_verify_peer when lenient/strict

 wocky/wocky-connector.c |   60 +++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 56 insertions(+), 4 deletions(-)

commit a9d71475175ec7dbcbd088036dd3e2d429171a8c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:12:34 2009 +0100

    wocky_tls_sessions can now do cert verification.
    debugging tweaks to make wocky-tls debugging tunable via WOCKY_TLS_DEBUG_LEVEL
    extra parameters to wocky_tls_session_new (ca and crl files/dirs)
    variable named stat -> _stat (conflict with stat(2))
    tweak WOCKY_TLS_VERIFY_NORMAL flags (subject to review anyway)

 wocky/wocky-tls.c |  167 ++++++++++++++++++++++++++++++++++++++++++----------
 wocky/wocky-tls.h |    8 ++-
 2 files changed, 141 insertions(+), 34 deletions(-)

commit 7b6b176e957745e5786c490a1f7888613f9417ce
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Sep 10 14:05:48 2009 +0100

    Generate extra invalid certs for testing.

 tests/Makefile.am               |   89 +++++++++++++++++++++++++++++----------
 tests/certs/exp-cert.cfg        |   89 +++++++++++++++++++++++++++++++++++++++
 tests/certs/new-cert.cfg        |   89 +++++++++++++++++++++++++++++++++++++++
 tests/certs/ss-cert.cfg         |   89 +++++++++++++++++++++++++++++++++++++++
 tests/certs/unknown-ca-cert.cfg |   89 +++++++++++++++++++++++++++++++++++++++
 tests/certs/unknown-cert.cfg    |   89 +++++++++++++++++++++++++++++++++++++++
 6 files changed, 512 insertions(+), 22 deletions(-)

commit 07dbdd3dad71d7739b32c94aae0d0dfbaadc6944
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Sep 9 14:49:08 2009 +0100

    Build helper programs in all target. Filter out the cert generation bits noise.

 tests/Makefile.am |   17 ++++++++++-------
 1 files changed, 10 insertions(+), 7 deletions(-)

commit b6122b7bc81f97da438c8e11cf2f2445f227e963
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Sep 9 12:32:07 2009 +0100

    Tidy up the cert verification error selection code.

 wocky/wocky-tls.c |   39 ++++++++++++++++++++++++++-------------
 1 files changed, 26 insertions(+), 13 deletions(-)

commit f0c194cb25e28172f0c12531ac425ab9d3ecfcb8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Sep 8 19:46:53 2009 +0100

    Basic server cert verification tests (more to follow)

 tests/wocky-connector-test.c |  100 ++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 100 insertions(+), 0 deletions(-)

commit 2cb3c8694ab690bd410efd05b34a15d13cd47ee6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Sep 8 19:46:28 2009 +0100

    Use the new certificate cerification function to check the server cert.

 wocky/wocky-connector.c |   56 +++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 54 insertions(+), 2 deletions(-)

commit 47f24d6387c3968cac25b80134e6d2ad4cb44291
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Sep 8 19:46:04 2009 +0100

    Add a certificate verification function (checks expiry, peer name etc)

 wocky/wocky-tls.c |   85 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-tls.h |   35 +++++++++++++++++++++-
 2 files changed, 119 insertions(+), 1 deletions(-)

commit 1346b9cca915c16a095dfbe92172cdf2d151fb00
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 8 11:48:31 2009 +0100

    wocky-connector-test: check the right error code now that decode_jis is actually smarter

 tests/wocky-connector-test.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit 07938cf687762add30978d72bf3623e8e8d5a320
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 8 11:13:01 2009 +0100

    sync wocky_decode_jid implementation with Gabble
    
    wocky_decode_jid now does some validity checks on the JID.

 wocky/wocky-utils.c |  135 ++++++++++++++++++++++++++++++++++-----------------
 wocky/wocky-utils.h |    2 +-
 2 files changed, 92 insertions(+), 45 deletions(-)

commit 47a91ac7e2ddaee74532f10f8e2ba51511e2a5ba
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Sep 3 13:39:15 2009 +0100

    add WOCKY_XMPP_NS_PUBSUB

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit f6ff602880d07de6df6e6dac66574b44f580ccf5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Sep 2 15:45:45 2009 +0100

    Don't create a WockyRoster in WockySession for now.
    
    We don't want to create it automatically for now as Gabble isn't ported
    to use WockyRoster yet.
    
    This reverts commit 74288a9802e56cf3404c95d9c3a28603d0b1bf41 and
    438140e5c05da82c030fc53b08d8fa9d43779d84.

 tests/wocky-roster-test.c  |    7 ++++---
 tests/wocky-session-test.c |   17 -----------------
 wocky/wocky-session.c      |   23 -----------------------
 wocky/wocky-session.h      |    3 ---
 4 files changed, 4 insertions(+), 46 deletions(-)

commit 5b9839ebe93637a4a6e72c18b3683ad8ec9d449c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Sep 2 14:54:51 2009 +0100

    Remove unnecessary gnio dependency

 wocky/wocky-uninstalled.pc.in |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 438140e5c05da82c030fc53b08d8fa9d43779d84
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 18:20:28 2009 +0100

    wocky-roster-test: use the roster created by the session

 tests/wocky-roster-test.c |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit 74288a9802e56cf3404c95d9c3a28603d0b1bf41
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 18:18:32 2009 +0100

    session: create a roster object

 tests/wocky-session-test.c |   17 +++++++++++++++++
 wocky/wocky-session.c      |   23 +++++++++++++++++++++++
 wocky/wocky-session.h      |    3 +++
 3 files changed, 43 insertions(+), 0 deletions(-)

commit acd9668386046417eca0ca2ab14de495326f8f5e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 18:15:09 2009 +0100

    fix identation

 wocky/wocky-session.c |   36 ++++++++++++++++++------------------
 1 files changed, 18 insertions(+), 18 deletions(-)

commit da1782aa17377b086aa69a1eead10de7b9a97a48
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 18:13:13 2009 +0100

    porter: don't create a contact factory anymore
    
    That's the job of the session now.

 wocky/wocky-porter.c |   18 ------------------
 1 files changed, 0 insertions(+), 18 deletions(-)

commit ba9d1ee743fa8a8b79871bcae928c18eb43dd453
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 18:11:55 2009 +0100

    pass a session instead of a porter to wocky_roster_new

 tests/wocky-roster-test.c |   17 ++++++++-------
 wocky/wocky-roster.c      |   47 ++++++++++++++++++++++++--------------------
 wocky/wocky-roster.h      |    3 +-
 3 files changed, 36 insertions(+), 31 deletions(-)

commit 899770c4f5e2455e1e299ea577c0ef68c770009d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 18:11:03 2009 +0100

    instantiate wocky sessions in tests

 tests/wocky-porter-test.c |    4 ++--
 tests/wocky-test-helper.c |   15 +++++++++------
 tests/wocky-test-helper.h |    3 +++
 3 files changed, 14 insertions(+), 8 deletions(-)

commit 2dd8e98031a100437a1d2e95845b6641082cab1e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 18:09:08 2009 +0100

    add wocky_session_start

 wocky/wocky-session.c |    7 +++++++
 wocky/wocky-session.h |    2 ++
 2 files changed, 9 insertions(+), 0 deletions(-)

commit 569176a4df56da2e8dda637d1a3e5f39a1549f47
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 17:07:29 2009 +0100

    wocky-session: create a contact-factory

 tests/wocky-session-test.c |   17 +++++++++++++++++
 wocky/wocky-session.c      |   24 ++++++++++++++++++++++--
 wocky/wocky-session.h      |    3 +++
 3 files changed, 42 insertions(+), 2 deletions(-)

commit 0b71b1ad5eefb26b3bb1bc8dfcc41f8c63f6ccfd
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 17:00:42 2009 +0100

    session: create a Porter for the connection

 tests/wocky-session-test.c |   17 +++++++++++++++++
 wocky/wocky-session.c      |   24 ++++++++++++++++++++++++
 wocky/wocky-session.h      |    3 +++
 3 files changed, 44 insertions(+), 0 deletions(-)

commit c901bceb51ccb818d7ce4e793d1432cf46bdfa16
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 16:51:27 2009 +0100

    add wocky-session-test.c

 .gitignore                 |    1 +
 tests/Makefile.am          |    9 ++++++++-
 tests/wocky-session-test.c |   43 +++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 52 insertions(+), 1 deletions(-)

commit 6b7ea9560ccc670ebe7b1deacc9cc814541c4010
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Sep 1 16:50:58 2009 +0100

    add wocky-session.[ch]

 wocky/Makefile.am     |    4 +-
 wocky/wocky-session.c |  186 +++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-session.h |   63 +++++++++++++++++
 wocky/wocky-types.h   |    1 +
 4 files changed, 253 insertions(+), 1 deletions(-)

commit 86beae82d585b7aa9cfdbce7b9b905108f57760a
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Mon Aug 31 15:53:11 2009 +0100

    codegen: only touch wocky-signals-marshal.list if it's actually changed
    
    Previously, if you edit any file in $(HANDWRITTEN_SOURCES), then
    wocky-signals-marshal.list would be recreated, meaning
    wocky-signals-marshal.{c,h} would also be recreated, meaning half of
    wocky would be rebuilt. This is not cool.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/Makefile.am |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 99bfadba1b0c35afffb58c7191e5a053c46e56de
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 17:30:08 2009 +0100

    contact-factory: fire signal when contacts are added

 tests/wocky-contact-factory-test.c |   30 ++++++++++++++++++++++++++++++
 wocky/wocky-contact-factory.c      |   20 ++++++++++++++++++--
 2 files changed, 48 insertions(+), 2 deletions(-)

commit 3d7e98a1731ef40cc316b448dacff2a296ac8104
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 16:10:54 2009 +0100

    Create the contact factory in the porter instead of the roster
    
    The factory should probably be created in a top-level object (as
    WockySession or something) but for now the Porter is the best candidate
    as it's used by most components.

 wocky/wocky-porter.c |   20 +++++++++++++++++++-
 wocky/wocky-roster.c |   11 +++++++----
 2 files changed, 26 insertions(+), 5 deletions(-)

commit ec18c467014369b5fd358a67f26db1a42e73c8a8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 12:23:05 2009 +0100

    wocky-docs.sgml: add WockyResourceContact and WockyContactFactory

 docs/reference/wocky-docs.sgml |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 22d14329604378c093b7baa00d9674b903b7511d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 12:22:44 2009 +0100

    add missing symbols to wocky-sections.txt

 docs/reference/wocky-sections.txt |   39 +++++++++++++++++++++++++++++++++++++
 1 files changed, 39 insertions(+), 0 deletions(-)

commit 4a59204d21a0a69dc23bffa9c37eabd5c44bc9b5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 12:01:53 2009 +0100

    run wocky-connector-test last as it takes the age of the universe to run

 tests/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit c7f37782d54100a90e64c84b076bff4756e18e98
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 12:00:00 2009 +0100

    don't assert if both contacts are NULL in equal functions

 wocky/wocky-bare-contact.c     |    2 --
 wocky/wocky-resource-contact.c |    2 --
 2 files changed, 0 insertions(+), 4 deletions(-)

commit 2648e92b077a9222328b8178cf3f7b8148f3d198
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 11:57:59 2009 +0100

    merge resource_contact_disposed_cb and bare_contact_disposed_cb together

 wocky/wocky-contact-factory.c |   33 +++++++++++++--------------------
 1 files changed, 13 insertions(+), 20 deletions(-)

commit bdb453ee77012ab9d3a8c527f6e405cf3bb7d30b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 17:41:23 2009 +0100

    wocky_contact_factory_ensure_resource_contact: associate the new resource with the bare contact

 tests/wocky-contact-factory-test.c |   14 +++++++++++---
 wocky/wocky-contact-factory.c      |    2 ++
 2 files changed, 13 insertions(+), 3 deletions(-)

commit 4915edf114c4e6d59e939c55dcf5b9035c946814
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 17:33:16 2009 +0100

    test wocky_bare_contact_get_resources and wocky_bare_contact_add_resource

 tests/wocky-bare-contact-test.c |   44 +++++++++++++++++++++++++++++++++++++++
 1 files changed, 44 insertions(+), 0 deletions(-)

commit 46dad8e0d967afbe42dd08442bb8ea509a4e7a7c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 17:32:59 2009 +0100

    bare-contact: keep a list of the WockyResourceContact associated with this bare contact

 wocky/wocky-bare-contact.c |   45 ++++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-bare-contact.h |    7 ++++++
 2 files changed, 50 insertions(+), 2 deletions(-)

commit 86391664f8e35c4e8235117502ba288c57e15f48
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 17:07:07 2009 +0100

    test wocky_contact_factory_lookup_resource_contact

 tests/wocky-contact-factory-test.c |   21 +++++++++++++++++++++
 1 files changed, 21 insertions(+), 0 deletions(-)

commit 0652d1d15bb58efa924c016942d8980b798aca6e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 17:06:57 2009 +0100

    add wocky_contact_factory_lookup_resource_contact

 wocky/wocky-contact-factory.c |    9 +++++++++
 wocky/wocky-contact-factory.h |    4 ++++
 2 files changed, 13 insertions(+), 0 deletions(-)

commit 514ba77365eca0b98d1502a233414c927092a2f6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 16:49:28 2009 +0100

    roster: use the contact factory to create bare contacts

 wocky/wocky-bare-contact.c |    4 ++--
 wocky/wocky-roster.c       |   16 ++++++++++++----
 2 files changed, 14 insertions(+), 6 deletions(-)

commit bd32e4b5890bfb89348daccd563c908f9b60c5d1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 16:17:50 2009 +0100

    test wocky_contact_factory_ensure_resource_contact

 tests/wocky-contact-factory-test.c |   34 ++++++++++++++++++++++++++++++++++
 1 files changed, 34 insertions(+), 0 deletions(-)

commit 0bb46b877364cea6ca8536e397c35cd18b31f42c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 16:17:08 2009 +0100

    test wocky_resource_contact_equal

 tests/wocky-resource-contact-test.c |   29 +++++++++++++++++++++++++++++
 1 files changed, 29 insertions(+), 0 deletions(-)

commit 290d7c19352ec88d113be42772107894343db48f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 16:15:42 2009 +0100

    add wocky_resource_contact_equal

 wocky/wocky-resource-contact.c |   17 +++++++++++++++++
 wocky/wocky-resource-contact.h |    3 +++
 2 files changed, 20 insertions(+), 0 deletions(-)

commit cf4f136dfd09d9dcab342483d07633b260da7913
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 15:55:39 2009 +0100

    add wocky_contact_factory_ensure_resource_contact

 wocky/wocky-contact-factory.c |   55 +++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-contact-factory.h |    5 +++
 2 files changed, 60 insertions(+), 0 deletions(-)

commit a6da9047512845872e0ad7a041ab93245c79975c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 15:30:38 2009 +0100

    fix wocky_contact_factory_lookup_bare_contact style

 wocky/wocky-contact-factory.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 27a673970917f4fd9814be8a9bfb6a5cfb26cff6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 13:11:53 2009 +0100

    test wocky_contact_factory_lookup_bare_contact

 tests/wocky-contact-factory-test.c |   28 ++++++++++++++++++++++++++++
 1 files changed, 28 insertions(+), 0 deletions(-)

commit 7b32de66252ed864860ee86653d2238c002ff962
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 13:11:45 2009 +0100

    add wocky_contact_factory_lookup_bare_contact

 wocky/wocky-contact-factory.c |   10 ++++++++++
 wocky/wocky-contact-factory.h |    4 ++++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit 085c06d29ae59e05515b285eeaea160fcf17a9c2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 13:05:56 2009 +0100

    contact-factory: keep a weak ref on bare contact objects
    
    That way they are removed from the factory as soon other components
    stopped to use them.

 wocky/wocky-contact-factory.c |   34 ++++++++++++++++++++++++++++++----
 1 files changed, 30 insertions(+), 4 deletions(-)

commit 103b34419f9cdf09478dec1eb3f9b16b8cbe9a3b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 12:39:33 2009 +0100

    test wocky_contact_factory_ensure_bare_contact

 tests/wocky-contact-factory-test.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit 7ab7e8ba3db05e74f4e92cb25d7b223e007bf313
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 12:38:37 2009 +0100

    add wocky_contact_factory_ensure_bare_contact

 wocky/wocky-contact-factory.c |   19 +++++++++++++++++++
 wocky/wocky-contact-factory.h |    6 +++++-
 2 files changed, 24 insertions(+), 1 deletions(-)

commit bef77130d6a6eea1ee94dbefc1cb777642bf19a4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 11:59:10 2009 +0100

    add wocky_bare_contact_new

 tests/wocky-bare-contact-test.c |    6 +++++-
 wocky/wocky-bare-contact.c      |    8 ++++++++
 wocky/wocky-bare-contact.h      |    2 ++
 3 files changed, 15 insertions(+), 1 deletions(-)

commit 70e7ef61ac52cbf9d235cc63911e4485296e93d4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 11:43:53 2009 +0100

    add wocky-contact-factory-test.c

 .gitignore                         |    1 +
 tests/Makefile.am                  |    9 ++++++++-
 tests/wocky-contact-factory-test.c |   34 ++++++++++++++++++++++++++++++++++
 3 files changed, 43 insertions(+), 1 deletions(-)

commit 678a68e813cc43267b286c9224e09fc2f22a1e27
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 11:24:12 2009 +0100

    add wocky-contact-factory.[ch]

 wocky/Makefile.am             |    4 +-
 wocky/wocky-contact-factory.c |  167 +++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-contact-factory.h |   63 +++++++++++++++
 3 files changed, 233 insertions(+), 1 deletions(-)

commit 16df0d82689c0d916c1657ca987a7265eddf7eb8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 13:24:05 2009 +0100

    add and test wocky_resource_contact_get_bare_contact

 tests/wocky-resource-contact-test.c |   20 ++++++++++++++++++++
 wocky/wocky-resource-contact.c      |    8 ++++++++
 wocky/wocky-resource-contact.h      |    3 +++
 3 files changed, 31 insertions(+), 0 deletions(-)

commit 0e35b89efafb1f8f7c9cac4110fd348bfcafa285
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 13:21:19 2009 +0100

    add and test wocky_resource_contact_get_resource

 tests/wocky-resource-contact-test.c |   20 ++++++++++++++++++++
 wocky/wocky-resource-contact.c      |    8 ++++++++
 wocky/wocky-resource-contact.h      |    3 +++
 3 files changed, 31 insertions(+), 0 deletions(-)

commit 0fed93aa2df5d8c514b2108023351892b7ee875d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 11:00:44 2009 +0100

    add wocky-resource-contact-test.c

 .gitignore                          |    1 +
 tests/Makefile.am                   |    9 +++++-
 tests/wocky-resource-contact-test.c |   52 +++++++++++++++++++++++++++++++++++
 3 files changed, 61 insertions(+), 1 deletions(-)

commit 7b873034f33f7828ab5bec0bdadefab26b6d2ff8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 10:59:52 2009 +0100

    add wocky-resource-contact.[ch]

 wocky/Makefile.am              |    2 +
 wocky/wocky-resource-contact.c |  219 ++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-resource-contact.h |   66 ++++++++++++
 wocky/wocky-types.h            |    1 +
 4 files changed, 288 insertions(+), 0 deletions(-)

commit 53d9184bc0a332a02c7c1c47ee697d9da67c1a89
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:37:39 2009 +0100

    wocky-bare-contact: wrap some big lines

 wocky/wocky-bare-contact.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 63cafe6e56b1369fd38f6048e08e5fb40771b3de
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:21:05 2009 +0100

    add missing WokcyRoster methods to wocky-sections.txt

 docs/reference/wocky-sections.txt |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit f0f0b39ccf729203d5eebbefd09601334825e1f6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:13:36 2009 +0100

    add wocky-contact symbols to wocky-sections.txt

 docs/reference/wocky-sections.txt |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit 642c27dcd500fd1887568b8a47e3523daa79c078
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:09:40 2009 +0100

    fix WockyBareContact doc and add missing symbols

 docs/reference/wocky-docs.sgml    |    1 +
 docs/reference/wocky-sections.txt |   39 +++++++++++++++++++++---------------
 2 files changed, 24 insertions(+), 16 deletions(-)

commit a0fa9d9ebe90d5644c6c1b7adc1de6e0e75d5432
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 13:56:54 2009 +0100

    wocky-bare-contact-test: test instantiation

 tests/wocky-bare-contact-test.c |   17 +++++++++++++++++
 1 files changed, 17 insertions(+), 0 deletions(-)

commit 7cc87a65bf4ebcf177f738d5d514db08482f321c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 13:53:17 2009 +0100

    WockyBareContact is now a subclass of WockyContact

 wocky/wocky-bare-contact.c |    2 +-
 wocky/wocky-bare-contact.h |    5 +++--
 2 files changed, 4 insertions(+), 3 deletions(-)

commit ffa7dac943af0bba37420f1d4df1d23f80daa734
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 12:47:32 2009 +0100

    add WockyContact which will be used as a base class for all contact objects

 wocky/Makefile.am     |    2 +
 wocky/wocky-contact.c |  158 +++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-contact.h |   60 +++++++++++++++++++
 wocky/wocky-types.h   |    1 +
 4 files changed, 221 insertions(+), 0 deletions(-)

commit 7b9bff7159e5fdb9b7e8e7032d9d8073a03c05df
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 12:46:51 2009 +0100

    wocky-bare-contact: fix doc section

 wocky/wocky-bare-contact.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit c2cadffcb73b9869cd3439ba3fd7bcd63675f5ad
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 12:35:18 2009 +0100

    rename WockyContact to WockyBareContact

 tests/wocky-bare-contact-test.c |  138 +++++++++++++-------------
 tests/wocky-roster-test.c       |  160 ++++++++++++++--------------
 wocky/wocky-bare-contact.c      |  216 +++++++++++++++++++-------------------
 wocky/wocky-bare-contact.h      |   76 +++++++-------
 wocky/wocky-roster.c            |   86 ++++++++--------
 wocky/wocky-roster.h            |   10 +-
 wocky/wocky-types.h             |    2 +-
 7 files changed, 344 insertions(+), 344 deletions(-)

commit 803cd9cc6bc424871f949b7d11a83a832967ef06
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 12:28:54 2009 +0100

    rename wocky-contact-test.c to wocky-bare-contact-test.c

 .gitignore                      |    2 +-
 tests/Makefile.am               |    8 +-
 tests/wocky-bare-contact-test.c |  317 +++++++++++++++++++++++++++++++++++++++
 tests/wocky-contact-test.c      |  317 ---------------------------------------
 4 files changed, 322 insertions(+), 322 deletions(-)

commit 5659b40c747817bcdf841ea1d6e208da6382758b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 12:26:06 2009 +0100

    rename wocky-contact.[ch] to wocky-bare-contact.[ch]

 tests/wocky-contact-test.c |    2 +-
 tests/wocky-roster-test.c  |    2 +-
 wocky/Makefile.am          |    4 +-
 wocky/wocky-bare-contact.c |  618 ++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-bare-contact.h |   93 +++++++
 wocky/wocky-contact.c      |  618 --------------------------------------------
 wocky/wocky-contact.h      |   93 -------
 wocky/wocky-roster.c       |    2 +-
 8 files changed, 716 insertions(+), 716 deletions(-)

commit 9a5e32f52df7712faef82edf929d14f6b1db0c9a
Merge: 69ec13a f72e909
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 11:03:18 2009 +0100

    Merge branch 'roster+edit+flying'

commit f72e9099378fca8821869e6c406e090f7394f5d7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 10:32:52 2009 +0100

    test_roster_add_contact: call add_contact with an existing contact but different details

 tests/wocky-roster-test.c |   33 +++++++++++++++++++++++++++++++--
 1 files changed, 31 insertions(+), 2 deletions(-)

commit 30f1a723266c6555369c8c8d48eb7f4e982c25e5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 10:31:24 2009 +0100

    wocky_roster_add_contact_async: replace current details if needed
    
    When we have an add contact and the contact is already on the roster,
    we should check the details are the same, and if they are not, update
    the contact, _replacing_ the current details (name, group) with
    those from the add call.

 wocky/wocky-roster.c |   29 ++++++++++++++++++-----------
 1 files changed, 18 insertions(+), 11 deletions(-)

commit 475c9104cf7a9d875141d25a205f4f1293f51f32
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 10:15:48 2009 +0100

    roster: fix a typo

 wocky/wocky-roster.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d368de837f1acdf4087f776cf52cee95c95d0b62
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 28 10:14:36 2009 +0100

    test_contact_copy: fix a comment

 tests/wocky-contact-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d77e579856adc2f30bb7410613a4b4ca8f7720a6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 27 17:54:02 2009 +0100

    change_roster_iq_cb: remove FIXME about upgrade stanza and explain the rational

 wocky/wocky-roster.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 69ec13a5764686c3eb1e42a5c5c10f661ea3ede3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Aug 27 14:56:16 2009 +0100

    Add missing gtk-doc markup, note when args can be NULL to ignore.

 wocky/wocky-connector.c |   32 ++++++++++++++++----------------
 1 files changed, 16 insertions(+), 16 deletions(-)

commit b079d8b3c45ab865a52864becb11bdac830ee3cd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Aug 27 13:21:52 2009 +0100

    Add missing connector entry in sgml file.

 docs/reference/wocky-docs.sgml |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8296dc56b00369e4fbe30fa64b2ea8f3ca34c47e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Aug 27 13:13:37 2009 +0100

    Returns markup needs to be last in a function doc.

 wocky/wocky-connector.c |   18 +++++++++---------
 1 files changed, 9 insertions(+), 9 deletions(-)

commit 07a6ff240df931f1d3af5319e1e8eb59c580f3c1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 26 18:05:47 2009 +0100

    Documentation fixes and gtk-doc-bug workarounds.
    Documented remaining WockyConnectorError enum values
    Names of args in header file must match names in doc string: C file signatures are ignored for this: Make header file names match C file arg names to avoid confusion and make gtk-doc shut up.
    Code flow diagram should be treated as a code example by gtk-doc.

 wocky/wocky-connector.c |    4 ++++
 wocky/wocky-connector.h |   44 ++++++++++++++++++++++++++++++++++----------
 2 files changed, 38 insertions(+), 10 deletions(-)

commit d2b1dc9ae9139877f6aa93dd4470bd76c075fbe7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 26 17:59:52 2009 +0100

    Minor doc whitespace, typo and content fixes.

 wocky/wocky-connector.c |   29 ++++++++++++++++-------------
 1 files changed, 16 insertions(+), 13 deletions(-)

commit f1662d06e093a94eb5bf3aab2f8e7320f649536b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 26 16:12:44 2009 +0100

    Docs added for wocky-connector.c

 wocky/wocky-connector.c |  193 +++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 188 insertions(+), 5 deletions(-)

commit aa19dda9e0a91139c3042828d1cd096a62ca2bff
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 15:07:07 2009 +0100

    wocky-xmpp-connection: add missing arg in the doc of some functions

 wocky/wocky-xmpp-connection.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 84eba0b981557f364e4b9718fbcfa808b9ca2406
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 15:00:04 2009 +0100

    fix wocky_decode_jid doc

 wocky/wocky-utils.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 3e5c7bc73425720b4ecee04bdb7c1c08e97fad4a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:50:47 2009 +0100

    fix WockyRosterError doc

 wocky/wocky-roster.h |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 213032b24421c9ab2244a44ba7e4977f48a8c572
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:55:04 2009 +0100

    fix wocky_tls_session_server_new doc

 wocky/wocky-tls.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

commit c524818f6f93b1b0fb5ec85553e4e8c6c4c8a7e4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:51:43 2009 +0100

    fix wocky_xmpp_node_unpack_error doc

 wocky/wocky-xmpp-node.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 027daab444c52cdb8c4c6deedbebc8c9166ee2b7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 26 14:28:49 2009 +0100

    add Class to wocky-sections.txt

 docs/reference/wocky-sections.txt |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit efa42b0a4e2505307dfa88a2219e57c83da89cac
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 14:38:51 2009 +0100

    wocky-roster-test: add test_add_contact_twice

 tests/wocky-roster-test.c |   65 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 65 insertions(+), 0 deletions(-)

commit 612e04824c25069688878e68f47d71ff94d7f2b5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 14:23:07 2009 +0100

    roster_update: print added contact in debug info

 wocky/wocky-roster.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 9c61c83e61785959687e804ec97d0716c6f060a1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 14:22:47 2009 +0100

    add wocky_contact_debug_print

 wocky/wocky-contact.c |   14 ++++++++++++++
 wocky/wocky-contact.h |    2 ++
 2 files changed, 16 insertions(+), 0 deletions(-)

commit fe3f868bb5acedc676e7fa770e04867f906872f7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 14:19:29 2009 +0100

    make wocky_roster_subscription_to_string public. That can be useful for debugging print

 wocky/wocky-roster.c |    6 +++---
 wocky/wocky-roster.h |    4 ++++
 2 files changed, 7 insertions(+), 3 deletions(-)

commit 9ab532ddb545a6454c1ec51fe2f04063da4c796f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 14:14:11 2009 +0100

    wocky-roster-test: add test_remove_two_groups

 tests/wocky-roster-test.c |   85 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 85 insertions(+), 0 deletions(-)

commit f0018d788796cae5c0ec386f7af2ab7e55950ce5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 12:47:10 2009 +0100

    wocky-roster-test: add test_add_two_groups

 tests/wocky-roster-test.c |   87 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 87 insertions(+), 0 deletions(-)

commit 513f7188aabe1ba440cda3f968d94ab886847ce4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 12:28:57 2009 +0100

    factor out pending_operation_has_changes

 wocky/wocky-roster.c |   27 ++++++++++++++++++++++-----
 1 files changed, 22 insertions(+), 5 deletions(-)

commit 817e9ad57283dcbe656c9249f6b2400972e6ce6b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 12:06:25 2009 +0100

    wocky-roster-test: add test_change_name_remove_add

 tests/wocky-roster-test.c |   79 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 79 insertions(+), 0 deletions(-)

commit ebe66f894d4c92ad89bc10ef4ba0d6c2c128c809
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 11:48:04 2009 +0100

    wocky-roster-test: add test_remove_contact_twice

 tests/wocky-roster-test.c |   68 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 68 insertions(+), 0 deletions(-)

commit 275fe5abe2faa5e0fe070fc026738c5cb34e0616
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 11:47:34 2009 +0100

    build_iq_for_pending: if there is no contact, check first if we want to remove it

 wocky/wocky-roster.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit b62f77a4ea3eb402b55ed162f4e95d013b022c89
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 11:33:36 2009 +0100

    wocky-roster-test: add test_change_name_twice

 tests/wocky-roster-test.c |   70 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 70 insertions(+), 0 deletions(-)

commit 025d7d82bad9a1ff580270f1be8d6081615ec746
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 18:56:20 2009 +0100

    wocky-roster-test: add test_edit_contact_remove

 tests/wocky-roster-test.c |   83 ++++++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 82 insertions(+), 1 deletions(-)

commit d8628e8b1cd47349eb670dbebf94b5606e70b22f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 18:55:59 2009 +0100

    wocky_roster_remove_contact_async: queue operation if another one is flying

 wocky/wocky-roster.c |   71 ++++++++++++++++++++++++++++++++++++++-----------
 1 files changed, 55 insertions(+), 16 deletions(-)

commit 51632617b791c9c4daf6e65edc2b19965bf8414a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 16:07:53 2009 +0100

    test_multi_contact_edit: try to re-add a group we just removed

 tests/wocky-roster-test.c |   24 ++++++++++++++++++------
 1 files changed, 18 insertions(+), 6 deletions(-)

commit 2128425835d244bdbb4bb35b5aecdbcec465f118
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 16:07:37 2009 +0100

    pending_operation_add_group: remove group from groups_to_remove if needed

 wocky/wocky-roster.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit a2bfdca62f52b860ae44627b2dcdaf16fa14bc8e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 16:01:30 2009 +0100

    test_multi_contact_edit: use Juliet instead of Romeo as example
    
    She has 2 groups so allow us to test more stuffs

 tests/wocky-roster-test.c |   32 ++++++++++++++++----------------
 1 files changed, 16 insertions(+), 16 deletions(-)

commit ecfcfb3c912be2c0e28d1868870dab427e6af1a9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 15:55:00 2009 +0100

    test_multi_contact_edit: remove a group we just added

 tests/wocky-roster-test.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 11df25b03403979b4a628d8ba8f0667baeab7132
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 15:51:28 2009 +0100

    wocky_roster_contact_remove_group_async: queue operation if another one is flying

 wocky/wocky-roster.c |   19 +++++++++++++++----
 1 files changed, 15 insertions(+), 4 deletions(-)

commit 213986f24589a3392de19a25fef2e1751e22ffed
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 14:23:13 2009 +0100

    wocky-roster-test: add test_multi_contact_edit

 tests/wocky-roster-test.c |   99 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 99 insertions(+), 0 deletions(-)

commit a6026abaebfd850ebdc6a6446fd2b66daa57291e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 15:41:24 2009 +0100

    wocky_roster_contact_add_group_async: queue operation if another one is flying

 wocky/wocky-roster.c |   18 ++++++++++++++----
 1 files changed, 14 insertions(+), 4 deletions(-)

commit 37dc05e30aa4f0a0e96f2b7c55879d886d423737
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 15:22:47 2009 +0100

    use hash tables to store groups_to_add and groups_to_remove

 wocky/wocky-roster.c |   50 +++++++++++++++++++++++++++++++-------------------
 1 files changed, 31 insertions(+), 19 deletions(-)

commit 2e274f18860854781215976d52192f49dbd0e148
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 14:18:02 2009 +0100

    wocky-roster-test: factor out check_edit_roster_stanza

 tests/wocky-roster-test.c |   58 ++++++++++++++++++++++++--------------------
 1 files changed, 32 insertions(+), 26 deletions(-)

commit fe22244e7c306cb482dab17ec56619aca4cb9a18
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 13:25:15 2009 +0100

    wocky-roster-test: add test_remove_contact_edit

 tests/wocky-roster-test.c |   70 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 70 insertions(+), 0 deletions(-)

commit ded5f82bd7761b97cc91d9175f3216695f627bfb
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 13:24:58 2009 +0100

    wocky_roster_change_contact_name_async: queue operation if another one is flying

 wocky/wocky-roster.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

commit 7682ff097d5d720412d3beb54300864a4cc18aab
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 13:24:20 2009 +0100

    implement waiting_operations_completed

 wocky/wocky-roster.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit 4b962cb33bd77b5bc9a27899fcd8ff4b5d8189a7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 13:23:53 2009 +0100

    build_iq_for_pending: set WOCKY_ROSTER_ERROR_NOT_IN_ROSTER if contact is not roster anymore and there is no add action pending

 wocky/wocky-roster.c |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

commit 00884eb5679df8f46a9f7dca0974bb7c7f4477f6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 10:57:59 2009 +0100

    add test_remove_contact_re_add

 tests/wocky-roster-test.c |  103 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 103 insertions(+), 0 deletions(-)

commit ad29eac246b9c4dc2b0b26fcef81b2b72d8cb546
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 18 10:57:28 2009 +0100

    start to implement flying requests support

 wocky/wocky-roster.c |  422 ++++++++++++++++++++++++++++++++++++++++++++------
 1 files changed, 375 insertions(+), 47 deletions(-)

commit 21299f70699e597119ea48394d05bb40866b90ad
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 18:28:28 2009 +0100

    wocky-roster-test: factor out check_add_contact_stanza

 tests/wocky-roster-test.c |   49 +++++++++++++++++++++++++++-----------------
 1 files changed, 30 insertions(+), 19 deletions(-)

commit a2a5d2752142c773a7b277cb9cffcd6c4b72a8d3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 18:11:07 2009 +0100

    wocky-roster-test: factor out check_remove_contact_stanza

 tests/wocky-roster-test.c |   25 +++++++++++++++++--------
 1 files changed, 17 insertions(+), 8 deletions(-)

commit 301fb4bb31cba1ce5f2013878109736edd6fe8d0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 18:03:16 2009 +0100

    wocky-roster-test: factor out ack_iq

 tests/wocky-roster-test.c |   90 ++++++++++++--------------------------------
 1 files changed, 25 insertions(+), 65 deletions(-)

commit 0c00e45ab0033b8153631778637ac3e9e63fa0c1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 17:04:47 2009 +0100

    test wocky_contact_copy

 tests/wocky-contact-test.c |   55 ++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 55 insertions(+), 0 deletions(-)

commit 87ea543caf3779e810c64d5d2ef37cbcf65edd1a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 17:02:23 2009 +0100

    add wocky_contact_copy

 wocky/wocky-contact.c |   11 +++++++++++
 wocky/wocky-contact.h |    2 ++
 2 files changed, 13 insertions(+), 0 deletions(-)

commit f9cf534a227831fa76dacdb46b088ef7d3d0db4d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 12:23:19 2009 +0100

    wocky-roster-test: add comments for each section of tests

 tests/wocky-roster-test.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 7a095da184600d39dde570ce5dcffbac6166da50
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 17:50:50 2009 +0100

    pass jid, name and groups to wocky_roster_add_contact_async instead of a WockyContact object
    
    WockyContact will be renamed to WockyRosterContact at some point and
    user shouldn't have to create one just to add a contact to the roster.

 tests/wocky-roster-test.c |    9 +++++----
 wocky/wocky-roster.c      |   25 ++++++++++++++++++-------
 wocky/wocky-roster.h      |    4 +++-
 3 files changed, 26 insertions(+), 12 deletions(-)

commit 15cab9324466a7cbff0f9bf07f3ad61daee00ed3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 15:41:30 2009 +0100

    test_roster_remove_contact: try to remove twice the same contact

 tests/wocky-roster-test.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit 60601de354886a4a0762d801145189f6688554de
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 15:41:14 2009 +0100

    wocky_roster_remove_contact_async: don't raise an error if contact is not in roster

 wocky/wocky-roster.c |   13 +++++++------
 1 files changed, 7 insertions(+), 6 deletions(-)

commit 5bffa35f8194c7d2645c2cfe219c7a1dff7a47c1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 15:31:41 2009 +0100

    test_roster_add_contact: try to add twice the same contact

 tests/wocky-roster-test.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit cb0b24ba21ff4963e16f6a7da061c9ec64870d59
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 15:31:24 2009 +0100

    wocky_roster_add_contact_async: don't raise an error if contact is already in the roster

 wocky/wocky-roster.c |   13 +++++++------
 wocky/wocky-roster.h |    1 -
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 7b64e80e2c66ae9610f12444d32eb48fcf43ca70
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 15:25:51 2009 +0100

    wocky_roster_add_contact_async: contacts are garanteed to have a jid

 wocky/wocky-roster.c |    8 +-------
 wocky/wocky-roster.h |    1 -
 2 files changed, 1 insertions(+), 8 deletions(-)

commit 8fe120e8ded8415c81583b063640ed94c2cb5a98
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 15:23:59 2009 +0100

    wocky_contact_constructed: assert that a jid has been defined
    
    It doesn't make sense to create a contact without a jid

 wocky/wocky-contact.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 67a93b68a4c224b8d16c13a0fe6ec541cd93d992
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 12:40:26 2009 +0100

    wocky-contact-test: test_remove_group: test with a contact having no group defined

 tests/wocky-contact-test.c |   14 +++++++++++++-
 1 files changed, 13 insertions(+), 1 deletions(-)

commit 3c3690615b1227bfd5b8b8cf9cfac1417905d138
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 12:39:58 2009 +0100

    wocky-contact-test: test with a contact having no group defined

 tests/wocky-contact-test.c |   12 +++++++++++-
 1 files changed, 11 insertions(+), 1 deletions(-)

commit 275e8125a16c5f973d3f089a17cfc41a2a9eed4c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 12:32:24 2009 +0100

    wocky-contact-test: test_add_group: test with a contact having no group defined

 tests/wocky-contact-test.c |   24 +++++++++++++++++++++++-
 1 files changed, 23 insertions(+), 1 deletions(-)

commit 8e33b30b7678c9280a6a90bc484a9b619875ec13
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 16:05:56 2009 +0100

    wocky-roster-test: test wocky_roster_contact_remove_group_async

 tests/wocky-roster-test.c |  148 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 148 insertions(+), 0 deletions(-)

commit e10d996b2b32014bf2899e3375e95fc8d64e0f64
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 12:05:23 2009 +0100

    add wocky_roster_contact_remove_group_async

 wocky/wocky-roster.c |   77 ++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-roster.h |   11 +++++++
 2 files changed, 88 insertions(+), 0 deletions(-)

commit 873f687f88876f78d0adb6a5f48f386f23e82d9c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 11:45:05 2009 +0100

    wocky-contact-test: test wocky_contact_remove_group

 tests/wocky-contact-test.c |   37 +++++++++++++++++++++++++++++++++++++
 1 files changed, 37 insertions(+), 0 deletions(-)

commit e95e242ccb9431bf8226ef08e93f7f6c4ad548e7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 11:44:26 2009 +0100

    add wocky_contact_remove_group

 wocky/wocky-contact.c |   30 ++++++++++++++++++++++++++++++
 wocky/wocky-contact.h |    3 +++
 2 files changed, 33 insertions(+), 0 deletions(-)

commit aa712d91f9a5fb0e6b2fc1afbd11c0f7e960770d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 16:06:37 2009 +0100

    wocky-roster-test: test wocky_roster_contact_add_group_async

 tests/wocky-roster-test.c |  162 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 162 insertions(+), 0 deletions(-)

commit 2dd8b3d97507535ec469c0dc1f327d3d232f0099
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 11:32:09 2009 +0100

    add wocky_roster_contact_add_group_async

 wocky/wocky-roster.c |   63 ++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-roster.h |   11 ++++++++
 2 files changed, 74 insertions(+), 0 deletions(-)

commit 1752e147afde625fc6c701a2cc84c1ff991f0ac2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 11:29:33 2009 +0100

    wocky-contact-test: test wocky_contact_in_group

 tests/wocky-contact-test.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit a96e072994339344181fb2193574ad13649be1b6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 11:29:16 2009 +0100

    add wocky_contact_in_group

 wocky/wocky-contact.c |   19 +++++++++++++++++++
 wocky/wocky-contact.h |    3 +++
 2 files changed, 22 insertions(+), 0 deletions(-)

commit 0d37ced42ef8da8e18c28403a3b18addceb9962f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 11:09:57 2009 +0100

    wocky-contact-test: test wocky_contact_add_group

 tests/wocky-contact-test.c |   37 +++++++++++++++++++++++++++++++++++++
 1 files changed, 37 insertions(+), 0 deletions(-)

commit c393cc0f62299f1cab865dfb05657c50c6ebf84b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 11:09:35 2009 +0100

    add wocky_contact_add_group

 wocky/wocky-contact.c |   40 ++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-contact.h |    3 +++
 2 files changed, 43 insertions(+), 0 deletions(-)

commit fd1f44cf1355f8a2af12780c2d4cdaddef1c99aa
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 16:07:21 2009 +0100

    wocky-roster-test: add test_roster_change_name

 tests/wocky-roster-test.c |  149 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 149 insertions(+), 0 deletions(-)

commit a1261a0950fd12b180d3291f179e033e4b4f4117
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 17:43:59 2009 +0100

    add wocky_roster_change_contact_name_async

 wocky/wocky-roster.c |   61 ++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-roster.h |   11 +++++++++
 2 files changed, 72 insertions(+), 0 deletions(-)

commit d2621a79329c1545c1f2e3f2cb572175d479a06c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 17:43:34 2009 +0100

    build_iq_for_contact: include subscription

 wocky/wocky-roster.c |   27 +++++++++++++++++++++++++++
 1 files changed, 27 insertions(+), 0 deletions(-)

commit 21c6363251fa1ad57096b477e6974003cec6dd00
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 17:40:24 2009 +0100

    wocky-roster-test: ensure that the 'add contact' request doesn't have a subscription attribute

 tests/wocky-roster-test.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit b608e6957f20f3a4f4126fb885f3178bf1ddf57a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 17:17:02 2009 +0100

    roster: merge roster_add_contact_cb and roster_remove_contact_cb to change_roster_iq_cb
    
    There is no point to have 2 different callbacks containing exactly the
    same code. Merge them in a single callback.

 wocky/wocky-roster.c |   36 ++++++++----------------------------
 1 files changed, 8 insertions(+), 28 deletions(-)

commit 1e2124fe8e3c5a7e8fbc1c20d06fc047512f45d9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 17:04:10 2009 +0100

    factor out build_iq_for_contact

 wocky/wocky-roster.c |   72 ++++++++++++++++++++++++++++++++------------------
 1 files changed, 46 insertions(+), 26 deletions(-)

commit b566e746aed0937a17f2813029850a80a7e81244
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 16:46:23 2009 +0100

    fix typo in code

 wocky/wocky-roster.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c45f5a884028df38851a234021228bf21ca5076f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 15:40:20 2009 +0100

    wocky-roster-test: add test_roster_remove_contact

 tests/wocky-roster-test.c |  105 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 105 insertions(+), 0 deletions(-)

commit b292d3f827aca059def10203820141fdf5cb62bb
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 15:39:38 2009 +0100

    add wocky_roster_remove_contact_async

 wocky/wocky-roster.c |   84 ++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-roster.h |   11 ++++++
 2 files changed, 95 insertions(+), 0 deletions(-)

commit 047055d94343f212a1241178cec58066c0646b32
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 15:38:23 2009 +0100

    roster: factor out change_roster_operation_complete

 wocky/wocky-roster.c |   23 ++++++++++++++++-------
 1 files changed, 16 insertions(+), 7 deletions(-)

commit 72ab4a40163dc836c84743e41396bc465046cc73
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 12:40:47 2009 +0100

    wocky-roster-test: add test_roster_add_contact

 tests/wocky-roster-test.c |  134 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 134 insertions(+), 0 deletions(-)

commit e3ca343bacd5d3d49a56d7b3aa82ca9cdc0fe37f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 12:39:48 2009 +0100

    add wocky_roster_add_contact_async

 wocky/wocky-roster.c |  123 ++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-roster.h |   12 +++++
 2 files changed, 135 insertions(+), 0 deletions(-)

commit 24f57602a015802dc426dd6371912c088bffee63
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 25 15:19:48 2009 +0100

    s/SURPRESSIONS/SUPPRESSIONS

 tests/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 24dd62085abd4c2a2d897f2925e87b2abd089ccc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 13:58:10 2009 +0100

    Ship generated certificats and keys
    
    There is no real point to generate them on each machine and that confuse
    distcheck.

 tests/Makefile.am |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 17af558c331cee49550590e61871d0115d4d3e88
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 13:53:30 2009 +0100

    add test-report.xml and sasl-test.db to CLEANFILES

 tests/Makefile.am |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit b2fd687cc698d7e2a6b6a1b67986d055e32f8d6b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 14:01:10 2009 +0100

    tests/Makefile.am: keys and certs are actually in top_srcdir

 tests/Makefile.am |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 1cbaad1503cac313dcae262fa089e4f48bbff528
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 13:52:51 2009 +0100

    define DISTCHECK_CONFIGURE_FLAGS as distcheck has to build with --enable-gtk-doc

 Makefile.am |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 909e2d097ce5e672cb7a485f5d90d527b3f90eab
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 12:19:54 2009 +0100

    tests/Makefile.am: add WOCKY_CFLAGS to AM_CFLAGS
    
    This allow to build examples when running distcheck.

 tests/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 92d8ae8bcc3ca80dee96b5db7d1795af984959a6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 12:19:17 2009 +0100

    examples/Makefile.am: add WOCKY_CFLAGS to AM_CFLAGS
    
    This allow to build examples when running distcheck.

 examples/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 2a8edcd50f8548e02e5382bb66459df35ca4c41d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 12:19:01 2009 +0100

    configure.ac: define WOCKY_CFLAGS which will be used to build tests and examples

 configure.ac |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit f4464e4b0f3deb0e5b8f26a046d7eb9fefa84076
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 12:10:06 2009 +0100

    include wocky-xmpp-reader.h: include "wocky-xmpp-stanza.h" instead of <wocky/wocky-xmpp-stanza.h>
    
    This is what other header files do and make distcheck happier.

 wocky/wocky-xmpp-reader.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9fb456482fc5869d1fc3233ae4e344780188b069
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 11:58:29 2009 +0100

    add certs/ca-cert.cfg and certs/tls-cert.cfg to EXTRA_DIST

 tests/Makefile.am |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 9736949f6c51260bd5a30d365acce6cbed07ea92
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 10:59:42 2009 +0100

    add wocky-types.h to wocky/Makefile.am

 wocky/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 39fe8324a21e88fb1bff31c079f13264b37f5b05
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 21 10:58:30 2009 +0100

    remove tabs

 wocky/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 73e60fbcecca2db717379d653c15af0c7375a6db
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 12:40:56 2009 +0100

    add wocky.types to gitignore as we generate it now

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 2110a2b2e2ab09d3746c8a5e57f5fac1287c1bf3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 12:39:48 2009 +0100

    add wocky-overrides.txt
    
    This file can be used to manually override scanned declarations.

 0 files changed, 0 insertions(+), 0 deletions(-)

commit 847bd927bda1ab2b00c50f11bf382c9a166c6908
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 12:39:06 2009 +0100

    add generated wocky-sections.txt
    
    This file is supposed to be generated once and then manually edited.

 docs/reference/wocky-sections.txt |  375 +++++++++++++++++++++++++++++++++++++
 1 files changed, 375 insertions(+), 0 deletions(-)

commit 87ee84c6126e73578219b8a8451dfc90da644a0c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 12:37:14 2009 +0100

    tweak wocky-docs.sgml a bit
    
    - Remove releaseinfo section, doc is not uploaded anywhere atm
    - Set main chapter's title to "API Reference"
    - Remove Glossary

 docs/reference/wocky-docs.sgml |   13 ++++---------
 1 files changed, 4 insertions(+), 9 deletions(-)

commit 0b330f21ad19a3ef89c481cd4061515f2c996078
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 12:33:15 2009 +0100

    add generated wocky-docs.sgml
    
    This file is supposed to be generated once and then manually edited.

 docs/reference/wocky-docs.sgml |   49 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 49 insertions(+), 0 deletions(-)

commit 31c7a20ff0c37c3304462d01422c4bedab2e37ba
Merge: bfe67ce 51742b0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 25 13:06:07 2009 +0100

    Merge branch 'tls-handshake-async'
    
    Conflicts:
    	configure.ac

commit bfe67ce54111082c5c60f66dffe2654ad79181cf
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 15:44:32 2009 +0100

    depend on gio 2.21.x as we use gnio

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 868cb53ce2895b4eb674fb6318fb76663920ab52
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 12:19:52 2009 +0100

    remove wocky.types from git as it's now generated when building doc

 docs/reference/wocky.types |   11 -----------
 1 files changed, 0 insertions(+), 11 deletions(-)

commit 8035a9fe05321eaad4f104a349e5ee90bf08a3ae
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 12:19:16 2009 +0100

    docs/reference/Makefile.am: pass magic option to SCAN_OPTIONS to generate the types file

 docs/reference/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit aa757890431d07d93e848d902a50c96bf845df2b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 20 11:40:25 2009 +0100

    add generated doc files to gitignore

 .gitignore |   15 +++++++++++++++
 1 files changed, 15 insertions(+), 0 deletions(-)

commit 51742b08e3b58ad9e563a138f6e545762ad87d57
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 18:35:48 2009 +0100

    wocky-tls: document WOCKY_TLS_DEBUG_LEVEL

 wocky/wocky-tls.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit 4e991acf6e66e7033211989a48457cd2fdd54316
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 15:31:40 2009 +0100

    re-implement error_to_string using gnutls_strerror_name

 wocky/wocky-tls.c |  121 +++--------------------------------------------------
 1 files changed, 6 insertions(+), 115 deletions(-)

commit d81e3e2465b83bba927febed814684dd6d208e9b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 15:08:10 2009 +0100

    style fixes

 wocky/wocky-tls.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit f8a20b929d45cbbcce568d42113416c536c596a5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 15:00:00 2009 +0100

    wocky-tls: DON'T SHOUT IN DEBUG MESSAGES

 wocky/wocky-tls.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit aa74587f0022690b318fdb06def841cd91d534b4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Aug 17 18:44:05 2009 +0100

    gnutls async handshake bug was actually fixed in 2.8.2

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b3cc7012ddc5ba141c01b3db279c558b3b328004
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Aug 17 16:19:02 2009 +0100

    Whitespace fixes.

 wocky/wocky-connector.c |    2 +-
 wocky/wocky-tls.c       |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit dc7dd80b7e088014a8ed7fa6811cdd84ff65b339
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Aug 17 12:14:07 2009 +0100

    Make old ssl connect async as well.

 wocky/wocky-connector.c |   18 ++----------------
 1 files changed, 2 insertions(+), 16 deletions(-)

commit e9e96b4d2761468615283e675d6a12400a314d2b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Aug 6 12:26:13 2009 +0100

    DEBUG to let us see the endpoint of sync as well as async handshakes.

 wocky/wocky-tls.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit e704fcc7497bb2f04e90ba4517eae0281ea9d870
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Aug 6 12:22:25 2009 +0100

    Adapt starttls_handshake_cb so that it can be the endpoint of both
    old-style SSL and new TLS encryption negotiation.

 wocky/wocky-connector.c |   12 ++++++++----
 1 files changed, 8 insertions(+), 4 deletions(-)

commit f1deece9af1930ca1b3ca9fbe554daf114c6ebcd
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 15:10:43 2009 +0100

    wocky-connector: call wocky_tls_session_handshake_async with a high priority

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6ac2973ab54340318d05284b128fca4de8f7519a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 15:10:07 2009 +0100

    wocky-tls debugging via DEBUG

 wocky/wocky-connector.c |    2 +-
 wocky/wocky-debug.c     |    1 +
 wocky/wocky-debug.h     |    1 +
 wocky/wocky-tls.c       |  182 +++++++++++++++++++++++++++++++++++++++++++++--
 4 files changed, 179 insertions(+), 7 deletions(-)

commit 1bb89abf346c3da438005d17a32956fc6dac728d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 5 12:02:31 2009 +0100

    Make the TLS handshake use the async calls (possible deadlock found in tests).

 wocky/wocky-connector.c |   47 ++++++++++++++++++++++++++++++++---------------
 1 files changed, 32 insertions(+), 15 deletions(-)

commit dee4e5d56916f60b4ff047dd2dd7e4a05a19251c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 14:14:56 2009 +0100

    wocky-test-helper: increase timeout to 3 seconds
    
    2 seconds isn't enough when valgriding some complex tests.

 tests/wocky-test-helper.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit cb691cbbdd05f738768ac04ded40d2ed8cf76a94
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 19 18:45:53 2009 +0100

    rebuild gtk-doc when source files are changed

 docs/reference/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 122bf6f738a52d57b275acf00ce51f9c052e1c1a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 16:02:32 2009 +0100

    wocky-contact-test: fix a typo

 tests/wocky-contact-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ca2ed687b63d8e7b702d36cbba91b8b632b2f171
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 16:00:28 2009 +0100

    wocky-roster-test: unref contacts returned by wocky_roster_get_all_contacts

 tests/wocky-roster-test.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 5682af540b6bcb86064a8b45285e28a0f25cb7cc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 17 15:59:31 2009 +0100

    wocky_roster_get_all_contacts ref the contacts
    
    Contacts could be unreffed by an async op while user still use the
    GSList.

 wocky/wocky-roster.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9d4406fb86a8bc97478a6e41644fa193dc30f976
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 17:18:52 2009 +0100

    wocky_contact_set_subscription: fix type check ordering

 wocky/wocky-contact.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit bc39d1e285d025511a3a0aff7bdffdff4253ade5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 17:13:05 2009 +0100

    wocky-contact-test: test_contact_equal: add regression test for buggy old group comparaison algorithm

 tests/wocky-contact-test.c |   19 ++++++++++++++++++-
 1 files changed, 18 insertions(+), 1 deletions(-)

commit 70a08d897b2ca2e825e9995c6bd0620fd8198d5b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 17:12:40 2009 +0100

    wocky-contact: fix groups_equal

 wocky/wocky-contact.c |   57 ++++++++++++++++++++++++++++++-------------------
 1 files changed, 35 insertions(+), 22 deletions(-)

commit c44ec1644338ebe3102867f02dc3d51c86c90e78
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 16:13:05 2009 +0100

    wocky_contact_set_name: fix type check ordering
    
    There is no point to check that the contact is actually a WockyContact
    object *after* calling WOCKY_CONTACT_GET_PRIVATE.

 wocky/wocky-contact.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 29dd25c6120e05e02207df6c1b422c7652746b3a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 12:31:48 2009 +0100

    wocky-contect-test: test_contact_equal: test with a contact having not group defined

 tests/wocky-contact-test.c |   12 +++++++++++-
 1 files changed, 11 insertions(+), 1 deletions(-)

commit 77c3cd8fbaddffec2dfb403d74f908971efa0cc2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 14 12:29:53 2009 +0100

    wocky-contact: groups_equal: deal with groups being NULL

 wocky/wocky-contact.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 15dbdce5f095efadc584a5bbf9c56e7a0984e941
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 12:43:28 2009 +0100

    rename WOCKY_ROSTER_INVALID_STANZA to WOCKY_ROSTER_ERROR_INVALID_STANZA

 wocky/wocky-roster.c |    2 +-
 wocky/wocky-roster.h |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit aca82a6c5db3ef600eceeaec8ac84027e006778e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 11:44:29 2009 +0100

    wocky-roster-test: factor out send_roster_update

 tests/wocky-roster-test.c |  149 +++++++++++++++++----------------------------
 1 files changed, 56 insertions(+), 93 deletions(-)

commit ae09b98ec9ff7a7f0617d4b22a07bffc74e6bd13
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 16:48:26 2009 +0100

    wocky-roster-test: add test_roster_upgrade_change

 tests/wocky-roster-test.c |  125 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 125 insertions(+), 0 deletions(-)

commit 387f02a68ad659e8272834d9015dc0d347e9f055
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 16:47:39 2009 +0100

    wocky-contact: fire notify change when a property is changed

 wocky/wocky-contact.c |   22 +++++++++++++---------
 1 files changed, 13 insertions(+), 9 deletions(-)

commit c8446d78ac6ede0f0cea4e268f2e1ee77b03c916
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 16:41:00 2009 +0100

    wocky-contact: factor out groups_equal

 wocky/wocky-contact.c |   67 ++++++++++++++++++++++++++++++-------------------
 1 files changed, 41 insertions(+), 26 deletions(-)

commit d30780ae4836830a730d88107c33eb040b42eeee
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 16:05:01 2009 +0100

    Simplify wocky_contact_set_* setters
    
    They are supposed to be simple wocky-only setters, so they shouldn't
    fail.

 wocky/wocky-contact.c |   43 ++++++++++++-------------------------------
 wocky/wocky-contact.h |   10 ++++------
 wocky/wocky-roster.c  |    7 +++----
 3 files changed, 19 insertions(+), 41 deletions(-)

commit 54fd7625c3e7d1effdb493b110ebb8b63ff03e47
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 15:25:58 2009 +0100

    wocky-roster-test: add test_roster_upgrade_remove

 tests/wocky-roster-test.c |   64 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 64 insertions(+), 0 deletions(-)

commit 91ced7648bbc8273463a05798e1c872a97651b32
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 15:23:53 2009 +0100

    roster: fire the 'removed' signal when a contact is removed from the roster

 wocky/wocky-roster.c |   42 +++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 41 insertions(+), 1 deletions(-)

commit df074b890151ca1c9200df8a04f5c954cb4de55a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 15:03:41 2009 +0100

    roster_update: don't fire the added signal when fetching the roster

 wocky/wocky-roster.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit e0d0284048126aae2f3e696247ebb1b86a8e5cb6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 14:34:23 2009 +0100

    wocky-roster-test: add test_roster_upgrade_add

 tests/wocky-roster-test.c |  119 +++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 114 insertions(+), 5 deletions(-)

commit 66dfe096026869dad4247443cc59b8dd9cae3b1b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 14:33:47 2009 +0100

    roster.c: fire 'added' signal when a contact is added

 wocky/wocky-roster.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit c9adc573007df14e2a9da72882c3e0dd9ba1ccfc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 14:33:20 2009 +0100

    roster_iq_handler_set_cb: ack the IQ

 wocky/wocky-roster.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 9ffe3b8cbe7923cc3d40273170632f6b8108fb3d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 13:19:39 2009 +0100

    test wocky_roster_get_all_contacts

 tests/wocky-roster-test.c |   17 +++++++++++++++++
 1 files changed, 17 insertions(+), 0 deletions(-)

commit 102310d622e5d34f3a3c95a524b2507e1414de32
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 13:19:31 2009 +0100

    add wocky_roster_get_all_contacts

 wocky/wocky-roster.c |   17 +++++++++++++++++
 wocky/wocky-roster.h |    2 ++
 2 files changed, 19 insertions(+), 0 deletions(-)

commit 7879703b3efd70e31689fcb41e370ffe8f350ac4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 11:57:11 2009 +0100

    fetch_roster_reply_cb: test to send more than one contact

 tests/wocky-roster-test.c |   33 ++++++++++++++++++++++++++++++++-
 1 files changed, 32 insertions(+), 1 deletions(-)

commit 26511487953c847f37adfe7ce245395b0b44e98f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 11:54:33 2009 +0100

    fetch_roster_reply_roster_cb: use wocky_contact_equal to check contact

 tests/wocky-roster-test.c |   28 ++++++++++++++++++----------
 1 files changed, 18 insertions(+), 10 deletions(-)

commit 18b4ae6dcda5ebab64de8bde4df58e9375678e57
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 11:48:52 2009 +0100

    add wocky-contact-test.c to test wocky_contact_equal

 .gitignore                 |    1 +
 tests/Makefile.am          |    9 ++++-
 tests/wocky-contact-test.c |   95 ++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 104 insertions(+), 1 deletions(-)

commit fed52b8d0021c293617a592d3a59966c75edf459
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 11:48:21 2009 +0100

    add wocky_contact_equal

 wocky/wocky-contact.c |   59 +++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-contact.h |    3 ++
 2 files changed, 62 insertions(+), 0 deletions(-)

commit 5da9be52405a5ff215c1f660b57dfc3824fcc601
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 10:51:51 2009 +0100

    wocky-roster-test: test if the contact fetched is the right one

 tests/wocky-roster-test.c |   22 +++++++++++++++++-----
 1 files changed, 17 insertions(+), 5 deletions(-)

commit 82330ddba30e267eccf614fc0cb94115c764120a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 10:51:04 2009 +0100

    roster_update: fix parsing of groups

 wocky/wocky-roster.c |   32 +++++++++++++-------------------
 1 files changed, 13 insertions(+), 19 deletions(-)

commit 0bf8a01eec2b93d4177e68be0b203287e2f12a09
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 10:24:37 2009 +0100

    add wocky_roster_get_contact

 wocky/wocky-roster.c |    9 +++++++++
 wocky/wocky-roster.h |    4 ++++
 2 files changed, 13 insertions(+), 0 deletions(-)

commit a953e9743647991653eab2d80340ffabdf9b630e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 11 10:24:19 2009 +0100

    move WockyContact definition to a newly created wocky-types.h to avoid circular includes

 wocky/wocky-contact.h |    2 +-
 wocky/wocky-types.h   |   31 +++++++++++++++++++++++++++++++
 2 files changed, 32 insertions(+), 1 deletions(-)

commit d68f0b29c5333fa89b54f5b9b31515bd85eaa221
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 17:25:39 2009 +0100

    roster_fetch_roster_cb: unref the IQ reply once we're done with it

 wocky/wocky-roster.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit b1b095eea2c31c6bffb10c696bb477d40c126070
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 17:14:57 2009 +0100

    test_fetch_roster_send_iq: call wocky_roster_fetch_roster_finish to free to memory used by the fetch call

 tests/wocky-roster-test.c |   43 +++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 41 insertions(+), 2 deletions(-)

commit 8104c0654a11e26dccd96149eb7088c41aabf173
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 17:14:36 2009 +0100

    wocky-roster-test: unref the roster when tests are done

 tests/wocky-roster-test.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 30748490b45b002ca2746dd4ffceb2df998def61
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 17:13:43 2009 +0100

    wocky_contact_set_property: copy the groups array

 wocky/wocky-contact.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f7a69bb212a572e68e005726ba2b65049089bec4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 16:43:59 2009 +0100

    wocky-roster-test.c: use test_init and test_deinit

 tests/wocky-roster-test.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

commit 9eaaaf74a922cbb008e79242b3c6096d645946d2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 16:42:54 2009 +0100

    roster_update: use a temporary GPtrArray to store groups for easier memory management

 wocky/wocky-roster.c |   22 +++++++++++++---------
 1 files changed, 13 insertions(+), 9 deletions(-)

commit ef080800a739d969e324ef0bba1a48d472104319
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 16:40:36 2009 +0100

    wocky_roster_fetch_roster_async: don't leak the IQ

 wocky/wocky-roster.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit dd11d5db67a56c23284ce0f137f3849adad86e7f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 16:24:36 2009 +0100

    wocky-roster-test.c: add a small comment describing each test

 tests/wocky-roster-test.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 6c1088ffce48ce101fadaae6801057054dc03f08
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 16:20:25 2009 +0100

    wocky-roster: add some TODO/FIXME

 wocky/wocky-roster.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit e0ae09791c0c9aef1a702f744b3568cc0627b4e0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 16:18:31 2009 +0100

    wocky_roster_fetch_roster_async: store the result as an object variable and raise an error if another operation is pending

 wocky/wocky-roster.c |   26 ++++++++++++++++++--------
 1 files changed, 18 insertions(+), 8 deletions(-)

commit 210319918ffb27538b3aa91729963b3ef23882d4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 16:01:06 2009 +0100

    change WockyRosterSubscriptionType to WockyRosterSubscriptionFlags

 wocky/wocky-contact.c |   10 +++++-----
 wocky/wocky-contact.h |    4 ++--
 wocky/wocky-roster.c  |    2 +-
 wocky/wocky-roster.h  |   13 +++++++------
 4 files changed, 15 insertions(+), 14 deletions(-)

commit e13f16ee2d9fcd14ef6616289a2a742fd7e5beb1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 15:42:30 2009 +0100

    use g_set_error_literal instead of g_error_new_literal

 wocky/wocky-roster.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 9973bd9feed4cbb95803203dd8c268715effa59b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 15:21:56 2009 +0100

    wocky_roster_dispose: unregister the handler when disposing

 wocky/wocky-roster.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 9ff0b89bd2122f59bd5131c890e2fecbee020a40
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 15:20:10 2009 +0100

    wocky-roster: document the items hash table

 wocky/wocky-roster.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit a1732efd732b1fc31613ce5beab35680e818af6a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Aug 10 15:16:09 2009 +0100

    No need to pass the WockyXmppConnection to the Roster object; the Porter is enough

 tests/wocky-roster-test.c |    6 +++---
 wocky/wocky-roster.c      |   25 ++-----------------------
 wocky/wocky-roster.h      |    3 +--
 3 files changed, 6 insertions(+), 28 deletions(-)

commit c05e29dbdc0ec697ecf650bdbc9f1ff1d8bddeaf
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Tue Jul 14 16:32:57 2009 +0100

    Add fetch-roster-reply test.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 tests/wocky-roster-test.c |   91 +++++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 87 insertions(+), 4 deletions(-)

commit ee5dd26f5d0b700cad280dd3037f576c032c32e5
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Jul 11 19:28:56 2009 +0100

    Set new information on an existing roster item on update.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   75 ++++++++++++++++++++++++++++---------------------
 1 files changed, 43 insertions(+), 32 deletions(-)

commit b801a14a8197b52dd7e1b6f18ffe669154665dc5
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Jul 11 19:27:13 2009 +0100

    Implement several functions of WockyContact and document them.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-contact.c |  186 ++++++++++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-contact.h |    8 ++-
 2 files changed, 188 insertions(+), 6 deletions(-)

commit 4f80c17ed6819b922339f4ebe6d511087891354b
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Jul 11 18:49:52 2009 +0100

    Implement partial roster stanza parsing and creating WockyContacts.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |  131 ++++++++++++++++++++++++++++++++++++++++++++++---
 1 files changed, 123 insertions(+), 8 deletions(-)

commit 2bcac6bd59e90647752569b6819e8e2e3e4a4ca5
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Jul 11 18:47:42 2009 +0100

    Free data held by WockyContact on finalize.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-contact.c |   11 +++++++++--
 1 files changed, 9 insertions(+), 2 deletions(-)

commit 556dd7f5fa2c4a41b7d0ac358f4cf4e82faaa55e
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Jul 11 15:37:26 2009 +0100

    Updated WockyContact to include some properties.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-contact.c |  109 ++++++++++++++++++++++++++++++++++++-------------
 wocky/wocky-contact.h |   15 +++++--
 2 files changed, 91 insertions(+), 33 deletions(-)

commit 89e5c9af51f98e98a9eea7c06a5cf4e71aef15d7
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Jul 11 14:12:59 2009 +0100

    Added WockyRosterSubscriptionType enum.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.h |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 6cf6fb79510acd9428e3262922e1163d0bd36b06
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Jul 4 17:31:18 2009 +0100

    Add roster error quark function.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   18 ++++++++++++++++++
 wocky/wocky-roster.h |   19 +++++++++++++++++++
 2 files changed, 37 insertions(+), 0 deletions(-)

commit d8d833bca6744719834b074193e41d70ecb5b039
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Fri Jul 3 14:53:12 2009 +0100

    Make the reply from roster fetch or set IQ call the same code.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   30 +++++++++++++++---------------
 1 files changed, 15 insertions(+), 15 deletions(-)

commit 7282e0a939947a23ba82c2e3e232c6aad1268c10
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Fri Jul 3 14:37:50 2009 +0100

    Make wocky_roster_fetch_roster an async function.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 tests/wocky-roster-test.c |    2 +-
 wocky/wocky-roster.c      |   39 +++++++++++++++++++++++++++++++++------
 wocky/wocky-roster.h      |    7 ++++++-
 3 files changed, 40 insertions(+), 8 deletions(-)

commit 511b139ef99e7f342007d6a42c9c0f0b0e25241c
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Fri Jul 3 12:47:13 2009 +0100

    Only listen to set IQs in the roster.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   36 ++++++------------------------------
 1 files changed, 6 insertions(+), 30 deletions(-)

commit 59fb09db7ff67aa9d18b11ea5a5a59b14534118a
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 20:54:55 2009 +0100

    Implement more of roster IQ stanza handler.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   62 ++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 62 insertions(+), 0 deletions(-)

commit 36fa7099d59eafe8ac755907c20d3ac171437e9f
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 19:32:38 2009 +0100

    Add test for fetch-roster.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 tests/wocky-roster-test.c |   56 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 56 insertions(+), 0 deletions(-)

commit 292875acf870942e33373ee96bfc35485edffe77
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 18:53:18 2009 +0100

    test_initialisation: unref the porter after use.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 tests/wocky-roster-test.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit b5cf9e934faa7af8825eb317da18939a44a092b2
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 18:51:27 2009 +0100

    Keep references to the connection and porter in the roster.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit cc123321ef6259f03ee6da25c9c5d7118cb4b009
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 18:38:07 2009 +0100

    from attribute is not needed when fetching roster.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 3017de1df49b227248416778ab384cebc5d2331f
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 18:27:30 2009 +0100

    Add back wocky_roster_fetch_roster function.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   71 +++++++++++++++++++++++++++++---------------------
 wocky/wocky-roster.h |    2 +
 2 files changed, 43 insertions(+), 30 deletions(-)

commit 8857fd536b518a65adb419af8304d02bffe379e3
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 18:22:30 2009 +0100

    Use the porter to send the iq instead of the connection.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit f7850d4ade0cc7dc413e423490f3565ef2ec0601
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 17:23:09 2009 +0100

    Add properties to roster GObject.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   15 +++++++++++++++
 1 files changed, 15 insertions(+), 0 deletions(-)

commit 140813d13cdd2cba63286efc5268926236803040
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 17:22:17 2009 +0100

    Add wocky-roster-test.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 .gitignore                |    2 +-
 tests/Makefile.am         |    8 ++++++-
 tests/wocky-roster-test.c |   46 +++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 54 insertions(+), 2 deletions(-)

commit 37c0160e97b8e0f76f756cc45166d3aeb3841b2e
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 16:35:42 2009 +0100

    Move recv_items into constructed.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-roster.c |   67 +++++++++++++++++++++-----------------------------
 wocky/wocky-roster.h |    2 -
 2 files changed, 28 insertions(+), 41 deletions(-)

commit b0de5c42576571b75fc6c406e0cb9b54e833c7f4
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 16:29:33 2009 +0100

    Initial WockyRoster implementation.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/Makefile.am    |    4 +-
 wocky/wocky-roster.c |  248 ++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-roster.h |   69 ++++++++++++++
 3 files changed, 320 insertions(+), 1 deletions(-)

commit c5c649f6c06178cd33c5404b0bed9603f6404a85
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 14:49:58 2009 +0100

    wocky-namespaces: Add jabber:iq:roster.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 966a248237c6c3e419201f0548746e2592ae26b0
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Wed Jul 1 17:55:50 2009 +0100

    Add barebones of WockyContact class.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/Makefile.am     |    4 +-
 wocky/wocky-contact.c |  184 +++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-contact.h |   72 +++++++++++++++++++
 wocky/wocky-debug.c   |    1 +
 wocky/wocky-debug.h   |    1 +
 5 files changed, 261 insertions(+), 1 deletions(-)

commit 3173cb6db6e21367e46fe0ee5af088360adadf54
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Aug 13 10:22:49 2009 +0100

    stream_error_abort: ignore non stream errors
    
    wocky_xmpp_stanza_to_gerror is not limited to stream errors anymore.
    Ignore the others error as this function is supposed to detect stream
    errors only.
    Code could be improved to gain use of the new functionnality of
    wocky_xmpp_stanza_to_gerror, I added a FIXME about that.

 wocky/wocky-connector.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit ecb54ef69ced7750dc3b1eb0936adc909146b34a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 17:10:23 2009 +0100

    stream_error_to_gerror: use wocky_xmpp_stream_error_from_node

 wocky/wocky-xmpp-stanza.c |   51 +-------------------------------------------
 1 files changed, 2 insertions(+), 49 deletions(-)

commit 9db920ee913f7871011eaf5928b6065bea9bd252
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 17:09:59 2009 +0100

    wocky-xmpp-error: add wocky_xmpp_stream_error_from_node

 wocky/wocky-xmpp-error.c |   54 ++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-error.h |    2 +
 2 files changed, 56 insertions(+), 0 deletions(-)

commit 6ef54efa1f0ca88b214269a80cbdab6ec71def49
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 16:54:52 2009 +0100

    move stream errors definition to wocky-xmpp-stanza.h

 tests/wocky-connector-test.c |    1 +
 tests/wocky-porter-test.c    |    1 +
 wocky/wocky-connector.c      |    1 +
 wocky/wocky-xmpp-error.c     |   18 ++++++++++++++++++
 wocky/wocky-xmpp-error.h     |   37 +++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-stanza.c    |   18 ------------------
 wocky/wocky-xmpp-stanza.h    |   37 -------------------------------------
 7 files changed, 58 insertions(+), 55 deletions(-)

commit 889a445498ee8c96e545008d12d997f2227b2155
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 16:51:12 2009 +0100

    wocky-xmpp-error: fix style

 wocky/wocky-xmpp-error.c |    4 ++--
 wocky/wocky-xmpp-error.h |    3 ++-
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 2fa6f6f43ecd53b75bebda9f617e008015d7ec95
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 16:47:18 2009 +0100

    rename XMPP_ERROR_* to WOCKY_XMPP_ERROR_*

 tests/wocky-xmpp-stanza-test.c |    2 +-
 wocky/wocky-xmpp-error.c       |   31 +++++++++++----------
 wocky/wocky-xmpp-error.h       |   58 ++++++++++++++++++++--------------------
 wocky/wocky-xmpp-stanza.c      |    4 +-
 4 files changed, 48 insertions(+), 47 deletions(-)

commit 28ee115f4d09d0f1d357dd45f039e21adb8086f2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 16:40:38 2009 +0100

    wocky-xmpp-stanza-test: add test_xmpp_error_to_gerror
    
    Based on test_message_get_xmpp_error from Gibber tests suite.

 tests/wocky-xmpp-stanza-test.c |   29 +++++++++++++++++++++++++++++
 1 files changed, 29 insertions(+), 0 deletions(-)

commit b1d4161c28db9b4b7ea7d6a235299472616c6031
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 16:37:13 2009 +0100

    merge functionnality of wocky_message_get_xmpp_error to wocky_xmpp_stanza_to_gerror

 wocky/wocky-xmpp-error.c  |   40 ----------------------------------------
 wocky/wocky-xmpp-error.h  |    1 -
 wocky/wocky-xmpp-stanza.c |   24 +++++++++++++++++++++++-
 3 files changed, 23 insertions(+), 42 deletions(-)

commit b7a549aba4706f85c12ff1f0268ac56db3774a15
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 16:22:37 2009 +0100

    import wocky-xmpp-error.[ch] from Gibber

 wocky/Makefile.am        |    2 +
 wocky/wocky-xmpp-error.c |  481 ++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-error.h |   86 ++++++++
 3 files changed, 569 insertions(+), 0 deletions(-)

commit 1dacc6a83cc9930d0fe8b13e2d6816cd73c8f48b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 15:15:52 2009 +0100

    wocky-xmpp-stanza-test: improve test descriptions and rename test_to_gerror to test_stream_error_to_gerror

 tests/wocky-xmpp-stanza-test.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

commit 652da3fa35d72a9e8bfd5a5e4041b1cea59efa60
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 12 15:11:19 2009 +0100

    wocky_xmpp_stanza_to_gerror: factor out stream_error_to_gerror

 wocky/wocky-xmpp-stanza.c |   22 +++++++++++++++-------
 1 files changed, 15 insertions(+), 7 deletions(-)

commit 2e43ec8790a7d542c0d9493583e04fb6c8ac6412
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Aug 13 13:25:15 2009 +0100

    Convert attr ns prefix system to hash tables: add init/deinit functions.
    Also added a comment explaining the auto-generation of prefixes.

 wocky/wocky-xmpp-node.c |  136 ++++++++++++++++++++++++++++++++++-------------
 wocky/wocky-xmpp-node.h |    3 +
 wocky/wocky.c           |    3 +
 3 files changed, 105 insertions(+), 37 deletions(-)

commit 6d7d0f0863154c2545f43369ebe4c2f7f0e8a906
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 18:07:19 2009 +0100

    g_slice_new0 instead of g_new0 in ns_prefix_new.

 wocky/wocky-xmpp-node.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4b67c1a0300f9ca71e15c26689b2e377f7d26be6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 18:06:44 2009 +0100

    Missing function return type.

 tests/wocky-xmpp-node-test.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit bed46ad061870307443b2b9bcc452a7fcefcc79d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 17:05:01 2009 +0100

    Adapt tests to new API.

 tests/wocky-xmpp-node-test.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 808f44a807c1b1fe05d98a4adc5ac3453f1d10ff
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 17:04:51 2009 +0100

    Split get_prefix functions into from_quark and from_urn versions.
    Move common functionality into static helper functions to tidy up code.
    Add comments describing what each stage does.

 wocky/wocky-xmpp-node.c |   87 ++++++++++++++++++++++++++++++++--------------
 wocky/wocky-xmpp-node.h |    6 ++--
 2 files changed, 63 insertions(+), 30 deletions(-)

commit e456e3cfef20403446bfce9838d3ace2e74b246a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 15:22:46 2009 +0100

    Whitespace cleanup.

 wocky/wocky-connector.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 3f863c7918ffc18e868329b6250a29504b6a87d0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 13:05:59 2009 +0100

    Stray debugging #include removed.

 wocky/wocky-xmpp-node.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit bc93f3f07cc33165c7709a7a212e8bf835ffbbcb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 13:05:40 2009 +0100

    Improve test coverage of new namespaced attribute support.

 tests/wocky-xmpp-node-test.c |   53 ++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 51 insertions(+), 2 deletions(-)

commit 3306f6f71dd534c8622e27e79eb33cff385dac49
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 11 19:31:11 2009 +0100

    Adjust the API so that attribute namespace prefixes are automatically assigned.
    Users can override attribute namespace prefixes if they so desire, and there
    is a built-in list of pre-assigned prefixes.

 tests/wocky-xmpp-node-test.c      |   18 ++++--
 tests/wocky-xmpp-readwrite-test.c |    2 +-
 wocky/wocky-sasl-auth.c           |    2 +-
 wocky/wocky-xmpp-node.c           |  101 ++++++++++++++++++++++++++++++++++---
 wocky/wocky-xmpp-node.h           |   10 +++-
 wocky/wocky-xmpp-reader.c         |   10 +++-
 6 files changed, 124 insertions(+), 19 deletions(-)

commit a1cbb8be19ccd619cff7cd176b1c48f883f539aa
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 30 14:30:56 2009 +0100

    Test namespaced attributes (creating, changing and readwrite tests)

 tests/wocky-xmpp-node-test.c      |  102 +++++++++++++++++++++++++++++++++++++
 tests/wocky-xmpp-readwrite-test.c |   28 ++++++++++
 2 files changed, 130 insertions(+), 0 deletions(-)

commit 313ce82cdc630ce71a6ddc83c2e6935abf7150fb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 30 12:35:04 2009 +0100

    Make Google JID Domain Discovery always-on.

 tests/wocky-connector-test.c |   17 -----------------
 wocky/wocky-connector.c      |   17 -----------------
 wocky/wocky-sasl-auth.c      |   21 +++------------------
 3 files changed, 3 insertions(+), 52 deletions(-)

commit 0d24e00092482693993dad0e7923ff34eee928e7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 30 11:52:05 2009 +0100

    Stray // comment removed.

 wocky/wocky-xmpp-node.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit b2fdf23244935e8ff426f67d7a64778e06b7f85a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 19:37:59 2009 +0100

    Test new google JID domain discovery quirk support.

 tests/wocky-connector-test.c        |   42 +++++++++++++++++++++++++++++++++++
 tests/wocky-test-connector-server.h |    1 -
 tests/wocky-test-sasl-auth-server.c |   24 ++++++++++++++++++++
 tests/wocky-test-sasl-auth-server.h |    2 +
 4 files changed, 68 insertions(+), 1 deletions(-)

commit 74e93063095a99bd2b7946be0cb167ff4a1b928a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 19:37:05 2009 +0100

    Expose google-domain-discovery sasl feature through a wocky-connector property.

 wocky/wocky-connector.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit fed88a33ef1550e667164b78f9cf473075995504
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 17:27:52 2009 +0100

    Google JID domain-discovery extension, controlled by a property.

 wocky/wocky-namespaces.h |    3 +++
 wocky/wocky-sasl-auth.c  |   22 +++++++++++++++++++++-
 2 files changed, 24 insertions(+), 1 deletions(-)

commit d78e7101e154613c5904fdf1b20ed32fa57068f7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 17:04:37 2009 +0100

    Fix (I think) namespaced attribute handling in wocky-xmpp-*
    There was no way to specify the PREFIX in a
      xmlns:PREFIX="URI" PREFIX:tag="value"
    node attribute: the existing code just duplicated the tag.

 wocky/wocky-xmpp-node.c   |   30 +++++++++++++++++++++---------
 wocky/wocky-xmpp-node.h   |    6 +++---
 wocky/wocky-xmpp-reader.c |    8 +++++---
 wocky/wocky-xmpp-writer.c |    5 +++--
 4 files changed, 32 insertions(+), 17 deletions(-)

commit 3204163c0d770aedfcb222588aea868b45b43c97
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 17:39:53 2009 +0100

    Async result should have ...connect_finish as the finish func for XEP77_SIGNUP.

 wocky/wocky-connector.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 4aa07be0eb70d58ee265f4e0f197b98a07bbb448
Merge: ba584a1 f5e4e4f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 15:05:11 2009 +0100

    Merge branch 'master' of git+ssh://git.collabora.co.uk/git/wocky

commit ba584a1241063fb0e3a57de4b83a60611ad041eb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 14:51:24 2009 +0100

    Comment explaining WockyConnectorXEP77Op enum and usage in priv struct.

 wocky/wocky-connector.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 0cf7b439ce469df9218affc78e23ce6dc86aa3a9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 14:46:59 2009 +0100

    Record the correct finish function in the async result when registering.

 wocky/wocky-connector.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit b27393f1892ae27e3c033aff6fc3ab31010d5f35
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 14:35:22 2009 +0100

    Amended XEP77/cancel comment. Will email standards list for clarification.
    Code as written worka when cancelling an account on a real (ejabberd) server.

 wocky/wocky-connector.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit a2f855841e72f3d9ef389696e47ead6eff7cd97d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 12 14:31:13 2009 +0100

    Add DEBUG statements to track path through connector code.

 wocky/wocky-connector.c |   18 ++++++++++++++++++
 1 files changed, 18 insertions(+), 0 deletions(-)

commit 439157469da2b6bfe44fbaad722750f7e0e02002
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 11 14:46:42 2009 +0100

    Ignore individual example programmes explicitly (ie not with globbing)

 .gitignore |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 37bef919cf4e11bfc750ba1af6c6294a715b0182
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 11 14:45:07 2009 +0100

    Whitespace cleanup.

 wocky/wocky-namespaces.h |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit b56f2fad002cb673425694a45ccf3303f7c43bd8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 11 14:40:03 2009 +0100

    Add prop set/get test for new property.

 tests/wocky-connector-test.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 7a174fe38e0f0b52c7d60defa8da556304f4b43d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 11 14:39:44 2009 +0100

    Eliminate mem leak in dummy resolver when the server has to abort for a test.

 tests/test-resolver.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 6ff06cff74afee70d9a5defc0e41ae4d6f86d371
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Aug 10 20:38:48 2009 +0100

    XEP 0077 Registration/Cancellation tests.

 tests/wocky-connector-test.c        |  357 ++++++++++++++++++++++++++++++++--
 tests/wocky-test-connector-server.c |  265 +++++++++++++++++++++++++-
 tests/wocky-test-connector-server.h |   19 ++
 3 files changed, 610 insertions(+), 31 deletions(-)

commit c7645384313de5b6778a031c0d393d0bf2cc5ba6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Aug 10 20:38:10 2009 +0100

    Add some DEBUG (); renamed namespace constant according to existing pattern.

 wocky/wocky-connector.c  |   18 +++++++++++++-----
 wocky/wocky-namespaces.h |    2 +-
 2 files changed, 14 insertions(+), 6 deletions(-)

commit 76f18c05ef5eb7532c10eb9414e0dfdf0e830588
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Aug 10 20:36:44 2009 +0100

    Ignore the test-generated sasl DB file.

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 93046cc5bf62143763130623bb4f1f0cdbcecce0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Aug 6 12:27:45 2009 +0100

    Typo fixed, leaks in xep77_signup_send fixed (from cassidy).

 wocky/wocky-connector.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit b1b2bebf688d407cd942c06a6c739d389d51ef35
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 5 16:56:04 2009 +0100

    Make email a settable parameter in the connector instead of a mandatory param.

 examples/register.c     |    5 +++--
 wocky/wocky-connector.c |   37 ++++++++++++++++++++++++++++++++-----
 wocky/wocky-connector.h |    7 ++++++-
 3 files changed, 41 insertions(+), 8 deletions(-)

commit b3a50f94445aaf504d45d04294aed7fbf2cbbbed
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Aug 5 12:12:19 2009 +0100

    Don't care about contents, presence or absence of "instructions" tag for now.
    XEP0077 implies that the "instructions" tag must always be present in the reply
    to the jabber:iq:register iq get request, but unless we are supporting
    redirection-based registration (which we are not, at present) we don't care
    about its presence: We only care about tags that are _not_ "instructions".

 wocky/wocky-connector.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

commit 4b473dfbeb39f96702db35148e3e473ba191a09b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 4 19:07:27 2009 +0100

    Ignore the example binaries for vcs purposes.

 .gitignore |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c51cc014131ccf6018debbf4fe42c23b466f1d2b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 4 19:05:51 2009 +0100

    Example registration and unregistration binaries.

 examples/Makefile.am  |   15 ++++++++-
 examples/register.c   |   80 +++++++++++++++++++++++++++++++++++++++++++++++++
 examples/unregister.c |   76 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 170 insertions(+), 1 deletions(-)

commit 6ab62ee512532ff31bc387bed87a1a6c5744be3d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 4 19:05:26 2009 +0100

    Implement XEP0077 In-Band Registration/Cancellation

 wocky/wocky-connector.c  |  583 +++++++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-connector.h  |   22 ++
 wocky/wocky-namespaces.h |    5 +
 3 files changed, 598 insertions(+), 12 deletions(-)

commit f5e4e4f4ace88a66e56fae13dd2993c15fd77275
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 12:06:06 2009 +0100

    test wocky_xmpp_node_append_content_n

 tests/wocky-xmpp-node-test.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit d8d3beaa745297ea45e24708138c4235bca89ba2
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Tue Jul 14 14:15:37 2009 +0100

    The "from" attribute is also not required for a reply IQ to be built.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-xmpp-stanza.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 0c320e2d6fa1106276fdbc4394156ef686d889b0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 5 17:27:05 2009 +0100

    add test_close_force_after_close_sent

 tests/wocky-porter-test.c |   56 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 56 insertions(+), 0 deletions(-)

commit 9f39944bc339634d36c6695c730113bdeed43d35
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 5 17:23:53 2009 +0100

    wocky_porter_force_close_async: check if the receive_cancellable is NULL before raising the CLOSED error
    
    local_closed could have been set to TRUE because our close stanza has
    been set but we were still waiting for the close from the peer. In such
    case, we shouldn't raise an error and allow user to call force_close.

 wocky/wocky-porter.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2a35a4062da27417b4bf22d640d6621eee4d6b90
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 29 12:27:30 2009 +0100

    test_close_force: test that the closing signal is not fired more than once

 tests/wocky-porter-test.c |   17 ++++++++++++++++-
 1 files changed, 16 insertions(+), 1 deletions(-)

commit 87cfff5986e1329eca880a637e1c19f8e55a5fe3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 29 12:27:13 2009 +0100

    wocky_porter_force_close_async: don't fire the closing signal twice

 wocky/wocky-porter.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit e43eb2ab2fbadfeca5adeb3c172b0412e7344f30
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 29 12:22:15 2009 +0100

    porter: use WOCKY_PORTER_ERROR_CLOSING when completing a close operation because of a forced close

 tests/wocky-porter-test.c |    2 +-
 wocky/wocky-porter.c      |    2 +-
 wocky/wocky-porter.h      |    1 +
 3 files changed, 3 insertions(+), 2 deletions(-)

commit dc1d27b9c2e7394f3b74d31941ae54acf4be09f6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 29 12:18:44 2009 +0100

    wocky_porter_force_close_async: set the right error domain when raising G_IO_ERROR_PENDING

 wocky/wocky-porter.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b2a8ae6c49a37eb317d0639b5608d030e125db5b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 4 15:14:21 2009 +0100

    Default xmpp-port property value should be 0, not 5222.
    
    This allows us to distinguish between explicit user parameters (which imply SRV records should be ignored) and unspecified values (which mean "do the right thing").

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 45699bd0090984bf0dfd5de617c873c2de4cb197
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Aug 4 15:14:21 2009 +0100

    Default xmpp-port property value should be 0, not 5222.
    This allows us to distinguish between explicit user parameters (which imply SRV records should be ignored) and unspecified values (which mean "so the right thing").

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3a705cc906e154a3e77fabd55c16f42ae11191a6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 4 14:02:19 2009 +0100

    use test_init and test_deinit in tests so memory is properly freed and valgrind is happy

 tests/Makefile.am                  |   11 +++++++++++
 tests/wocky-connector-test.c       |   10 ++++++----
 tests/wocky-porter-test.c          |   10 ++++++----
 tests/wocky-test-sasl-auth.c       |   11 ++++++-----
 tests/wocky-xmpp-connection-test.c |   10 ++++++----
 tests/wocky-xmpp-node-test.c       |   11 +++++++----
 tests/wocky-xmpp-reader-test.c     |   12 ++++++++----
 tests/wocky-xmpp-readwrite-test.c  |   11 +++++++----
 tests/wocky-xmpp-stanza-test.c     |   13 ++++++++-----
 9 files changed, 65 insertions(+), 34 deletions(-)

commit fd61e2ac48113b5eb5b9f60f1ef83564be7788a2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 4 14:01:28 2009 +0100

    add test_init and test_deinit helpers

 tests/wocky-test-helper.c |   17 +++++++++++++++++
 tests/wocky-test-helper.h |    5 +++++
 2 files changed, 22 insertions(+), 0 deletions(-)

commit ac511b43ae9f37ef33fc0fe5fdf7029c8e354bce
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 28 11:54:13 2009 +0100

    add wocky_init and wocky_deinit

 wocky/Makefile.am |    2 +
 wocky/wocky.c     |   54 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky.h     |   34 +++++++++++++++++++++++++++++++++
 3 files changed, 90 insertions(+), 0 deletions(-)

commit 50201f619f1b75d8df9bec106d5e91fe22b1f91b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Aug 4 12:30:25 2009 +0100

    connector: 'legacy' and 'old-ssl' properties shouldn't be construct only

 wocky/wocky-connector.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 5dd031fd5f4408e39d232e35317fdd8d3d423b8c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 18:06:28 2009 +0100

    Use local wocky_tls_* instead of g_tls_* and gio instead of gnio.

 examples/connect.c                  |   10 +++++-----
 tests/wocky-test-connector-server.c |   19 ++++++++++---------
 tests/wocky-test-connector-server.h |    2 +-
 tests/wocky-test-sasl-auth-server.c |    2 +-
 tests/wocky-test-sasl-auth-server.h |    2 +-
 tests/wocky-test-stream.h           |    2 +-
 wocky/wocky-connector.c             |   12 ++++++------
 wocky/wocky-connector.h             |    2 +-
 wocky/wocky-sasl-auth.h             |    2 +-
 wocky/wocky-xmpp-connection.h       |    3 +--
 10 files changed, 28 insertions(+), 28 deletions(-)

commit b9ee8409f1ecbd1c28b79754ca5b45ffdf4a5738
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 18:05:42 2009 +0100

    Remove gnio from package deps, add gnutls and gio.

 configure.ac |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fdad53d43d9c7edcd24db0c69108b689b7b05847
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 18:04:51 2009 +0100

    Add wocky-tls to build list, exclude from style check as it is a gnio import.

 wocky/Makefile.am |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 18d70158bf35f91165adde167a8d7c20fe296d0e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 18:03:22 2009 +0100

    Check in copy of gnio TLS support + collabora patches to add server side TLS.

 wocky/wocky-tls.c | 1230 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-tls.h |   68 +++
 2 files changed, 1298 insertions(+), 0 deletions(-)

commit 9d73236146ea2846a380f59090b249d6e7a35280
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 31 17:44:25 2009 +0100

    Bogus goto, should have just been a label.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fa985c20e28fd1aae2b9bfd49550cbebbee177ae
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 31 17:39:04 2009 +0100

    Stanza memory leaks on error bailouts.

 wocky/wocky-connector.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 3213cfa55bc654779602866f991efdd2a1fc3730
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 30 11:29:29 2009 +0100

    Bogus if condition removed.

 tests/wocky-xmpp-node-test.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 79f3f6482a6594c6175401909698d2fad1c649ce
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 16:36:06 2009 +0100

    Minor (english) syntax changes in doc string.

 wocky/wocky-xmpp-node.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit d22b1d9004f622ba58f4f71352631a4587ea7e86
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 16:32:09 2009 +0100

    Test the wocky_xmpp_node_unpack_error function.

 tests/wocky-xmpp-node-test.c |  184 ++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 184 insertions(+), 0 deletions(-)

commit 54f204acb753f3081c0082382c3522d30e7fc165
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 29 16:31:16 2009 +0100

    Extract the stanza error type. Make sure unset original stanza => NULL result.

 wocky/wocky-xmpp-node.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 34f6d59f1f87794e67ff3837d06edf9d92e62df0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 18:08:51 2009 +0100

    Document wocky_xmpp_node_unpack_error.

 wocky/wocky-xmpp-node.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit f28d0fb657f9371b59e41bcc064d06e85b4abe1a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 17:49:51 2009 +0100

    Session ID property not writable anymore.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit aa7ab0ce93f7219e51a9e063251f174b6dc77eca
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 17:49:19 2009 +0100

    Cleanup some old DEBUG we don't need any more.

 tests/wocky-test-connector-server.c |   13 +------------
 1 files changed, 1 insertions(+), 12 deletions(-)

commit 6ba3953607660c70aa4ddaadb8b1fc742c8a362e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 17:39:35 2009 +0100

    Memory leak in example connect.c program.

 examples/connect.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 327326a9e1d0cf60e7a1d8d1a51daacfae860756
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 12:05:11 2009 +0100

    Duplicate applicable XMPP+TLS tests for the XMPP+SSL code path(s).

 tests/wocky-connector-test.c |  334 ++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 334 insertions(+), 0 deletions(-)

commit 0a9d76b1be294fc26ac097f59935c45cdf0c923a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 12:04:07 2009 +0100

    Tweak the timing of some of the server-death tests (also, sleep not needed)

 tests/wocky-test-connector-server.c |   12 ++++--------
 1 files changed, 4 insertions(+), 8 deletions(-)

commit 266f6c74fd2d258c6bdda4e3ea08ff50e080abdb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 28 11:32:40 2009 +0100

    Removed some stray empty comments + a couple of tests were misnamed

 tests/wocky-connector-test.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

commit 245cb4099a141cf7dd084628281706a13f671108
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 27 20:50:03 2009 +0100

    TLS_REQUIRED/PLAINTEXT_OK vs TRUE/FALSE. More old-SSL tests.

 tests/wocky-connector-test.c |  538 +++++++++++++++++++++++++++++++++---------
 1 files changed, 426 insertions(+), 112 deletions(-)

commit ceda37cbc1092ed8d28d656876b2c029042f2c10
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 27 19:56:57 2009 +0100

    Fix comment describing test-spec structure. Use PLAIN/DIGEST vs TRUE/FALSE.

 tests/wocky-connector-test.c |  114 +++++++++++++++++++++---------------------
 1 files changed, 57 insertions(+), 57 deletions(-)

commit d4604ea3b0ad904eff471639e72caafe6fda0413
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 27 19:42:26 2009 +0100

    First batch of old-style SSL tests

 tests/wocky-connector-test.c |  205 +++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 203 insertions(+), 2 deletions(-)

commit c33e6c778fc5dfa2ca8d7c2426a5d26e9fcd5636
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 27 19:39:52 2009 +0100

    Implement old-style SSL in test XMPP server.

 tests/wocky-test-connector-server.c |   51 +++++++++++++++++++++++++++++++---
 1 files changed, 46 insertions(+), 5 deletions(-)

commit 54582866d61c9a8ea7900ff8b7ab87fc546ca8ff
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 27 19:39:02 2009 +0100

    Old style SSL (ie immediately on TCP connection established)

 wocky/wocky-connector.c |   75 +++++++++++++++++++++++++++++++++++++++++-----
 wocky/wocky-connector.h |    1 +
 2 files changed, 67 insertions(+), 9 deletions(-)

commit 865cb935844292e9d7c1207dc0abd3238749bfbb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 27 12:59:28 2009 +0100

    Update flow-control description comment at start of wocky-connector.c

 wocky/wocky-connector.c |   58 ++++++++++++++++++++++++++++------------------
 1 files changed, 35 insertions(+), 23 deletions(-)

commit 3d765ebdd873a390fde19b1c13e6d903c8e11ba5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 24 19:46:47 2009 +0100

    Improve test coverage in corner cases.

 tests/wocky-connector-test.c        |   66 +++++++++++++++++++++++++++++++++++
 tests/wocky-test-connector-server.c |   20 ++++++++++
 tests/wocky-test-connector-server.h |   16 +++++----
 3 files changed, 95 insertions(+), 7 deletions(-)

commit c585552ad207a2194d306d9b9211859d535e3436
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 24 18:45:24 2009 +0100

    Memory leak: free old session id string when the session re-initialises

 wocky/wocky-connector.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 1741f0b8e19e0234bd72fba3ee04cfc4fa4c00f1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 24 16:51:35 2009 +0100

    Split connector-problems into smaller logical groups
    Problem flags sometimes need to be ORable together, but we had exceeded 32 of them, so have split the problems into logical groups to prevent problems as the enm size might be exceeded on some platforms otherwise, aiui.

 tests/wocky-connector-test.c        |  230 ++++++++++++++++++++---------------
 tests/wocky-test-connector-server.c |  126 +++++++++----------
 tests/wocky-test-connector-server.h |  108 +++++++++++------
 3 files changed, 260 insertions(+), 204 deletions(-)

commit fb7d680d68048ca3f0db4c58d01d7156d7140760
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 23 20:00:05 2009 +0100

    Typo in comment.

 wocky/wocky-sasl-auth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d1620c44db2ba34a369de12bdbe1fdc445d569e0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 23 19:49:27 2009 +0100

    Old style jabber-auth tests.

 tests/wocky-connector-test.c |  148 +++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 147 insertions(+), 1 deletions(-)

commit 86acf37b4089ef1f472bb929fdf19daa2ca501ba
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 23 19:41:55 2009 +0100

    Miscellaneous mem leak/uninitialised var/debug fixes
    session_id free()d in cleanup.
    DEBUG("") messages so we can track progress
    assignment + declaration for variable declared in switch block wasn't working, assign separately from declaration.
    Make sure jabber auth stanzas have IDs

 wocky/wocky-connector.c |   35 ++++++++++++++++++++++++++++++-----
 1 files changed, 30 insertions(+), 5 deletions(-)

commit f9cac60bdb9f0dfc6d4f7337a275fd058f60efe1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 23 19:32:33 2009 +0100

    Implement old-style jabber auth in the test server.

 tests/wocky-test-connector-server.c |  267 +++++++++++++++++++++++++++++++++--
 tests/wocky-test-connector-server.h |    8 +
 wocky/wocky-namespaces.h            |    3 +
 3 files changed, 263 insertions(+), 15 deletions(-)

commit 27e2f0fc175a73661d6bdb603ea9b3e5bac987ec
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 22 12:18:57 2009 +0100

    Comment explaining why we proceed to "establish_session" after a successful
    old-style jabber auth exchange.

 wocky/wocky-connector.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 51b0ebb58d27dd6fb7a011a851b2b5ecfce6fb93
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 21 19:25:38 2009 +0100

    Old-style jabber auth implementation.

 wocky/wocky-connector.c  |  343 +++++++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-connector.h  |    5 +
 wocky/wocky-namespaces.h |    4 +
 3 files changed, 348 insertions(+), 4 deletions(-)

commit cb635f6af447c0444d5832cb58a81e9e57ba7afe
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 21 19:24:53 2009 +0100

    Util method to extract stanza error details

 wocky/wocky-xmpp-node.c |   53 +++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-node.h |    8 +++++++
 2 files changed, 61 insertions(+), 0 deletions(-)

commit 8ce7c458e0b6a2ef5f568a6e10a0e08ac6c866ae
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 21 19:24:18 2009 +0100

    Comment typos.

 wocky/wocky-sasl-auth.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 3d415b6806790622086d3df10b562c484af35230
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 21 19:15:44 2009 +0100

    Add ID paramater to stream open methods (needed for server stream open)

 examples/connect.c                  |    6 +++---
 tests/wocky-test-connector-server.c |    2 +-
 tests/wocky-test-helper.c           |    2 +-
 tests/wocky-test-sasl-auth-server.c |    4 ++--
 tests/wocky-test-sasl-auth.c        |    4 ++--
 tests/wocky-xmpp-connection-test.c  |   10 +++++-----
 tests/wocky-xmpp-readwrite-test.c   |    2 +-
 wocky/wocky-xmpp-connection.c       |    3 ++-
 wocky/wocky-xmpp-connection.h       |    1 +
 wocky/wocky-xmpp-writer.c           |   10 ++++++++++
 wocky/wocky-xmpp-writer.h           |    1 +
 11 files changed, 29 insertions(+), 16 deletions(-)

commit 75fc9f5fc79dad7a325d2e9bab366879bdf5389d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 20 16:02:54 2009 +0100

    Store and return the XMPP Stream Session ID
    The XMPP Session ID from the server stream open is needed for some client actions (including old-style Jabber auth): Make it a standard connector return item.

 examples/connect.c                  |   17 +++++++++++---
 tests/wocky-connector-test.c        |   27 ++++++++++++++++++++---
 tests/wocky-test-connector-server.c |    2 +-
 tests/wocky-test-helper.c           |    2 +-
 tests/wocky-test-sasl-auth-server.c |    4 +-
 tests/wocky-test-sasl-auth.c        |    4 +-
 tests/wocky-xmpp-connection-test.c  |   15 +++++++-----
 wocky/wocky-connector.c             |   40 +++++++++++++++++++++++++++++++---
 wocky/wocky-connector.h             |    3 +-
 wocky/wocky-xmpp-connection.c       |    8 ++++++-
 wocky/wocky-xmpp-connection.h       |    1 +
 wocky/wocky-xmpp-reader.c           |   29 +++++++++++++++++++++----
 12 files changed, 121 insertions(+), 31 deletions(-)

commit 3d2b6bb99615703fd9ccf6daa086396db3468040
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 29 12:10:45 2009 +0100

    stanza_received_cb: unref ourself at the end of the function
    
    It's not safe to unref ourself and then use the priv pointer

 wocky/wocky-porter.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 3569d70d19a50e49379c0c112c5ab31db0d13ed7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 29 12:00:46 2009 +0100

    wocky_porter_force_close_async: add a comment explaining why it's safe to release the ref at this stage

 wocky/wocky-porter.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 9df6395ca9d6660c660878849458ae8b0da91b78
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 16:41:48 2009 +0100

    wocky_porter_force_close_async: unref ourself once the async result has been created

 wocky/wocky-porter.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit d473cecb3164ebac975e491e0050d4dd67a68c20
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 16:41:04 2009 +0100

    connection_force_close_cb: unref the receive_cancellable once the connection has been closed

 wocky/wocky-porter.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 18e690252a2fcc5090504ecdf05787a558077cfe
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 16:07:08 2009 +0100

    wocky-porter-test: add test_close_force_after_error

 tests/wocky-porter-test.c |   56 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 56 insertions(+), 0 deletions(-)

commit 0b6dd9bf0b3cfb7dc3f195506e2ef9e86171e97d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 16:06:29 2009 +0100

    test_close_force: we have to wait for 3 events, not 2
    
    Three callbacks have to called:
    - test_close_force_stanza_sent_cb
    - test_close_force_closed_cb
    - test_close_force_force_closed_cb

 tests/wocky-porter-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8595ff413485eb81824817b7c52ac21e886d4584
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 15:51:55 2009 +0100

    wocky_porter_force_close_async: close XMPP connection right away if remote is already closed

 wocky/wocky-porter.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit c721b6614add94cb84af4987c1a9848a7330377c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 15:23:21 2009 +0100

    wocky-porter-test: test to call force_close in the remote-error callback

 tests/wocky-porter-test.c |   21 +++++++++++++++++++--
 1 files changed, 19 insertions(+), 2 deletions(-)

commit f51bffd3593d0911267ed419df706a4c08d9d192
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 15:21:22 2009 +0100

    stanza_received_cb: complete the force close operation, if any, if handling the stanza closed the remote connection

 wocky/wocky-porter.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit ac8d9edd90936efe938f6f1998b3bbe90cf4f534
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 14:58:43 2009 +0100

    wocky_porter_close_async: raise an error if there is a force close operation running

 wocky/wocky-porter.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 79ebc9f3819541656d5239c09cff7968be626e63
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 14:52:33 2009 +0100

    wocky-porter: add some debug messages

 wocky/wocky-porter.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 1af25e22869aaa484972bff9cea51eea0bdffcfe
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jul 17 17:24:47 2009 +0100

    test wocky_porter_force_close_async

 tests/wocky-porter-test.c |   85 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 85 insertions(+), 0 deletions(-)

commit 1f68ed348b2a9a90fd803a2b74e1ecd52af4325c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 14:08:58 2009 +0100

    add wocky_porter_force_close_async

 wocky/wocky-porter.c |  144 ++++++++++++++++++++++++++++++++++++++++++++++++--
 wocky/wocky-porter.h |   10 ++++
 2 files changed, 150 insertions(+), 4 deletions(-)

commit 5569ae92c24541e8db3f525008c91d7789d85106
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 12:31:10 2009 +0100

    test wocky_xmpp_connection_force_close_async

 tests/wocky-xmpp-connection-test.c |   41 ++++++++++++++++++++++++++++++++++++
 1 files changed, 41 insertions(+), 0 deletions(-)

commit 8cff0b3f4ea9aaa4caa995a48754fc2817d34852
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 12:31:03 2009 +0100

    add wocky_xmpp_connection_force_close_async

 wocky/wocky-xmpp-connection.c |   64 +++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-connection.h |   10 ++++++
 2 files changed, 74 insertions(+), 0 deletions(-)

commit 637f9631cb50ed80656f9e479fa2670e1f8290f0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 22 12:07:14 2009 +0100

    wocky-connector: xmpp_features_cb: don't leak our previous reference on priv->features if any

 wocky/wocky-connector.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit c16e59035a26f04d3d766fd6c19e7dec74dbc9a0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 21 13:54:28 2009 +0100

    wocky-connector: use WockyXmppStreamError errors instead of a generic one

 tests/wocky-connector-test.c |    9 +++++----
 wocky/wocky-connector.c      |    3 +--
 wocky/wocky-connector.h      |    1 -
 3 files changed, 6 insertions(+), 7 deletions(-)

commit bee972c1d0b5036a25980f84d3f9f761f2937389
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 21 13:44:50 2009 +0100

    wocky-connector: factor out abort_connect

 wocky/wocky-connector.c |   30 +++++++++++++++++++-----------
 1 files changed, 19 insertions(+), 11 deletions(-)

commit 369848c9f5191f78c7bf01628acae7dc1f50f0a6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 16:19:36 2009 +0100

    wocky_xmpp_stanza_to_gerror: set a default message if there is no text node

 tests/wocky-xmpp-stanza-test.c |    4 ++--
 wocky/wocky-xmpp-stanza.c      |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 316ef2a8e1443ac98c71d37801515b92ab505900
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 11:59:15 2009 +0100

    stanza_received_cb: don't wait for the next stanza if an error has been detected while handling the stanza

 wocky/wocky-porter.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit 200c886a7425aef4f09f138f56c5b8cc2cfeb0bd
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jul 17 14:28:45 2009 +0100

    wocky-porter-test.c: add test_stream_error

 tests/wocky-porter-test.c |   52 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 52 insertions(+), 0 deletions(-)

commit 74877dc48a787d5a58d9e2348a3b23786c906307
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jul 17 14:29:39 2009 +0100

    wocky-porter: fire the remote-error signal when a stream error is received

 wocky/wocky-porter.c |   24 ++++++++++++++++++++++++
 1 files changed, 24 insertions(+), 0 deletions(-)

commit 0d32ff5a1af807728b26aaf868f601d057ca910d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jul 17 14:29:24 2009 +0100

    wocky-porter: factor out remote_connection_closed function

 wocky/wocky-porter.c |   90 +++++++++++++++++++++++++++++++-------------------
 1 files changed, 56 insertions(+), 34 deletions(-)

commit 8776e27eb1d20cab9d8f96b34cb9689f9661735d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 16:02:26 2009 +0100

    wocky-connector: stream_error_abort: use wocky_xmpp_stanza_to_gerror instead of parsing the stanza manually

 wocky/wocky-connector.c |   42 +++++++++---------------------------------
 1 files changed, 9 insertions(+), 33 deletions(-)

commit 57df600754da4db32b5a0728cc303266f252ba49
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 15:57:24 2009 +0100

    test wocky_xmpp_stanza_to_gerror

 tests/wocky-xmpp-stanza-test.c |   75 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 75 insertions(+), 0 deletions(-)

commit c250be88f8047e1132cfa6c03cbaea93eafeed7b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jul 17 14:27:19 2009 +0100

    add wocky_xmpp_stanza_to_gerror

 wocky/wocky-xmpp-stanza.c |   83 +++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-stanza.h |   39 +++++++++++++++++++++
 2 files changed, 122 insertions(+), 0 deletions(-)

commit 8f1148a0bf8d5635079c5e405adb22c720566d14
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 20 10:24:37 2009 +0100

    iq_sent_cb: remove useless \n in debug message

 wocky/wocky-porter.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 76b4b99e7be774de2ede7b2c1d7313de9ab66ffe
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 16 18:43:04 2009 +0100

    Removed extra / in resource string.

 tests/wocky-test-connector-server.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d2a2f185dbcc1d75ede4e774dce8661455289709
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 16 17:06:37 2009 +0100

    Elided unnecessary includes (added for stream error support, now elsewhere)

 wocky/wocky-xmpp-connection.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 5e5bdd67f38c0b1100257c82c84f285df87ba9de
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 16 17:06:01 2009 +0100

    WockyConnectorPrivate->result was overwritten while potentially unsafe
    priv->result is not necessarily safe to access/write after a g_simple_async_result_complete has been called on it: If the result held the last ref to its parent connector object, the priv->result slot will have been freed by the time we return.

 wocky/wocky-connector.c |   28 +++++++++++++++-------------
 1 files changed, 15 insertions(+), 13 deletions(-)

commit 74b2945aa8e9d0dc68f9aa95b0c6e2558f259abb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 16 16:48:29 2009 +0100

    Handle stream errors/disconnects in the sasl module.

 wocky/wocky-sasl-auth.c |   55 ++++++++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-sasl-auth.h |    4 +++
 2 files changed, 58 insertions(+), 1 deletions(-)

commit 7516fb14e42095eaf0838ee1c8c3f939ed2e9786
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 16 15:26:42 2009 +0100

    Extend test coverage to a few more corner cases.

 tests/wocky-connector-test.c        |   12 ++++++++
 tests/wocky-test-connector-server.c |   49 ++++++++++++++++++++++-------------
 tests/wocky-test-connector-server.h |   31 +++++++++++----------
 3 files changed, 59 insertions(+), 33 deletions(-)

commit 37ee90aca57cfed830ad5bc6877d854bad1bace6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 15 19:43:31 2009 +0100

    Ignore valgrind log files

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 87dd13fd7bf319a3f4e3f46f6233b309ef180f4a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 16 13:42:40 2009 +0100

    set the encoding on coverage html reports to UTF-8 (hardwired in lcov,
    so have to post-process)

 rules/lcov.mak |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 0b0701d559d64086f972bfcf87f0c56757342444
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 15 19:43:31 2009 +0100

    Handle XMPP stream errors in the connector.
    Tests which trigger XMPP stream errors at the key stages of connection.

 tests/wocky-connector-test.c  |   49 ++++++++++++++++++++++++++++++++-
 wocky/wocky-connector.c       |   61 ++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-connector.h       |    1 +
 wocky/wocky-namespaces.h      |    3 ++
 wocky/wocky-xmpp-connection.c |    2 +
 5 files changed, 114 insertions(+), 2 deletions(-)

commit d1060b610d802dc789e862b711aded98682e3735
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 15 19:30:37 2009 +0100

    Implement XMPP errors at the various stages where we receive a stanza.

 tests/wocky-test-connector-server.c |   63 +++++++++++++++++++++++++++++++----
 tests/wocky-test-connector-server.h |    4 ++
 2 files changed, 60 insertions(+), 7 deletions(-)

commit 6e6492cce4999ba85b02c16de023568f4e077676
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jul 17 16:00:47 2009 +0100

    wocky-porter-test: check that the 'closing' signal is fired

 tests/wocky-porter-test.c |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

commit 68db52832b9a2a16cc89034a75f282c762cd328c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jul 17 16:00:30 2009 +0100

    wocky-porter.c: fire closing signal when starting to close the Porter

 wocky/wocky-porter.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 7122422739e62e4354a392a9d22975b965c7c226
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 15 18:07:35 2009 +0100

    add test_cancel_iq_closing

 tests/wocky-porter-test.c |   33 +++++++++++++++++++++++++++++++++
 1 files changed, 33 insertions(+), 0 deletions(-)

commit 777375f681cc91c86b5653bac7dbd5df97f1ab82
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 15 18:05:39 2009 +0100

    wocky_porter_send_iq_async: early return if the porter is closing
    
    There is no point to go further as the sending will fail any way.

 wocky/wocky-porter.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 636063aa2d431265a1db48f67c587b0e7484dc63
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 15 18:04:47 2009 +0100

    iq_sent_cb: display a debug message if sending failed

 wocky/wocky-porter.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit b761642931b2500d18af0c418abdd7037c9eb6e4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 15 18:03:01 2009 +0100

    wocky-connector.c: establish_session: set priv->result to NULL before unreffing
    
    This avoid to try to unref it a second time if the result was owning the
    last ref on the connector.

 wocky/wocky-connector.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 46e93878e86290a2fc1ce3b703f8d8ccb201569c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 15 12:51:29 2009 +0100

    wocky-porter-test: add test_close_error

 tests/wocky-porter-test.c |   49 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 49 insertions(+), 0 deletions(-)

commit 15f00e5c93a64f148a6910804ed20569fd81cf95
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 15 12:50:11 2009 +0100

    stanza_received_cb: complete the close operation if our sent has been sent and the connection is broken

 wocky/wocky-porter.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 5b63b6b7495923fa0925848856bd73934b7aa7c6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 15 12:48:28 2009 +0100

    wocky_test_input_stream_set_read_error: if there is a pending read operation, complete it with an error

 tests/wocky-test-stream.c |   13 +++++++++++--
 1 files changed, 11 insertions(+), 2 deletions(-)

commit f5a6b2438988af2ccfa93dd21ab27861de40c146
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 15 11:26:58 2009 +0100

    NULL out priv members after unref()ing them.

 wocky/wocky-connector.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit ee645a6b78742638b860ca3824ba0246f034a069
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 19:31:45 2009 +0100

    Missing _unref()s of simple async results.

 wocky/wocky-connector.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 015fdc8bdc6ee550f5d3b648aa90aa6bad0da86d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 19:28:15 2009 +0100

    priv->conn should never be set if we ask for a new one.

 wocky/wocky-connector.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit f318666d2e9b3b74a0639620330dd5e0aef21470
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 19:25:08 2009 +0100

    unref the channel, not the socket in the test.
    Use the JID slicing function from wocky_utils
    Amend the Invalid JID test sincw the behaviour of the JID slicer is
    different to naive @ slicing (arguably it needs to be less tolerant,
    but right now it isn't which means we fail in a different place
    with a different error than we did before).

 tests/wocky-connector-test.c |   10 ++++---
 wocky/wocky-connector.c      |   53 ++++++++++++++++++++++++++++++++---------
 2 files changed, 47 insertions(+), 16 deletions(-)

commit d34f32ab570abb131e69316c58bd9a5a9c35da4e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 17:37:59 2009 +0100

    Break out long if condition.

 tests/wocky-connector-test.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

commit 8853540bce12d438b5fe440dbdcf160ed5409813
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 17:33:11 2009 +0100

    Minor leak in the test suite.

 tests/wocky-connector-test.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit da8fa0de237bbd1d3ccf12fcc9b51cc01d32a23d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 15:52:35 2009 +0100

    The SASL object was getting unref'd too early in sasl_auth_stanza_received,
    hold a ref to it while we pass it out to any handlers so that this does not
    happen.

 wocky/wocky-sasl-auth.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 621212acade5aa4abd28aaa6a7a3ae385acc50a3
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 15:05:53 2009 +0100

    Casting style (whitespace)
    Move the sleep() after a bind() failure to a nested if, it shouldn't happen
    unless we enter the second iteration of the loop but the optimiser decided
    it should happen anyway (I think). Speeds up tests a bit.

 tests/wocky-connector-test.c |    9 ++++-----
 1 files changed, 4 insertions(+), 5 deletions(-)

commit ea0a271654d179cf7b734628be3557bacee4a7bf
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 14:41:04 2009 +0100

    Store, check and free the returned jid.
    Typo in comment.
    Check return value of listen() as well as bind.

 tests/wocky-connector-test.c |   14 +++++++++-----
 1 files changed, 9 insertions(+), 5 deletions(-)

commit 75e0df17da3165f57528dd10655d0c5c1bb7ec08
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 14:36:16 2009 +0100

    Memory leak in digest_md5 handling.

 wocky/wocky-sasl-auth.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit a83dbe6538d42b02864058752501a84be9671856
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 13:17:23 2009 +0100

    Memory leak in DEBUG/state_message use.

 wocky/wocky-connector.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit e5ab24aa23dfa23d98297ad9a34623dcbd29877d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 13:02:05 2009 +0100

    Add brief comments desribing first block of test cases.

 tests/wocky-connector-test.c |   26 ++++++++++++++++++++++++++
 1 files changed, 26 insertions(+), 0 deletions(-)

commit 3eb6ca60feb2265aada49d17d4354933881a8c1a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 12:15:41 2009 +0100

    Kick off the test in a g_idle… - this prevents a race where a very early
    return via callback from the connector can happen before the mainloop has
    started (since an idle can by definition only happen in a running mainloop).

 tests/wocky-connector-test.c |   18 ++++++++++++------
 1 files changed, 12 insertions(+), 6 deletions(-)

commit 7809a0341d4544ce92d6b5375fd68b03148dd5f0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 11:59:47 2009 +0100

    Delete any __db. BDB tmp/lock files, they cause SASL deadlocks in
    subsequent tests.

 tests/wocky-connector-test.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit f2339277d9b0511c2ad24285d8bcb060681aaec2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 11:38:11 2009 +0100

    Wait for the server process (if any) to exit before proceeding to the next test.

 tests/wocky-connector-test.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit b4717962c54aa386576c53ec366f2d1820291418
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 14 11:14:54 2009 +0100

    Style typo. Add comment explaining why stderr is redirected in this case.

 tests/wocky-connector-test.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit be29dd08fb5a6be8508931c42b089f135d50ad84
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 20:03:53 2009 +0100

    Mask an error from the dummy xmpp server in the TLS-failed test.

 tests/wocky-connector-test.c |   92 +++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 90 insertions(+), 2 deletions(-)

commit b7040f801c6c7ad6d6373c4f6f9533d8cc22977b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 18:48:51 2009 +0100

    All the test binaries should depend on libwocky.la,
    which should in turn be located via $(top_builddir)

 tests/Makefile.am |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit db684838101af4957e96ff1c309270eab9cb7b8a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 18:48:02 2009 +0100

    Need to pause a little longer when the bind fails before retrying.

 tests/wocky-connector-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d3ab888b24925ed57721724815b639f0a704accb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 18:17:23 2009 +0100

    remove #if/#endif used to comment tests out during test development.

 tests/wocky-connector-test.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit fb0b8461f88d12fffe7315ec3198bc8ac31c57ec
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 18:15:44 2009 +0100

    Comment to explain exit w/o error reporting in the dummy XMPP server.
    (we're already past the point at which errors are interesting).

 tests/wocky-test-connector-server.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit bdbdcd5a1a1d8da7d82b7d64da8340cbba71fe97
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 17:33:25 2009 +0100

    Make a couple of repeat attempts to bind in case the last test
    hasn't relinquished the test server listen socket yet.

 tests/wocky-connector-test.c |    9 +++++++--
 1 files changed, 7 insertions(+), 2 deletions(-)

commit 2ba19bdc3688021b32bd7bd710b794b97032d20d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 17:32:21 2009 +0100

    Mismerge.

 tests/wocky-test-connector-server.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 02a21ef1f5e042a9c69eb73e6d397bc574962e4e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Jul 2 19:44:32 2009 +0100

    Add a servername argument

 tests/wocky-test-connector-server.c |    4 ++--
 tests/wocky-test-sasl-auth-server.c |    5 +++--
 tests/wocky-test-sasl-auth-server.h |    2 +-
 3 files changed, 6 insertions(+), 5 deletions(-)

commit f3924655e7690080c06e21800c02efa1d285ff5f
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Jul 2 19:47:31 2009 +0100

    Cope with a null byte in the A1 hash

 wocky/wocky-sasl-auth.c |   15 +++++++--------
 1 files changed, 7 insertions(+), 8 deletions(-)

commit 94991a5d4fa0de22e446c1884ce283e976c3da2a
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Jul 2 19:46:22 2009 +0100

    Test if the sasl auth copes with a null byte in the A1 MD5 hash
    
    Allow the test cases to define username, password and servername for the
    various testcases and add a test where the username, password and servername
    generates a null byte in the hash

 tests/wocky-test-sasl-auth.c |   63 ++++++++++++++++++++++++++----------------
 1 files changed, 39 insertions(+), 24 deletions(-)

commit 5da6c6d306a96d36921835f4afa5a62ee561c8b1
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 17:00:13 2009 +0100

    Free items fetched vie g_object_get in tests.

 tests/wocky-connector-test.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 9c6a1c3f29b943b93f6a012481ea03de7748da6c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 13:59:27 2009 +0100

    Change declaration style of wocky_connector_connect_finish

 wocky/wocky-connector.h |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 1d707beec95ba76b2f2d42506a81fc201b667b94
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jul 13 13:58:09 2009 +0100

    Fail tests if we can't get the port we want for the dummy XMPP server:
    Either something else is already listening there or we have even
    bigger problems.

 tests/wocky-connector-test.c |   27 ++++++++++++++++++++++++---
 1 files changed, 24 insertions(+), 3 deletions(-)

commit 6cffb03ff8a6acf4c1ad7e069ea6d643f432725f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 9 18:59:48 2009 +0100

    whitespace typo.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit eefabf3a68a80da5976d32a3f04f2d1e9cacae49
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 9 18:58:09 2009 +0100

    Server sudden-death tests + TLS negotiation error test.

 tests/wocky-connector-test.c |   67 ++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 64 insertions(+), 3 deletions(-)

commit d514cbadbeb84094637ac91445c1ecfb0d6cf843
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 9 18:57:32 2009 +0100

    More verbose debug message: which stage exactly did we bail out in?

 wocky/wocky-connector.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 75f7818af12f79ac1f94504e10f7ec4a4d8e609d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 9 18:56:55 2009 +0100

    Dummy server sudden-death conditions + TLS negotiation error implemented.

 tests/wocky-test-connector-server.c |   39 ++++++++++++++++++++++++++--------
 tests/wocky-test-connector-server.h |    5 ++++
 2 files changed, 35 insertions(+), 9 deletions(-)

commit 557ae61ab6842b1be39a11c99a4d5e18733843d4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 9 17:41:51 2009 +0100

    Tests for session error conditions/sessionless xmpp.
    Improve coverage of wocky-connector.c

 tests/wocky-connector-test.c |  139 +++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 137 insertions(+), 2 deletions(-)

commit 657ffb95e2bd8f7a0edf9bff514424e2fd09f1f2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 9 17:41:04 2009 +0100

    Stomp on some memory leaks.
    Add a missing break;
    Remove set_prop cases for unsettable properties.

 wocky/wocky-connector.c |   28 ++++++++++++++++------------
 1 files changed, 16 insertions(+), 12 deletions(-)

commit 0f3c1cc97b29fd9257656d86dbeed0ea59f47b11
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 9 17:39:51 2009 +0100

    Implement session related error conditions.
    (and sessionless xmpp)

 tests/wocky-test-connector-server.c |   97 +++++++++++++++++++++++++----------
 tests/wocky-test-connector-server.h |   28 ++++++----
 2 files changed, 87 insertions(+), 38 deletions(-)

commit 474b23cb4e81866ef0bc423aad47694eb28e949d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 8 20:16:19 2009 +0100

    Implement tests for <bind...> error conditions.

 tests/wocky-connector-test.c |   78 ++++++++++++++++++++++++++++++++++++++---
 1 files changed, 72 insertions(+), 6 deletions(-)

commit 0868311be468b45d86dc5eef546b27b82324be44
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 8 20:15:16 2009 +0100

    Implement <bind...> problems in dummy server.

 tests/wocky-test-connector-server.c |   92 +++++++++++++++++++++++++++++------
 tests/wocky-test-connector-server.h |   18 +++++--
 2 files changed, 90 insertions(+), 20 deletions(-)

commit e50dfa60adb743113a0bfa73d8a4bf361065533f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 8 17:55:06 2009 +0100

    More symbolic declararions in the test definitions to help with readability.
    
    Implement XMPP bad version and Bad feature stanza tests.
    
    Unlinking sasl db every time seems to cause sasl to fail unpredictably.
    Work around SASL problems in bad-user and bad-pass tests a differnet way.
    Unlink sasl DB just once at the start of the test.

 tests/wocky-connector-test.c |  236 +++++++++++++++++++++++++-----------------
 1 files changed, 140 insertions(+), 96 deletions(-)

commit d8049ff8c43fa96374fc240d8bb2872b4a3c0653
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 8 17:52:15 2009 +0100

    Allow user to set XMPP version in dummy server.
    Implement bad features and tls refused conditions.

 tests/wocky-test-connector-server.c |   23 +++++++++++++++++------
 tests/wocky-test-connector-server.h |    2 ++
 2 files changed, 19 insertions(+), 6 deletions(-)

commit 5aea3723697ad15a45be199696b2da9451705977
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 8 17:46:13 2009 +0100

    Initialise a couple of pointers to NULL.
    Log feature stanza version in DEBUG.

 wocky/wocky-connector.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 02134164ac9436fcd2a2c3856688b50c1008ae54
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 8 15:20:06 2009 +0100

    TLS refused and bad-JID tests added.
    Fixed race condition in run_test.
    Changed way in which TLS support in the test server was turned on/off.

 tests/wocky-connector-test.c |   70 ++++++++++++++++++++++++++++++++++++-----
 1 files changed, 61 insertions(+), 9 deletions(-)

commit 8cb784f04101a107d50607323d810d70efa5bf2a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 8 15:13:23 2009 +0100

    Connector problems can now be ORed toegether.
    Implement TLS refused condition.

 tests/wocky-test-connector-server.c |   75 +++++++++++++++++++++++++++--------
 tests/wocky-test-connector-server.h |    8 ++--
 2 files changed, 62 insertions(+), 21 deletions(-)

commit 89dca400878606b1926f3159e60b365bd163862c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 7 19:53:30 2009 +0100

    Clean up the sasl-db to make sure our bad password tests will pass.
    Add SASL tests.

 tests/wocky-connector-test.c |   74 ++++++++++++++++++++++++++++++++++++++++--
 1 files changed, 71 insertions(+), 3 deletions(-)

commit 926d3dea455d54432c87c9bad95492d2a7faaf88
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 7 17:39:54 2009 +0100

    Another block of tests.
    All 48 basic connecion/auth tests against a correctly functioning
    XMPP server now pass.

 tests/wocky-connector-test.c |  139 +++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 136 insertions(+), 3 deletions(-)

commit b04f5031ffaa0144aabf0d570562c91416eef240
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 7 17:25:30 2009 +0100

    More tests.
    Make test declarations more symbolic so they are a bit easier to interpret.
    Test for correct auth mechanism used.

 tests/wocky-connector-test.c |  324 +++++++++++++++++++++++++++++++-----------
 1 files changed, 242 insertions(+), 82 deletions(-)

commit 9da297ee487904298d72cf1c61c9ca5f3c7d0a81
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jul 7 16:08:00 2009 +0100

    Remember and expose the sasl auth mechanism actually used via the
    wock sasl and connector APIs.
    
    unref the sasl object when we are done with it.

 wocky/wocky-connector.c |   16 ++++++++++++++--
 wocky/wocky-connector.h |    3 +++
 wocky/wocky-sasl-auth.c |   13 +++++++------
 wocky/wocky-sasl-auth.h |    9 +++++++++
 4 files changed, 33 insertions(+), 8 deletions(-)

commit e878d844f3f0aba7462c3a1e298898131f8b5428
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 17:54:27 2009 +0100

    Whitespace fix.
    Compiler warning about type of test_func.

 tests/wocky-connector-test.c |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

commit 04fa73cd6aaf998ab30e3d06f43ffc4f69bad34f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 17:49:33 2009 +0100

    First block of 24 basic tests that check the connectors logic wrt
    SRV rcords vs A records vs user-specified hosts is sound.

 tests/wocky-connector-test.c |  362 ++++++++++++++++++++++++++++++++++++++---
 1 files changed, 335 insertions(+), 27 deletions(-)

commit 7a067167711901a56de1d40bdc63989c3ba2bd56
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 17:48:37 2009 +0100

    typo.

 tests/connector-test-plan.txt |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 84cd0e1527ca8e2594cff8666209f45da52f276d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 17:26:21 2009 +0100

    Do not fall back to A records if there is a SRV record but we failed to
    connect to the spcified host.
    
    Silence a "discarding qualifiers" warning.

 wocky/wocky-connector.c |   21 +++++++++++++++++++--
 1 files changed, 19 insertions(+), 2 deletions(-)

commit 6eacf17c3f9f69aa822688c9ff88e86acd284658
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 17:23:40 2009 +0100

    Update test plan with new expected outcomes.

 tests/connector-test-plan.txt |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

commit a47f813adfcee2010c1bcd5d578b9836594c9edd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 17:23:06 2009 +0100

    If libwocky.la has been rebuilt, wocky-connector-test also needs rebuilding

 tests/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0e83d2a65b74be44a3327df5b538e0b6fde4ad40
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 15:00:21 2009 +0100

    Ignore the SRV record (if any) if _either_ HOST or PORT is supplied.

 wocky/wocky-connector.c |   24 +++++++++++++++---------
 1 files changed, 15 insertions(+), 9 deletions(-)

commit 5fa9d1bfa829d5233303f04c0c7ddfb6e30407d2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 14:59:32 2009 +0100

    Copyright date corrected.
    Kill the server if the stanza is NULL after a receive in xmpp_handler.

 tests/wocky-test-connector-server.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit e023a31e8f3aaea915eb13f6f2a4eaa1248d618e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jul 3 14:58:12 2009 +0100

    Register DEBUG_CONNECTOR so WOCKY_DEBUG can be used to set it on its own

 wocky/wocky-debug.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 6bc6da0bf0f9bf2e6f1da6840394e8c4df0bf11f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jul 2 11:52:30 2009 +0100

    Slight screw-up in conflict resolution, lines doubled up.

 tests/Makefile.am |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

commit ccb9cb7410115bbf1eb023ad6bc67416303e211b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jul 2 10:47:35 2009 +0100

    test_sasl_auth_server_new: ref the stream as we keep our own ref on it

 tests/wocky-test-sasl-auth-server.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 0011d1ef50b99232b14304c36d62426efb5928b9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 1 18:22:11 2009 +0100

    Clean up generated pem files.
    Bail out iwht an error if certtool is not installed.

 tests/Makefile.am |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit f7b03e95eb6bb399a6b4f38405f28d301f4aa93c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 1 17:25:26 2009 +0100

    Add loopback IP address to cert config.

 tests/certs/tls-cert.cfg |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ac33f6850cf1e6fb4de9c964393b73c6b1cb4e4e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 1 17:25:02 2009 +0100

    Need to use abspath, not realpath, files might not exist yet.

 tests/Makefile.am |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 4c439506aa436b146bb600eb8892deacc45d9482
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 1 17:06:32 2009 +0100

    Generate x509 key and cert PEM files automatically.
    Use generated PEM files in connector tests.
    Ignore PEM files in git.

 .gitignore                          |    2 +
 tests/Makefile.am                   |   40 +++++++++++++++-
 tests/certs/ca-cert.cfg             |   89 +++++++++++++++++++++++++++++++++++
 tests/certs/tls-cert.cfg            |   89 +++++++++++++++++++++++++++++++++++
 tests/wocky-test-connector-server.c |   12 ++--
 5 files changed, 224 insertions(+), 8 deletions(-)

commit 37e4a629ea89b01d744c73b5ead5b4886e0334a2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 1 17:05:05 2009 +0100

    Remove noisy debug messsage.

 tests/wocky-connector-test.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 70a7d400fb89c83ef680cc1a2b96b0faca756af0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 1 16:12:00 2009 +0100

    Wrong constant used for property.

 wocky/wocky-connector.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit d72b9ccf7a0cc8408d6f28264b288137a7bac1e0
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jul 1 11:51:25 2009 +0100

    Removed header signature for dead function wocky_connector_new_full
    Allow resource to be set in wocky_connector_new as it is CONSTRUCT_ONLY now.
    Update example connect,c to match new API.

 examples/connect.c      |    2 +-
 wocky/wocky-connector.c |    9 +++++++--
 wocky/wocky-connector.h |   11 +----------
 3 files changed, 9 insertions(+), 13 deletions(-)

commit 152fe152ab7ccb0bdff1ef3b3b3fbdbbe52a5502
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 19:36:21 2009 +0100

    Remove obsolete error codes now that we propagate low level errors up the chain

 wocky/wocky-connector.h |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

commit 39a38ad6ba2f19605ce08d8c317f4fe76d6526cb
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 19:31:46 2009 +0100

    Split abort_connect into two cases: abort_connect_error for lower level
    GErrors propagating up, and abort_c for errors originating in the connector.

 wocky/wocky-connector.c |  107 +++++++++++++++++++++++++---------------------
 1 files changed, 58 insertions(+), 49 deletions(-)

commit 3955e98dedd1ef01f7a46c72c467a1e9b9cab735
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 17:49:00 2009 +0100

    Sprinkle DEBUG statments liberally through the code so we can see what's
    going on while working on it.

 wocky/wocky-connector.c |   22 ++++++++++++++++++++--
 1 files changed, 20 insertions(+), 2 deletions(-)

commit 0636a92e94bd3bea4c76f7bc290663bcedfc97e5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 16:31:23 2009 +0100

    Change the way the error *tag is assigned.
    strdup the node name when storing it as it is a temporary value.

 wocky/wocky-connector.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 64935e950f299bdbfe4b3040983746e5dd9166fa
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 16:27:55 2009 +0100

    Change the way the <resource>...</resource> section is added to the bind
    iq stanza.

 wocky/wocky-connector.c |   24 ++++++++++++------------
 1 files changed, 12 insertions(+), 12 deletions(-)

commit 1f51b19483ca88bcf4293618292e4e045c33ef87
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 16:18:14 2009 +0100

    <proceed> stanza is mandatory at this point.

 wocky/wocky-connector.c |    7 ++-----
 1 files changed, 2 insertions(+), 5 deletions(-)

commit 20be1e4e14d5af05c91353db9e0a348630738336
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 16:16:04 2009 +0100

    Cast of object first in function.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 36a31c8b4c6ccec4f990522adb3245ca8f3c68e2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 16:15:04 2009 +0100

    Amended error message on missing/bogus feature stanza.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 99fdb845fe6b029b1861443101d3b6fb9e030c51
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 16:13:41 2009 +0100

    Password must be set (but it can be empty).
    Emit a warning if it is NULL, and set it to "".

 wocky/wocky-connector.c |   11 ++++++++---
 1 files changed, 8 insertions(+), 3 deletions(-)

commit b63d235a96c9dbf926447e0b8d866043517bbb3a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 16:05:38 2009 +0100

    resource is construct only
    resource must be non-empty as well as non-NULL

 wocky/wocky-connector.c |   16 ++++++----------
 1 files changed, 6 insertions(+), 10 deletions(-)

commit ffb1ed9ced0574675fb61ef45af2486e6a4d65d4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 15:23:01 2009 +0100

    remove time(NULL) component from random resource.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 299f755966af70a37d948a25bc0d6328460c05a8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 15:21:27 2009 +0100

    g_strdup_printf in make_resource.

 wocky/wocky-connector.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit 5d7ef8477ca16fe62bbf75e77a053086470f8d35
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 15:19:02 2009 +0100

    Change to state_message + comment from review.

 wocky/wocky-connector.c |   23 ++++++++++++-----------
 1 files changed, 12 insertions(+), 11 deletions(-)

commit 4cd1069dcf04677cc2e426d45dbe6dc2a6c91a8f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 15:12:26 2009 +0100

    Change base for auto-generated resources.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 353c15fc1df8c6b8d8f7c0749d85a97a149f0cd9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 15:11:11 2009 +0100

    Add ids to the iq set stanzas for bind and session

 wocky/wocky-connector.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 65ca5081880dc5a730f4b6e51cf74dcdfcf79255
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 14:54:35 2009 +0100

    Implement bind/session feature advert support + handle iqs for same.

 tests/wocky-test-connector-server.c |  194 ++++++++++++++++++++++++++++++++---
 1 files changed, 181 insertions(+), 13 deletions(-)

commit a0a44e8a21f49493d620a61bfe2a8101ac74b145
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 14:53:37 2009 +0100

    follow _async/_finish convention, allow SASL test server to hand back
    control so that the connector test server can re-use the SASL implementation.

 tests/wocky-test-sasl-auth-server.c |   62 ++++++++++++++++++++++++++++------
 tests/wocky-test-sasl-auth-server.h |    8 +++-
 2 files changed, 57 insertions(+), 13 deletions(-)

commit 990e0d82901923632adc68815b6a5c754517a8dd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 30 14:51:55 2009 +0100

    Initialise char * to NULL.

 tests/wocky-connector-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit fd4eccc6d775244b4eede451142666d062cbff31
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 29 16:01:49 2009 +0100

    Unref the feature stanza in the dispose handler.

 wocky/wocky-connector.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit adc3b5dbc45050f02eb06edde48e2c8773f13ea2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 29 14:22:18 2009 +0100

    Establish an XMPP session if required by the server.

 wocky/wocky-connector.c  |  129 +++++++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-connector.h  |    4 ++
 wocky/wocky-namespaces.h |    3 +
 3 files changed, 135 insertions(+), 1 deletions(-)

commit eaabec09df985b62acad3795a9b5e5c9145af8bc
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 29 13:24:34 2009 +0100

    Connector test partially modified to match API changes.
    Test does not work yet as test server does not advertise/support resource
    binding, in progress.

 tests/wocky-connector-test.c |   28 ++++++++++++++++------------
 1 files changed, 16 insertions(+), 12 deletions(-)

commit f0a4777ef61874bb09135806cc17fad4ec18ac00
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 29 13:15:06 2009 +0100

    Specific error for TLS negotiation failure

 wocky/wocky-connector.c |    2 +-
 wocky/wocky-connector.h |    1 +
 2 files changed, 2 insertions(+), 1 deletions(-)

commit 1c9b71771d8ff8ef4cd873113bf6877a7841f891
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 29 13:14:30 2009 +0100

    xmpp_init re-used every time we (re-)initialise the stream insteadt of
    calling wocky_xmpp_connection_send_open_async directly.
    
    Added features property to cache XMPP features stanza
    
    Erase cached features whenever we (re-)initialise the stream.

 wocky/wocky-connector.c |   42 +++++++++++++++++++++++++++---------------
 1 files changed, 27 insertions(+), 15 deletions(-)

commit fa79d6a25d06f990719087fbf433836a72ddb140
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jun 26 18:15:02 2009 +0100

    Return jid received from server in _finish call.
    Update example code for new _finish signature.

 examples/connect.c      |    6 ++++--
 wocky/wocky-connector.c |   10 +++++++++-
 wocky/wocky-connector.h |    3 ++-
 3 files changed, 15 insertions(+), 4 deletions(-)

commit 89ed5c796e8828b56adb4febcc872c36e12e67fa
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jun 26 17:53:58 2009 +0100

    Correct description of XMPP login flow at top of file.
    Add extra section to end of login process to handle XMPP resource binding.

 wocky/wocky-connector.c  |  217 +++++++++++++++++++++++++++++++++++++++-------
 wocky/wocky-connector.h  |    8 ++-
 wocky/wocky-namespaces.h |    3 +
 3 files changed, 194 insertions(+), 34 deletions(-)

commit 0150ab7df5d7694aca126b51db803f8e9317c044
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jun 26 17:53:00 2009 +0100

    Fix style issues in wocky_xmpp_node_get_first_child

 wocky/wocky-xmpp-node.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit edeae35e5f457801eba4b3f7105086e7ac487f74
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jun 26 17:48:55 2009 +0100

    Add core, TAGS *report.xml to gitignore

 .gitignore |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 779a995a4488b1d6d1fbb54e7a899cd2094206bd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jun 26 17:32:00 2009 +0100

    Utility function: get first node child.

 wocky/wocky-xmpp-node.c |    8 ++++++++
 wocky/wocky-xmpp-node.h |    2 ++
 2 files changed, 10 insertions(+), 0 deletions(-)

commit 03663c6d95a5a6fe8c20391798a401965724075d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 25 18:59:51 2009 +0100

    Fixed abort_connect infrastructure to be more in-line with normal usage.
    Addressed various mem leaks on calls to abort_connect.

 wocky/wocky-connector.c |  182 ++++++++++++++++++++++++++--------------------
 1 files changed, 103 insertions(+), 79 deletions(-)

commit d85c65c5c1acd81ce6f9a09bbfa279eef4b6e201
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 25 18:56:49 2009 +0100

    Update example to match new API signatures.

 examples/connect.c |   10 +++-------
 1 files changed, 3 insertions(+), 7 deletions(-)

commit 5ebbcbc5c82bc1372919e9f454c07a3b459cd397
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 25 14:47:33 2009 +0100

    Style, whitespace, naming convention and function signature changes from review.

 wocky/wocky-connector.c |  413 ++++++++++++++++++++++-------------------------
 wocky/wocky-connector.h |   39 +++--
 2 files changed, 213 insertions(+), 239 deletions(-)

commit 30563d5d57753139d23747302e9a9070c5c50a57
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 25 14:46:38 2009 +0100

    Typo in .gitignore

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit aa4d242f886e01522142b80be255209a496a8f5d
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 24 14:28:59 2009 +0100

    ifdef out the fakedns debugging, pretty sure it's working as advertised.

 tests/test-resolver.c |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit 897887f5e5b10905ce2b4d514216b2af7e06741a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 24 14:19:33 2009 +0100

    Duff header file entry removed.

 tests/Makefile.am |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 6a6920e91b10e0cf1814f8797fddd7f9d8fe23c2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 24 14:19:13 2009 +0100

    Style & whitespace fixes.

 tests/test-resolver.c               |   11 ++++++-----
 tests/wocky-connector-test.c        |   10 +++++-----
 tests/wocky-test-sasl-auth-server.c |    4 ++--
 3 files changed, 13 insertions(+), 12 deletions(-)

commit 04f7f9f13c980aac1969290464027befd23c8468
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 24 14:09:33 2009 +0100

    Add new connector test suite (only first test so far)
    Let Makefile.am know about new connector test
    Pattern rule to allow individual test-suites to be run.

 tests/Makefile.am            |   20 ++++-
 tests/wocky-connector-test.c |  235 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 254 insertions(+), 1 deletions(-)

commit 0793348f6af655869a4f232637b402d85ceabb84
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 24 14:07:42 2009 +0100

    More DEBUG statements.
    Check more internal members for NULL before unrefing.
    Only free the xml stanza in the handler dispatcher if we didn't find
    a suitable handler, otherwise it's the handler's job to clean it up.

 tests/wocky-test-connector-server.c |   25 +++++++++++++++++--------
 1 files changed, 17 insertions(+), 8 deletions(-)

commit 27a5d96a4c08f8051a50c74a8f9d6e500939832f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 24 14:05:54 2009 +0100

    Check the error member is set before unrefing it.

 wocky/wocky-connector.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 340d86988a4ed892eb42d160549de270ecb6b31c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 24 14:04:58 2009 +0100

    Check some priv-> members for NULL before unrefing them.

 tests/wocky-test-sasl-auth-server.c |   18 ++++++++++++------
 1 files changed, 12 insertions(+), 6 deletions(-)

commit 92517034b508caece0ebe13ca7ff253d3e07985e
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jun 19 18:35:11 2009 +0100

    Resolver class that lets us patch in fake SRV and A records for a domain
    on the fly. Needed for the connector tests.

 tests/test-resolver.c |  325 +++++++++++++++++++++++++++++++++++++++++++++++++
 tests/test-resolver.h |   68 ++++++++++
 2 files changed, 393 insertions(+), 0 deletions(-)

commit 3dd3b2e7b83081d6cffb5c8631493efd04f55de4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Fri Jun 19 17:46:52 2009 +0100

    Check in test plan for connector.

 tests/connector-test-plan.txt |   77 +++++++++++++++++++++++++++++++++++++++++
 1 files changed, 77 insertions(+), 0 deletions(-)

commit 88702faf56df2a1683eb21bb651085fe09d0b494
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 16 19:32:33 2009 +0100

    Reference use of new test-connector-server code.

 tests/wocky-dummy-xmpp-server.c |  103 +++++++++++++++++++++++++++++++++++++++
 1 files changed, 103 insertions(+), 0 deletions(-)

commit f7d9bcd29eb61ab08099fb8225995d8a273e6c3a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 16 19:31:38 2009 +0100

    Implement a simplistic TLS/SASL capable server for use in tests.
    (Implementation of problem conditions not implemented yet, to be added).

 tests/wocky-test-connector-server.c |   89 ++++++++++++++++++++++++----------
 1 files changed, 63 insertions(+), 26 deletions(-)

commit 025f94637f7ea5c277cccd55d4ba04db97460251
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 16 19:29:31 2009 +0100

    Test for xml stanza validity was reversed.
    DEBUG the host/port connect details.

 wocky/wocky-connector.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 32cd7a984868ba704ba618acf7d374ee8d2f7664
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 16 19:19:17 2009 +0100

    Use new wocky_connector_new constructor.
    Minor debugging tidyups.

 examples/connect.c |    9 +++------
 1 files changed, 3 insertions(+), 6 deletions(-)

commit 7d32a1aac743733aacb95dc95ae88e880f4f9a4c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 15 14:20:15 2009 +0100

    g_object_new needs its arglist to be NULL terminated.

 wocky/wocky-connector.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit cf4b65601d09f81821f8ee726d567eeeff52626f
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 18:49:50 2009 +0100

    1 arg per line in function signatures.

 tests/wocky-test-connector-server.c |   20 ++++++++++++++------
 tests/wocky-test-connector-server.h |    7 +++++--
 2 files changed, 19 insertions(+), 8 deletions(-)

commit 3084eae34c36f0aca0e5f08fcdcccb62b0d6e652
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 18:41:12 2009 +0100

    Removed 'tls' node variable from xmpp_features_cb

 wocky/wocky-connector.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

commit 8b39bee9a61c3a276fe3877e723fa33943814399
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 18:36:16 2009 +0100

    Function signatures reformatted to be 1 arg per line.

 wocky/wocky-connector.c |   36 ++++++++++++++++++++++++++----------
 wocky/wocky-connector.h |    6 ++++--
 2 files changed, 30 insertions(+), 12 deletions(-)

commit 6fde7bb9a614c86a9c8d240d22e57cedc3cde941
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 18:29:04 2009 +0100

    Rename error constant more accurately.
    Abort on connect_async if our state indicates we are already underway.

 wocky/wocky-connector.c |   10 +++++++++-
 wocky/wocky-connector.h |    2 +-
 2 files changed, 10 insertions(+), 2 deletions(-)

commit caa4950f376eb6287d9747aa627500c375737681
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 18:13:45 2009 +0100

    g_assert_not_reached + explanatory comment in xmpp_init_recv_cb
    
    minor whitespace cleanup.

 wocky/wocky-connector.c |   10 +++++++---
 1 files changed, 7 insertions(+), 3 deletions(-)

commit f26489168df374fca73918673f7fd8b7616c0350
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 18:06:18 2009 +0100

    Comments explaining the logic by which we choose XMPP server hosts to talk to.

 wocky/wocky-connector.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit f6350456ab3a76aa6cbfa2138064b55e96c2d3df
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 17:59:30 2009 +0100

    Renamed finalise to match incorrect spelling in glib standard.

 wocky/wocky-connector.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 357e3a1591e123a267d13814f8235d2bcc4e131c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 17:58:11 2009 +0100

    Define _new and _new_full constructors as per review.

 wocky/wocky-connector.c |   33 ++++++++++++++++++++++++++++++++-
 wocky/wocky-connector.h |   11 +++++++++++
 2 files changed, 43 insertions(+), 1 deletions(-)

commit 597f870b6028156c9dd0d533eace2ae46b535149
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 16:50:55 2009 +0100

    Style cleanups.
    Use new server-side starttls support to initialise TLS upon
    receipt of client request.
    Hand over to sasl auth server on receipt of <auth… request.

 tests/wocky-test-connector-server.c |   92 ++++++++++++++++++++++++----------
 tests/wocky-test-connector-server.h |    5 ++-
 2 files changed, 69 insertions(+), 28 deletions(-)

commit 23878b8f51d4fb8c01bd22dc9fa419d26c7558e9
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 16:46:53 2009 +0100

    Finish modifying wocky-test-sasl-auth-server.c so that it can take
    over an existing WockyXmppConnection at the point where an <auth…
    request has been received.

 tests/wocky-test-sasl-auth-server.c |   33 ++++++++++++++++++++-------------
 tests/wocky-test-sasl-auth-server.h |    8 +++++---
 tests/wocky-test-sasl-auth.c        |    4 ++--
 3 files changed, 27 insertions(+), 18 deletions(-)

commit b053a1f5f9084148f87e8424488fb6b9943b4496
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 16:02:57 2009 +0100

    Unnecessary if () removed.

 wocky/wocky-connector.c |   11 +++--------
 1 files changed, 3 insertions(+), 8 deletions(-)

commit 883038030d8ea49fd1c7f238de9f7a351603ff54
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 16:02:18 2009 +0100

    whitespace cleanup.

 examples/connect.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 2b9277ba2d080219e5ef3e1343841cad48aceed7
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 15:07:02 2009 +0100

    Begin modification of wocky-test-sasl-auth… et al to allow its
    funcitonality to be shared by wocky-test-connector… and any other
    tests that need it: Exposed feature sasl mechanism population
    to externl users, altered test_sasl_auth_server_new so it does not
    immediately try to take over the test XMPP connection.

 tests/wocky-test-sasl-auth-server.c |  103 ++++++++++++++++++++++-------------
 tests/wocky-test-sasl-auth-server.h |    8 +++-
 tests/wocky-test-sasl-auth.c        |    4 +-
 3 files changed, 73 insertions(+), 42 deletions(-)

commit 9c44590b67848d35a65fe72b9542a97b32fd5bdd
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 11 12:06:07 2009 +0100

    Renamed next_state to more descriptive xmpp_init, added comments describing
    XMPP stream init stages therein.

 tests/wocky-test-connector-server.c |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

commit 38e422bae84cec26e0259c0fe49890160bbd0356
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 10 18:57:20 2009 +0100

    Dummy XMPP Server for Connector tests (not complete yet)
    Will eventually absorb the sasl server, which will provide
    the sasl portion of the tests, but will no longer need to
    do the rest of the stream open etc.

 tests/Makefile.am                   |    2 +
 tests/wocky-test-connector-server.c |  308 +++++++++++++++++++++++++++++++++++
 tests/wocky-test-connector-server.h |   74 +++++++++
 3 files changed, 384 insertions(+), 0 deletions(-)

commit 23d996360c91b43b182158a3a81dde97d0c23e11
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 10 18:54:57 2009 +0100

    Add debug flag for connector
    Last round of cleanups introduced a couple of build warnings/breakages. Fixed.

 wocky/wocky-connector.c |   12 ++++++++++--
 wocky/wocky-debug.h     |    1 +
 2 files changed, 11 insertions(+), 2 deletions(-)

commit 6c45f6736242b19d86d03b33bc4b2dce685309c4
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:24:32 2009 +0100

    abort_connect uses g_simple_async_result_complete_in_idle now.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 965083217bffc0ed9a91e7f382200b43f31ed484
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:21:30 2009 +0100

    DEBUG preferred over g_warning

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 177d9677564f0de019152bfbef0f4fe9e7ad2881
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:20:29 2009 +0100

    Stray whitespace.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 87b723a54bc7be661e3fd1cfa54c6290d2b64b79
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:18:58 2009 +0100

    wocky_strdiff preferred over strcmp

 wocky/wocky-connector.c |   18 ++++++++++++------
 1 files changed, 12 insertions(+), 6 deletions(-)

commit d9402fe39326b7ee330a5ad19a6545a5ce6124e8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:07:24 2009 +0100

    Explicit test for ptr == NULL

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a2eef74bdb45c4ed1c58d0e0e2148a5921956388
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:06:15 2009 +0100

    Removed domain and numeric code from error messages (per review).

 wocky/wocky-connector.c |   10 +++-------
 1 files changed, 3 insertions(+), 7 deletions(-)

commit 19e4414a6d3addae37c2bebfa225ea5730688956
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:02:26 2009 +0100

    DEBUG preferred over g_message

 wocky/wocky-connector.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 452146fc1d6052b8156d761a4c72d5fb7b0b77b6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 18:01:15 2009 +0100

    Comment explaining 'host' in wocky_connector_connect_async

 wocky/wocky-connector.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit e6dcb5a2ef999c158c82e72117312205017d6c52
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 17:59:45 2009 +0100

    Typo in comment.
    
    Moved gfree() calls to finalise method (from dispose).

 wocky/wocky-connector.c |   18 +++++++++++-------
 1 files changed, 11 insertions(+), 7 deletions(-)

commit 9c16b186fa774ec0b1c45bd9565093db7c77c4e5
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 17:47:08 2009 +0100

    More style changes per review.

 wocky/wocky-connector.c |  101 ++++++++++++++++++++++++-----------------------
 1 files changed, 52 insertions(+), 49 deletions(-)

commit 382ef04cb5fd1af9e0535c68c4207b67e300a467
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 17:33:47 2009 +0100

    Explain WOCKY_CONNECTOR_CHOOSE_BY_STATE macro.

 wocky/wocky-connector.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit 858060449b818bb8f4223a28a4c9fdcd53f821e6
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 17:26:28 2009 +0100

    Use g_object_new now that wocky_connector_new is gone.

 examples/connect.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 8c98ef4cd5c1378c33004a6d48e987fc72fe14e2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 17:26:05 2009 +0100

    finalise and dispose methods should be static.

 wocky/wocky-connector.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit a5ff119131f8309691635742af685861be799e14
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 9 17:25:36 2009 +0100

    Style changes from review, unexport a couple of functions
    which should have been private.
    
    Remove wocky_connector_new as per review.

 wocky/wocky-connector.h |   30 +++++++++++-------------------
 1 files changed, 11 insertions(+), 19 deletions(-)

commit 6c0b35c2c0fa0c194ccb4abc1cbefcec9dbf6cc8
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 4 19:14:15 2009 +0100

    Add command line parameter to choose 'raw' vs 'connector' XMPP connect.
    Add code for 'connector' XMPP connect using wocky connector object.

 examples/connect.c |   32 ++++++++++++++++++--------------
 1 files changed, 18 insertions(+), 14 deletions(-)

commit 3790fb59b23c02299339ff73e767a318fbc9b919
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 4 19:12:51 2009 +0100

    Fix wocky_connector_new to correctly call g_object_new
    Fix xmpp_features_cb logic for case when we have already starttls'd
    password/jid property overwrite bug fixed
    default XMPP port set to 5222

 wocky/wocky-connector.c |   42 +++++++++++++++++++++++++++++-------------
 wocky/wocky-connector.h |    3 ++-
 2 files changed, 31 insertions(+), 14 deletions(-)

commit cfcb2772dcba0c227ecf11ee247f179030fd1b1b
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Thu Jun 4 13:43:20 2009 +0100

    First (working?) draft of connector with standard async/finish
    connect mechanism and updated exmaple connect script.

 examples/connect.c      |   51 ++++++++++++--
 wocky/wocky-connector.c |  172 ++++++++++++++++++++++++++---------------------
 wocky/wocky-connector.h |    7 +-
 3 files changed, 142 insertions(+), 88 deletions(-)

commit 475d37909db72097cfec759b2b01d43a77c88af2
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Wed Jun 3 19:57:20 2009 +0100

    Use standard gasync callback mechanism for aborts, with GErrors
    check in header file for connector
    Add to makefile.
    Nearly working.

 wocky/Makefile.am       |    2 +
 wocky/wocky-connector.c |  542 ++++++++++++++++++++++++++++++-----------------
 wocky/wocky-connector.h |  113 ++++++++++
 3 files changed, 458 insertions(+), 199 deletions(-)

commit 7ff5c9dd7fbe707a53d060c3c7654b1c4ff0a98c
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Tue Jun 2 11:33:43 2009 +0100

    Add the quark for connector's error domain.

 wocky/wocky-connector.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit c5a2627ea66a7f4ef9f5107d5e67577e6dc3de49
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 1 16:48:03 2009 +0100

    Fix conditionals to be explicit comparisons for non booleans,
    except where prior examples indicate this is not house style.
    
    More paren style fixups.

 wocky/wocky-connector.c |   37 +++++++++++++++++++------------------
 1 files changed, 19 insertions(+), 18 deletions(-)

commit 2e845740d5053db97c35cc9ac5e26e4a00b8d527
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 1 16:06:48 2009 +0100

    Typo, missing member in LHS of assignment.

 wocky/wocky-connector.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 19c37059f9831ff2a43fe6152fef3d8558217002
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 1 15:56:43 2009 +0100

    Whitespace cleanup.
    Paren style cleanup.

 wocky/wocky-connector.c |  292 +++++++++++++++++++++++-----------------------
 1 files changed, 146 insertions(+), 146 deletions(-)

commit a9b92bc922f94e33f06d6ca9f195a4471a3f515a
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 1 15:29:18 2009 +0100

    comment style // → /* */
    removed WOCKY_CONNECTOR_UNPACK macro.

 wocky/wocky-connector.c |  117 ++++++++++++++++++++++++++---------------------
 1 files changed, 65 insertions(+), 52 deletions(-)

commit 36c461f9c3da62b179e5581cc8e8262eff88e8ec
Author: Vivek Dasmohapatra <vivek@collabora.co.uk>
Date:   Mon Jun 1 11:23:46 2009 +0100

    Rough (almost complete) draft of wocky connector.

 wocky/wocky-connector.c |  608 +++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 608 insertions(+), 0 deletions(-)

commit b16a9a948ce8086aa9aeec9c14ccbb1762cce335
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 14 17:20:51 2009 +0100

    add test_close_simultanously

 tests/wocky-porter-test.c |   54 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 54 insertions(+), 0 deletions(-)

commit af30ecf5fad7d8f975ec24fa8f0d051454e0c4fd
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 14 17:20:06 2009 +0100

    Don't complete close operation if the close stanza has not been sent yet

 wocky/wocky-porter.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 1e02cd7bdc0536dba4402c67663963484bacd819
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 14 17:18:37 2009 +0100

    complete_close: set close_result to NULL before unreffing it
    
    If the result owns the last reference on the porter, it will be
    destroyed and the dispose function will try to unref it too.

 wocky/wocky-porter.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 38bee928e048f9d5fd5d04590a52a06f2a05c7e7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 13 15:00:48 2009 +0100

    wocky-porter-test: add test_unref_when_closed

 tests/wocky-porter-test.c |   40 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 40 insertions(+), 0 deletions(-)

commit 52b07eda1b27c3d77dda2ed233e321497081e510
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 14 11:57:38 2009 +0100

    stanza_received_cb: ensure that the porter stays alive during the treatment of the error or stanza

 wocky/wocky-porter.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 91bfd7438e4f14ee8f7859d58e38b2be5a6c9d45
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jul 13 14:49:25 2009 +0100

    teardown_test: check if porters have already been unreffed

 tests/wocky-test-helper.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit bc8c40454043b536867fb763148897f309ea8076
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Tue Jul 14 12:07:17 2009 +0100

    Test sending an reply to an IQ with no "to" attribute.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 tests/wocky-xmpp-stanza-test.c |   24 ++++++++++++++++++++++++
 1 files changed, 24 insertions(+), 0 deletions(-)

commit 9d815d0d07ffa2f4bec084e41999e6980928b4a9
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Tue Jul 14 12:01:04 2009 +0100

    It's fine for IQs to have no "to" attribute.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-xmpp-stanza.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 43ddc3fbc7e02c7905361d749ae9c606cc944a70
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jul 2 17:23:14 2009 +0100

    test_send_iq: test sending a reply without id

 tests/wocky-porter-test.c |    9 ++++++++-
 1 files changed, 8 insertions(+), 1 deletions(-)

commit d436196deca91660702aca5d3d4930e4ff17290a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jul 2 17:23:01 2009 +0100

    handle_iq_reply: ignore reply without id

 wocky/wocky-porter.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 5b472f2cc0ec48664702b067981bc06cfd97fe4d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jul 2 14:46:35 2009 +0100

    add test_send_iq_server

 tests/wocky-porter-test.c |   88 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 88 insertions(+), 0 deletions(-)

commit b96a2e212eefacbd0faf77d9beb795aece37000a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jul 2 14:46:23 2009 +0100

    Allow to send IQ without a recipient

 wocky/wocky-porter.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

commit 75ac0432ad2d6cab23607eaa2b087569bc74401b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jul 2 12:34:16 2009 +0100

    test_send_invalid_iq: sending an IQ without a recipient is actually valid

 tests/wocky-porter-test.c |   10 ----------
 1 files changed, 0 insertions(+), 10 deletions(-)

commit 4717b4ea04f5e4c17b71ff8a6c1960d737fc0803
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Jul 2 15:03:03 2009 +0100

    Ignore warnings from the parser

 wocky/wocky-xmpp-reader.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 3419d60c7e3dc24dd2b6f6c77d0155c6f65c990d
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Jul 2 14:49:33 2009 +0100

    Add a test for parsing the vcard namespace

 tests/wocky-xmpp-reader-test.c |   46 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 46 insertions(+), 0 deletions(-)

commit fa10cb3d750f503492aace17320761f95202aa26
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 14:57:31 2009 +0100

    wocky_xmpp_stanza_build's spec argument should be of type WockyBuildTag, not guint.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-xmpp-stanza.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 33e5bf5b1f9597322b671761d6d2bd79f09e43b7
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 12:52:25 2009 +0100

    Updated .gitignore.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e27678c589afa336366bfa02dd15679285648ba3
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 12:09:14 2009 +0100

    Add some porter tests to test handling unset from attribute stanzas.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 tests/wocky-porter-test.c |   72 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 72 insertions(+), 0 deletions(-)

commit c6dc106c85ea2931b52d426e81ce2e9db7244bf7
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Thu Jul 2 11:10:07 2009 +0100

    Don't discard the stanza if the from attribute is missing.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 wocky/wocky-porter.c |   12 +++++-------
 1 files changed, 5 insertions(+), 7 deletions(-)

commit 43d8fcaae57d93ea2fb3dc0a8939dce0b068d392
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jul 2 11:39:04 2009 +0100

    send_cancelled_cb: gio convention is to complete cancel callback in idle

 wocky/wocky-porter.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bf24846fa5d8220cdfe5b451c97ffe5cf808f628
Merge: 2f77013 9d41bac
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 1 15:36:14 2009 +0100

    Merge branch 'master' of git+ssh://git.collabora.co.uk/git/wocky

commit 2f77013fb3f9a56b7d698969dcfffa8e3d4f14ea
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 1 14:35:33 2009 +0100

    wocky_porter_send_iq_finish returns a reffed stanza

 tests/wocky-porter-test.c |    1 +
 wocky/wocky-porter.c      |    6 +++++-
 2 files changed, 6 insertions(+), 1 deletions(-)

commit 9d41bac3ef7bc2932cf0b6b6c7fa47615362d7d4
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Wed Jul 1 15:16:16 2009 +0100

    Add flymake rules to wocky Makefiles.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 tools/Makefile.am |    3 ++-
 tools/flymake.mk  |    4 ++++
 wocky/Makefile.am |    1 +
 3 files changed, 7 insertions(+), 1 deletions(-)

commit 8828e61ed4d33c48ba8457c9de296b783de865dc
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Sat Apr 25 15:22:28 2009 +0100

    Shave wocky's build.
    
    Signed-off-by: Jonny Lamb <jonny.lamb@collabora.co.uk>

 .gitignore        |    3 +
 autogen.sh        |    9 ++++
 configure.ac      |    4 ++
 m4/Makefile.am    |    3 +-
 m4/shave.m4       |  102 +++++++++++++++++++++++++++++++++++++++++++++++++
 shave-libtool.in  |  109 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 shave.in          |  109 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 tools/Makefile.am |    3 +-
 tools/shave.mk    |    1 +
 wocky/Makefile.am |   12 +++--
 10 files changed, 348 insertions(+), 7 deletions(-)

commit 356c1ab206aa8a84e2635d170ca9ba2bb3e7a433
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 30 17:49:00 2009 +0100

    wocky-xmpp-connection-test: add test_recv_simple_message_in_one_chunk

 tests/wocky-xmpp-connection-test.c |   37 ++++++++++++++++++++++++++++++++++++
 1 files changed, 37 insertions(+), 0 deletions(-)

commit 32395928ff99abc56083896e7d6ac8d0d4e743a7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 1 10:24:03 2009 +0100

    use input_is_closed function instead of the priv->input_closed variable

 wocky/wocky-xmpp-connection.c |   21 +++++++++++----------
 1 files changed, 11 insertions(+), 10 deletions(-)

commit 3f2743e4a0e799765ab99ba413ab9b0e9ddc6ff0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 30 17:32:04 2009 +0100

    wocky_xmpp_connection_recv_stanza_async: succeed immediately if there is already a stanza ready

 wocky/wocky-xmpp-connection.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit 84198bf2e9198ecd864a8c334ad145f5edeea513
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 29 13:40:51 2009 +0100

    add FIXME about g_cancellable_disconnect

 wocky/wocky-porter.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 371ad0e3356de514c5f780b407e94716cc0d5552
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Sat Jun 27 19:41:26 2009 +0100

    Implement async writing to prevent race conditions

 tests/wocky-test-stream.c |   73 ++++++++++++++++++++++++++++++++-------------
 1 files changed, 52 insertions(+), 21 deletions(-)

commit eb76a78ad499aa6a513fc567b9abd053e8a5c481
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 29 13:34:57 2009 +0100

    wocky_porter_send_async: don't connect the cancelled signal if we just sent the stanza

 wocky/wocky-porter.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 2f32243f9db6cc4e75aec29ff1e75ee9b9fc6081
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 29 13:29:13 2009 +0100

    Use g_cancellable_connect
    
    We don't use g_cancellable_disconnect for now because it raises a
    deadlock in our code (#587300)

 wocky/wocky-porter.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 569fb339bf8cfa772aae53e72c51f2c7ae24734f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 29 12:33:57 2009 +0100

    test_cancel_sent_stanza_cancelled: wocky_porter_send_finish returns success if the stanza was actually sent

 tests/wocky-porter-test.c |    8 +++-----
 1 files changed, 3 insertions(+), 5 deletions(-)

commit d34c92758323300164afd5b09a22932cc1823ae4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 29 12:32:02 2009 +0100

    send_head_stanza: delegate the handling of the cancellable to lower layer when we start sending the stanza

 wocky/wocky-porter.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 63fb71126dc28e35acfe30a6fa6dd09d4a19a597
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 29 12:34:48 2009 +0100

    rename WockyXmppScheduler to WockyPorter

 .gitignore                        |    2 +-
 tests/Makefile.am                 |    6 +-
 tests/wocky-porter-test.c         | 1596 +++++++++++++++++++++++++++++++++++++
 tests/wocky-test-helper.c         |   20 +-
 tests/wocky-test-helper.h         |   10 +-
 tests/wocky-xmpp-scheduler-test.c | 1596 -------------------------------------
 wocky/Makefile.am                 |    4 +-
 wocky/wocky-debug.c               |    2 +-
 wocky/wocky-debug.h               |    2 +-
 wocky/wocky-porter.c              | 1115 ++++++++++++++++++++++++++
 wocky/wocky-porter.h              |  141 ++++
 wocky/wocky-xmpp-scheduler.c      | 1115 --------------------------
 wocky/wocky-xmpp-scheduler.h      |  141 ----
 13 files changed, 2875 insertions(+), 2875 deletions(-)

commit ddaea75f12183945f9ecf545d96fa644c9a82c3a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 17:56:40 2009 +0100

    update gitignore

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 1da8026c90d86494ded5cb1d50f8fb5023296d4a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 17:56:19 2009 +0100

    generate wocky/wocky-uninstalled.pc

 configure.ac |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 8599e4f0b48f75ae8030bdd01eb1095e4a186c03
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 17:56:10 2009 +0100

    add wocky-uninstalled.pc.in

 wocky/wocky-uninstalled.pc.in |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit d1f37075cb7104cedb21fdcfa81ac807d881b4e9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 17:37:20 2009 +0100

    configure.ac: fix version

 configure.ac |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit bcba747e07b1f425bbd505222e80a3f1d7902a97
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 26 10:13:13 2009 +0100

    rename wocky_xmpp_scheduler_send_full_finish to wocky_xmpp_scheduler_send_finish

 tests/wocky-xmpp-scheduler-test.c |   14 +++++++-------
 wocky/wocky-xmpp-scheduler.c      |    8 ++++----
 wocky/wocky-xmpp-scheduler.h      |    2 +-
 3 files changed, 12 insertions(+), 12 deletions(-)

commit 24ce2601032a498a9d87c9e0bde9cbc89f3be9ec
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 12:01:25 2009 +0100

    add test_send_invalid_iq

 tests/wocky-xmpp-scheduler-test.c |   68 +++++++++++++++++++++++++++++++++++++
 1 files changed, 68 insertions(+), 0 deletions(-)

commit ac3ce92c60f34ef3a7e21cdf4260dc3615af7021
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 12:01:20 2009 +0100

    wocky_xmpp_scheduler_send_iq_async: check the recipient before the ID so we won't leak it if recipient is invalid

 wocky/wocky-xmpp-scheduler.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit e2145cf38054ae1ba6089a0c7dabfb472e22539a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 11:44:42 2009 +0100

    add test_handler_filter

 tests/wocky-xmpp-scheduler-test.c |   80 +++++++++++++++++++++++++++++++++++++
 1 files changed, 80 insertions(+), 0 deletions(-)

commit 946cfd90a9726928b5750c7836fc540a353263be
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 11:44:30 2009 +0100

    handlers now return TRUE if they actually handled the stanza

 tests/wocky-xmpp-scheduler-test.c |   42 ++++++++++++++++++++++++------------
 wocky/wocky-xmpp-scheduler.c      |   13 ++++++-----
 wocky/wocky-xmpp-scheduler.h      |    2 +-
 3 files changed, 36 insertions(+), 21 deletions(-)

commit e4a63e4c97552204c4709ae756809784c7114e3b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 11:23:07 2009 +0100

    register the IQ reply handler as a normal handler

 wocky/wocky-xmpp-scheduler.c |   29 ++++++++++++++++++-----------
 1 files changed, 18 insertions(+), 11 deletions(-)

commit 0af1eccebdb8d550970794db0db1d5fc6cbe1ee6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 11:15:15 2009 +0100

    add some handler priority presets

 wocky/wocky-xmpp-scheduler.h |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 3c49a7e075450f6a9370cd2b03dfd17b8f1da2c0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 14:29:01 2009 +0100

    wocky_xmpp_scheduler_send_iq_async: ignore preset ID attribute if there is one

 wocky/wocky-xmpp-scheduler.c |   17 ++++++-----------
 1 files changed, 6 insertions(+), 11 deletions(-)

commit 7b3542c17531cbfc2c55f4456b63f6bf6f7a30c8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 12:11:52 2009 +0100

    wocky_xmpp_scheduler_send_iq_async: check if ID isn't used yet

 wocky/wocky-xmpp-scheduler.c |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

commit 328690baea6ccb5da08fa1d48c19f4252e87968c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 12:08:22 2009 +0100

    use wocky_xmpp_connection_new_id instead of generating the ID in the scheduler

 wocky/wocky-xmpp-scheduler.c |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

commit 9b929be645f1578df04300b0b225e7c895968dc6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 12:05:01 2009 +0100

    iq_sent_cb: check the error code instead of relying of the presence of the iq handler in the hash table

 wocky/wocky-xmpp-scheduler.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

commit 6222ddbc595eddbd1670371bb2df5833b171b8e4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 10:56:55 2009 +0100

    test_send_iq: send an IQ without ID

 tests/wocky-xmpp-scheduler-test.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 21be24c2d4f8f3635fca9cb42398222d55c79dbf
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 10:56:40 2009 +0100

    wocky_xmpp_scheduler_send_iq_async: generate an ID if the IQ doesn't have one yet

 wocky/wocky-xmpp-scheduler.c |   23 +++++++++++++++++------
 1 files changed, 17 insertions(+), 6 deletions(-)

commit 4e7cefbf56f54a340821e4deec8a12a9b98deb63
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 10:49:00 2009 +0100

    test_send_iq: rely on the type of IQ instead of its id to check if we cancel it or not

 tests/wocky-xmpp-scheduler-test.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 1e0e3a4a8fd20074f9238d584c28ff9a3c0b770a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 15:13:04 2009 +0100

    test that spoofed IQ replies are ignored

 tests/wocky-xmpp-scheduler-test.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 8cb93b4f85eb15e954bf7b11426dbaf32acfae1d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 15:12:48 2009 +0100

    prevent IQ reply spoofing

 wocky/wocky-xmpp-scheduler.c |   24 ++++++++++++++++++++----
 1 files changed, 20 insertions(+), 4 deletions(-)

commit 545c2dfec60df7d649d371242c5aa6a95ab47887
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 15:02:41 2009 +0100

    Use only the IQ ID as handler IQ key

 wocky/wocky-xmpp-scheduler.c |   79 +++++++++++++++---------------------------
 1 files changed, 28 insertions(+), 51 deletions(-)

commit 8bc8965e10b1fbf7c5d1fa5a29e1919fb60549ed
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 14:31:58 2009 +0100

    add test_send_iq_error

 tests/wocky-xmpp-scheduler-test.c |   45 +++++++++++++++++++++++++++++++++++++
 1 files changed, 45 insertions(+), 0 deletions(-)

commit ddc3d553cd3fd4537be871bb1c8a60551cee128c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 14:31:48 2009 +0100

    wocky_xmpp_scheduler_send_iq_async: raise an error if sending goes wrong

 wocky/wocky-xmpp-scheduler.c |   46 ++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 44 insertions(+), 2 deletions(-)

commit 109d9abcb38bad4e37003afd2129cea4263bc4fc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 18:37:36 2009 +0200

    test_send_iq: test cancelling an already sent IQ

 tests/wocky-xmpp-scheduler-test.c |   43 +++++++++++++++++++++++++++++++++++-
 1 files changed, 41 insertions(+), 2 deletions(-)

commit 4ec779993857867d868a8a6d2e5ebc5ffd91056a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 18:35:34 2009 +0200

    remove the iq handler when its cancellable is cancelled

 wocky/wocky-xmpp-scheduler.c |   47 +++++++++++++++++++++++++++++++++++++++--
 1 files changed, 44 insertions(+), 3 deletions(-)

commit 2b01e589b85efc858b507fe6a85a719ffcdf0278
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 18:33:59 2009 +0200

    handle_iq_reply: don't leak the handler_id if there is no handler

 wocky/wocky-xmpp-scheduler.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 4610c7de8fcd5db2f91fa9cd1e5e9eed9e2e8959
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 17:45:06 2009 +0200

    wocky_xmpp_scheduler_send_iq_async: use a GAsyncReadyCallback as reply callback

 tests/wocky-xmpp-scheduler-test.c |   48 ++++++----------------------------
 wocky/wocky-xmpp-scheduler.c      |   51 ++++++++++++++++++++++++-------------
 wocky/wocky-xmpp-scheduler.h      |   12 +++-----
 3 files changed, 47 insertions(+), 64 deletions(-)

commit 96b1a7ae77f5925d062f755368d6f236f66664b8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 15:04:04 2009 +0200

    rename wocky_xmpp_scheduler_send_with_reply_async to wocky_xmpp_scheduler_send_iq_async

 tests/wocky-xmpp-scheduler-test.c |   22 +++++++++++-----------
 wocky/wocky-xmpp-scheduler.c      |    2 +-
 wocky/wocky-xmpp-scheduler.h      |    2 +-
 3 files changed, 13 insertions(+), 13 deletions(-)

commit c1bd573248240028c76a80ba1bbe5a2566c992b2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 12:05:19 2009 +0200

    test to cancel an IQ reply cb

 tests/wocky-xmpp-scheduler-test.c |   28 +++++++++++++++++++++++++++-
 1 files changed, 27 insertions(+), 1 deletions(-)

commit 721b0b8ccbcff5e2c4a7e119a9a6ce6da30f5281
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 12:03:25 2009 +0200

    Don't call the IQ reply callback if it has been cancelled

 wocky/wocky-xmpp-scheduler.c |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

commit f62c98d0a19a8adf497c5f8c8340f5dcbd284a60
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 18 17:20:13 2009 +0100

    add test_send_with_reply

 tests/wocky-xmpp-scheduler-test.c |   97 +++++++++++++++++++++++++++++++++++++
 1 files changed, 97 insertions(+), 0 deletions(-)

commit 483aaf0df8f1ab497eb542252e254c9f94f2111c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 18 17:29:14 2009 +0100

    Implement wocky_xmpp_scheduler_send_with_reply_async

 wocky/wocky-xmpp-scheduler.c |  134 ++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-scheduler.h |   14 +++++
 2 files changed, 148 insertions(+), 0 deletions(-)

commit 484ce52850f6600d52074110ccebb2640564438a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 14:23:36 2009 +0100

    add test_set_attribute

 tests/wocky-xmpp-node-test.c |   32 ++++++++++++++++++++++++++++++++
 1 files changed, 32 insertions(+), 0 deletions(-)

commit f52003a111d3b82d8e63b0eef88e0507f5f39cba
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 14:23:30 2009 +0100

    wocky_xmpp_node_set_attribute_n_ns: remove old attribute if needed

 wocky/wocky-xmpp-node.c |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

commit 110567f60b21ce9edb85d4e5897ddb3e9bb65374
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 14:22:43 2009 +0100

    wocky-xmpp-node: factor out attribute_free

 wocky/wocky-xmpp-node.c |   12 +++++++++---
 1 files changed, 9 insertions(+), 3 deletions(-)

commit 933bc0eae3bd039207dd33a1e6c4e8144f391aab
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 14:01:31 2009 +0100

    test_node_equal: remove useless parenthesis

 tests/wocky-xmpp-node-test.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit a9f0ba9ddf5bebbe3603425ed73c002be6be0332
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 25 13:56:42 2009 +0100

    fix typo in test name

 tests/wocky-xmpp-node-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a786cdf413f3c8c850520d7fee4b2886bb7c3f0b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 13:21:11 2009 +0100

    test_cancel_sent_stanza_cancelled: don't leak the error

 tests/wocky-xmpp-scheduler-test.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 974ff9956518fabd858bb9d70b95491ef6139339
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 13:18:05 2009 +0100

    wocky-xmpp-scheduler-test: add test_writing_error

 tests/wocky-xmpp-scheduler-test.c |   43 +++++++++++++++++++++++++++++++++++++
 1 files changed, 43 insertions(+), 0 deletions(-)

commit 482f36297ffbc2f513ded8ca56cbd59a6445f1ef
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 24 13:17:44 2009 +0100

    add wocky_test_output_stream_set_write_error to emulate writing errors

 tests/wocky-test-stream.c |   21 ++++++++++++++++++++-
 tests/wocky-test-stream.h |    2 ++
 2 files changed, 22 insertions(+), 1 deletions(-)

commit a19964c4403fdcc697f84105afc9be17e3967bab
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 15:10:44 2009 +0200

    test wocky_xmpp_stanza_build_iq_error

 tests/wocky-xmpp-stanza-test.c |   59 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 59 insertions(+), 0 deletions(-)

commit 3a22650fa8a8055f917667089d3589c90b74a13d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 15:10:24 2009 +0200

    add wocky_xmpp_stanza_build_iq_error

 wocky/wocky-xmpp-stanza.c |   15 +++++++++++++++
 wocky/wocky-xmpp-stanza.h |    3 +++
 2 files changed, 18 insertions(+), 0 deletions(-)

commit a3e685ea6c29d6724936835bfef48a5a54ef39bc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 14:17:46 2009 +0200

    test wocky_xmpp_stanza_build_iq_result

 tests/wocky-xmpp-stanza-test.c |   59 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 59 insertions(+), 0 deletions(-)

commit 892c0350e3ab8aea585da29e10bb236d7cda5754
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 15:39:47 2009 +0200

    add wocky-xmpp-stanza-test to tests suite

 .gitignore                     |    1 +
 tests/Makefile.am              |    6 +++++-
 tests/wocky-xmpp-stanza-test.c |   19 +++++++++++++++++++
 3 files changed, 25 insertions(+), 1 deletions(-)

commit c144f9005696014e325c316a8d9f3eb19d9e6126
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 14:15:14 2009 +0200

    add wocky_xmpp_stanza_build_iq_result

 wocky/wocky-xmpp-stanza.c |   47 +++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-stanza.h |    3 ++
 2 files changed, 50 insertions(+), 0 deletions(-)

commit 39f0cb5ed4afff87264210d3df7af85dccc278ea
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 14:48:21 2009 +0200

    add a regression test for wocky_xmpp_node_equal

 tests/wocky-xmpp-node-test.c |   25 +++++++++++++++++++++++++
 1 files changed, 25 insertions(+), 0 deletions(-)

commit ac1e6e749cc1d7fd110b7a0506f4e31c31f344e4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 14:46:02 2009 +0200

    wocky_xmpp_node_equal: check if nodes have the same number of attributes
    
    Checking if node1 has all the attributes of node0 is not enough. The
    nodes are different if node1 contains more attributes than node0.

 wocky/wocky-xmpp-node.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 3a728b81379631f9627037e6e13a78d333361d00
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 14:33:19 2009 +0200

    add wocky-xmpp-node-test to tests suite

 .gitignore                   |    1 +
 tests/Makefile.am            |    6 +++++-
 tests/wocky-xmpp-node-test.c |   19 +++++++++++++++++++
 3 files changed, 25 insertions(+), 1 deletions(-)

commit 750c8d1db07544dc9d16e6fa13e21de4fca2adec
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 10:19:13 2009 +0200

    add a regression test: test_cancel_sent_stanza

 tests/wocky-xmpp-scheduler-test.c |   60 +++++++++++++++++++++++++++++++++++++
 1 files changed, 60 insertions(+), 0 deletions(-)

commit e5feb9d157d9a4c9e2d25109b2098516da41dabf
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 10:16:44 2009 +0200

    send_stanza_cb: elem can be NULL if the sending operation has been cancelled
    
    elem is removed from the queue when the cancellable is cancelled.
    So, if the user cancels the sending operation when the stanza has been sent
    but before send_stanza_cb is called, then elem won't be in the queue
    anymore.

 wocky/wocky-xmpp-scheduler.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit f52286df5a3cfe0a9304ff948e20b7a512b539f8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 18:53:53 2009 +0200

    wocky-xmpp-scheduler-test: use test->cancellable

 tests/wocky-xmpp-scheduler-test.c |   19 +++++--------------
 1 files changed, 5 insertions(+), 14 deletions(-)

commit 909c3e39a9153c228428aec5c495e7a9c54da3f2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 22 18:31:53 2009 +0200

    add a cancellable to test_data_t

 tests/wocky-test-helper.c |    3 +++
 tests/wocky-test-helper.h |    1 +
 2 files changed, 4 insertions(+), 0 deletions(-)

commit 54630fde66560b0f651e95f051adc941f7c1ae07
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 10:25:07 2009 +0200

    Increase the test timer
    
    1 second was too short and timer was generally fired when running tests
    with valgrind.

 tests/wocky-test-helper.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 861dbe33d1b09dd9577fc952d3cca0120702f6e5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 23 10:22:14 2009 +0200

    add myself to AUTHORS

 AUTHORS |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit d1ba44aa011221559143bdd54b72eaaac0dfcf0b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 18 17:02:52 2009 +0100

    close_sent_cb: check if close operation hasn't be completed yet
    
    If we receive the other side close before we finished to send yours, the
    close operation would be already completed.

 wocky/wocky-xmpp-scheduler.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

commit 706f10f27c2c78b3998ca94a00ae712d95221a79
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 18 16:58:11 2009 +0100

    add test_close_both_schedulers test helper

 tests/wocky-test-helper.c |   12 ++++++++++++
 tests/wocky-test-helper.h |    2 ++
 2 files changed, 14 insertions(+), 0 deletions(-)

commit c802c013650643d3c8a9ce45906a70a6694dbdb4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 18 17:35:08 2009 +0100

    unref the stanza in test_expected_stanza_received

 tests/wocky-test-helper.c         |    1 +
 tests/wocky-xmpp-scheduler-test.c |    7 ++++---
 2 files changed, 5 insertions(+), 3 deletions(-)

commit e8d0683759fc59c4d834797c68bbc5d1f0073689
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 14:30:24 2009 +0100

    add test_handler_stanza

 tests/wocky-xmpp-scheduler-test.c |  135 +++++++++++++++++++++++++++++++++++++
 1 files changed, 135 insertions(+), 0 deletions(-)

commit 6e3d2a45d156e8a84cb850783fd48500fc49e432
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 14:30:09 2009 +0100

    check if stanzas match with the one passed when registering the handler

 wocky/wocky-xmpp-scheduler.c |   25 ++++++++++++++++++++-----
 wocky/wocky-xmpp-scheduler.h |    2 +-
 2 files changed, 21 insertions(+), 6 deletions(-)

commit 253d6a320965c178613bddb916aac86d63f88fbe
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 14:24:55 2009 +0100

    add wocky_xmpp_node_is_superset

 wocky/wocky-xmpp-node.c |   62 +++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-node.h |    3 ++
 2 files changed, 65 insertions(+), 0 deletions(-)

commit a14a3ab158be85b34a2aea39fadfbdb8079b2eeb
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 18 10:56:24 2009 +0100

    add wocky_xmpp_stanza_build_va

 wocky/wocky-xmpp-stanza.c |   19 +++++++++++++++++--
 wocky/wocky-xmpp-stanza.h |    9 +++++++++
 2 files changed, 26 insertions(+), 2 deletions(-)

commit a46e6125d19b7f9d7e83cc4fab1ed199e5b0a43b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 15:34:10 2009 +0100

    rename wocky_decode_jid arguments according to RFC's names

 wocky/wocky-xmpp-scheduler.c |   38 +++++++++++++++++++-------------------
 1 files changed, 19 insertions(+), 19 deletions(-)

commit fab1c3bc2ccab10d4cdc07b4ac3ade3b8b335a63
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 17:47:50 2009 +0100

    add test_handler_full_jid

 tests/wocky-xmpp-scheduler-test.c |   49 +++++++++++++++++++++++++++++++++++++
 1 files changed, 49 insertions(+), 0 deletions(-)

commit 38ed0c782d3946dfc0b644119a50ee1297c32558
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 17:44:08 2009 +0100

    add test_handler_bare_jid

 tests/wocky-xmpp-scheduler-test.c |   48 +++++++++++++++++++++++++++++++++++++
 1 files changed, 48 insertions(+), 0 deletions(-)

commit 28731a6d72e78550918634f36070e65cd38e1f92
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 17:41:36 2009 +0100

    handle_stanza: filter using the from attribute if needed

 wocky/wocky-xmpp-scheduler.c |   53 ++++++++++++++++++++++++++++++++++++++---
 1 files changed, 49 insertions(+), 4 deletions(-)

commit 82e48db5f9cee80956e0e4a6248032f5c582e336
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 17:48:13 2009 +0100

    add expected arg to send_stanza

 tests/wocky-xmpp-scheduler-test.c |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

commit 9633251d39656ccd0dcda7093362d10b629f73b5
Merge: 1d3c7fe 0ecde94
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 15:31:07 2009 +0100

    Merge branch 'handlers+test-refactoring+remove'

commit 1d3c7fe760dad7e5f45bcfe213b6bc96b62511f3
Merge: e79b6eb 6463811
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 15:28:43 2009 +0100

    Merge branch 'decode-jid'

commit 6463811f41a7f96602d43f2cbd195aa4524a0851
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 15:13:10 2009 +0100

    wocky_decode_jid: assert that at least one output arg is not NULL

 wocky/wocky-utils.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 790b68f5f611fb0eeb2ba0d41119d5e8d4ed9003
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 15:12:22 2009 +0100

    wocky_decode_jid: rename args according to RFC's names

 wocky/wocky-utils.c |   38 +++++++++++++++++++-------------------
 wocky/wocky-utils.h |    6 +++---
 2 files changed, 22 insertions(+), 22 deletions(-)

commit 0ecde940fd71d366474c4f8a7033877149a0c037
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 15:05:22 2009 +0100

    wocky_xmpp_scheduler_unregister_handler: raise a warning if the handler is not registered

 tests/wocky-xmpp-scheduler-test.c |    4 +---
 wocky/wocky-xmpp-scheduler.c      |    8 +++++---
 wocky/wocky-xmpp-scheduler.h      |    2 +-
 3 files changed, 7 insertions(+), 7 deletions(-)

commit e79b6ebd998d4ee3a5142db09fadf4219730c2cc
Merge: 72f1aaa 9228ca5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 14:44:46 2009 +0100

    Merge branch 'handlers+test-refactoring'

commit 72f1aaa92475e068851cb05363dad94a2b07bbaa
Merge: f811427 1ee88a7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 17 14:42:14 2009 +0100

    Merge branch 'handlers'

commit f8114271ed5c26f1837b787c0fba3823ff45ef04
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 12:42:43 2009 +0100

    wocky-xmpp-scheduler: remove unused priv->sending

 wocky/wocky-xmpp-scheduler.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 1ee88a7058f987ea4b26a6e54632c3f7989aa50e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 17:53:12 2009 +0100

    handle_stanza: move wocky_xmpp_stanza_get_type_info out of the for loop

 wocky/wocky-xmpp-scheduler.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 85ea3206514c56d3262bb74ec2e75b848cb65c81
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 16:47:16 2009 +0100

    import wocky_decode_jid from Gabble

 wocky/wocky-utils.c |   88 +++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-utils.h |    5 +++
 2 files changed, 93 insertions(+), 0 deletions(-)

commit 04e0f71576b6f01906ebee414f3f1b009623be83
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 16:30:39 2009 +0100

    add test_unregister_handler

 tests/wocky-xmpp-scheduler-test.c |   58 +++++++++++++++++++++++++++++++++++++
 1 files changed, 58 insertions(+), 0 deletions(-)

commit 36e3d4f7d6a1508e70dc0160dd4833d1fbc23d01
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 16:30:03 2009 +0100

    add wocky_xmpp_scheduler_unregister_handler

 wocky/wocky-xmpp-scheduler.c |   16 ++++++++++++++++
 wocky/wocky-xmpp-scheduler.h |    3 +++
 2 files changed, 19 insertions(+), 0 deletions(-)

commit 9228ca515a7f4379c5655c8d9aab923834d8e648
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 16:08:22 2009 +0100

    use test_expected_stanza_received

 tests/wocky-xmpp-scheduler-test.c |   38 +++---------------------------------
 1 files changed, 4 insertions(+), 34 deletions(-)

commit 9ff3329b355ff03e05f951f481c5f9e737dce776
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 16:07:57 2009 +0100

    add test_expected_stanza_received helper

 tests/wocky-test-helper.c |   14 ++++++++++++++
 tests/wocky-test-helper.h |    3 +++
 2 files changed, 17 insertions(+), 0 deletions(-)

commit 185494031ae6cf60687e652638ff00130a0be120
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 16:01:29 2009 +0100

    factor out send_stanza

 tests/wocky-xmpp-scheduler-test.c |   26 ++++++++++++++------------
 1 files changed, 14 insertions(+), 12 deletions(-)

commit ce3e2b3d4130d048ea3de65525c484ed868fe136
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 15:43:17 2009 +0100

    use test_close_scheduler

 tests/wocky-xmpp-scheduler-test.c |   41 +++---------------------------------
 1 files changed, 4 insertions(+), 37 deletions(-)

commit 3867344f20babf7920151b906eb736e7f05f23d4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 15:40:13 2009 +0100

    add test_close_scheduler helper

 tests/wocky-test-helper.c |   54 +++++++++++++++++++++++++++++++++++++++++++++
 tests/wocky-test-helper.h |    2 +
 2 files changed, 56 insertions(+), 0 deletions(-)

commit 8ec9912ef59216ffcc871dc9f1f7e85250b067d2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 15:14:24 2009 +0100

    add test_handler_priority

 tests/wocky-xmpp-scheduler-test.c |  113 +++++++++++++++++++++++++++++++++++++
 1 files changed, 113 insertions(+), 0 deletions(-)

commit 191a714037406c7bfa5cce73089865ced4a15d97
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 14:53:56 2009 +0100

    test_filter: use new API and re-enable test

 tests/wocky-xmpp-scheduler-test.c |   36 +++++++-----------------------------
 1 files changed, 7 insertions(+), 29 deletions(-)

commit 690e7579e63f8abaeef7736b48bef1852aaaf021
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 14:49:36 2009 +0100

    test_receive: use new API and re-enable test

 tests/wocky-xmpp-scheduler-test.c |   11 ++++-------
 1 files changed, 4 insertions(+), 7 deletions(-)

commit a2d057bdbd77e02f297e1a5430fb7ddaf0f51a82
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 14:54:24 2009 +0100

    start to implement new handlers API

 wocky/wocky-xmpp-scheduler.c |  122 +++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-xmpp-scheduler.h |   10 ++++
 2 files changed, 131 insertions(+), 1 deletions(-)

commit 1fd895c4b547ee3c55b881491052306fa437ae95
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 12:54:31 2009 +0100

    rename WockyXmppSchedulerStanzaCallbackFunc to WockyXmppSchedulerHandlerFunc

 wocky/wocky-xmpp-scheduler.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 88f4be67d489a370b81886df0bf44dc2ad9690b5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 12:42:43 2009 +0100

    wocky-xmpp-scheduler: remove unused priv->sending

 wocky/wocky-xmpp-scheduler.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit ca9a5ee4fb36d2d06fb20848d298c714bdf09ab3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 12:42:05 2009 +0100

    Remove old stanza filters code and disable its tests for now

 tests/wocky-xmpp-scheduler-test.c |   10 ++++-
 wocky/wocky-xmpp-scheduler.c      |   73 +------------------------------------
 wocky/wocky-xmpp-scheduler.h      |   10 -----
 3 files changed, 9 insertions(+), 84 deletions(-)

commit dfd4ad4f6ee9434bd53294184f9085adbf070a55
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 11:53:18 2009 +0100

    rename wocky_xmpp_scheduler_send_full to wocky_xmpp_scheduler_send_async

 tests/wocky-xmpp-scheduler-test.c |   20 ++++++++++----------
 wocky/wocky-xmpp-scheduler.c      |    4 ++--
 wocky/wocky-xmpp-scheduler.h      |    2 +-
 3 files changed, 13 insertions(+), 13 deletions(-)

commit 76de9c85a2245126be45dcbf3940c7cda987e4cb
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 11:51:03 2009 +0100

    rename wocky_xmpp_scheduler_close to wocky_xmpp_scheduler_close_async

 tests/wocky-xmpp-scheduler-test.c |   28 ++++++++++++++--------------
 wocky/wocky-xmpp-scheduler.c      |    2 +-
 wocky/wocky-xmpp-scheduler.h      |    2 +-
 3 files changed, 16 insertions(+), 16 deletions(-)

commit 6578ce681d98c131c768917f446ef212d6e67dee
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 9 17:13:09 2009 +0100

    test sending a stanza throught a closing scheduler

 tests/wocky-xmpp-scheduler-test.c |   28 +++++++++++++++++++++++++---
 1 files changed, 25 insertions(+), 3 deletions(-)

commit 9fbbbcd49e1a67603cb0e73fe8719e8b82d83536
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 9 17:07:32 2009 +0100

    wocky_xmpp_scheduler_send_full: raise an error if scheduler is closing

 wocky/wocky-xmpp-scheduler.c |    9 +++++++++
 wocky/wocky-xmpp-scheduler.h |    1 +
 2 files changed, 10 insertions(+), 0 deletions(-)

commit 13eb2944d8880757b399a4699a19c96653723b03
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 17:17:17 2009 +0100

    Test if the right error is raised when trying to send a stanza through a closed scheduler

 tests/wocky-xmpp-scheduler-test.c |   52 +++++++++++++++++++++++++++++++++++++
 1 files changed, 52 insertions(+), 0 deletions(-)

commit 18f277e55b4cce729e3a25b018560c9c20a60b9b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 11:37:55 2009 +0100

    replace wocky_test_stream_read_error by wocky_test_input_stream_set_read_error

 tests/wocky-test-stream.c         |    8 +++++---
 tests/wocky-test-stream.h         |    2 +-
 tests/wocky-xmpp-scheduler-test.c |    2 +-
 3 files changed, 7 insertions(+), 5 deletions(-)

commit b820dd0721ba4329f68cffea436df45a0d91db72
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 17:06:41 2009 +0100

    test if the remote-error signal is properly fired

 tests/wocky-xmpp-scheduler-test.c |   44 +++++++++++++++++++++++++++++++++++++
 1 files changed, 44 insertions(+), 0 deletions(-)

commit ca3944ed0da521d610add494ceea597fcc276656
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 16 11:30:18 2009 +0100

    add wocky_test_stream_read_error to simulate a read error

 tests/wocky-test-stream.c |   18 ++++++++++++++++++
 tests/wocky-test-stream.h |    2 ++
 2 files changed, 20 insertions(+), 0 deletions(-)

commit 7c1db745323573c073f360258296f399bf86315d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 10 10:40:53 2009 +0100

    wocky-xmpp-reader-test: use g_assert_error

 tests/wocky-xmpp-reader-test.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 9ea7ecc262b401ee4e70816316a06c157daccad9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 10 10:39:52 2009 +0100

    wocky-test-sasl-auth: use g_assert_error

 tests/wocky-test-sasl-auth.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit 6afd22825552cb8c2a22a186041f011f0cb6dad6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 10 10:39:01 2009 +0100

    wocky-test-sasl-auth-server: use g_assert_error

 tests/wocky-test-sasl-auth-server.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 4e59a279a10698e3bba38bb355d1d652db3a109c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 10 10:38:10 2009 +0100

    wocky-xmpp-connection-test: use g_assert_error

 tests/wocky-xmpp-connection-test.c |   54 ++++++++++++++++++------------------
 1 files changed, 27 insertions(+), 27 deletions(-)

commit 317733282354de459ccfa7180c979d47629a2bee
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 10 10:35:11 2009 +0100

    use G_IO_ERROR_PENDING instead of WOCKY_XMPP_CONNECTION_ERROR_PENDING

 tests/wocky-xmpp-connection-test.c |   15 +++++----------
 wocky/wocky-xmpp-connection.c      |   15 +++++----------
 wocky/wocky-xmpp-connection.h      |    3 ---
 3 files changed, 10 insertions(+), 23 deletions(-)

commit c628264ae27860a76b4382170c5270b613f25b9f
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Jun 12 16:00:28 2009 +0100

    tweak the close_sent_cb function for better readability

 wocky/wocky-xmpp-scheduler.c |   31 +++++++++++++++++--------------
 1 files changed, 17 insertions(+), 14 deletions(-)

commit dc0d4c95a99cf1c0ba1b9654ad4a224c398f310c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 11 10:48:17 2009 +0100

    close_sent_cb: add some comments

 wocky/wocky-xmpp-scheduler.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 8081866e9583452f11695ba05467865e27ef74ab
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 11 10:45:15 2009 +0100

    priv->close_result is never supposed to be NULL in close_sent_cb

 wocky/wocky-xmpp-scheduler.c |    9 +++------
 1 files changed, 3 insertions(+), 6 deletions(-)

commit 10a60da5e5b478bc4e79015ad76aa5292b504705
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 11 10:43:02 2009 +0100

    factor out complete_close

 wocky/wocky-xmpp-scheduler.c |   34 +++++++++++++++++-----------------
 1 files changed, 17 insertions(+), 17 deletions(-)

commit 8b1062aa7b4254d5cebb2e2ec6a6ec53b74961b5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 10 10:27:41 2009 +0100

    close_sent_cb: don't complete the result twice if it has been cancelled and there was an error during sending

 wocky/wocky-xmpp-scheduler.c |   11 +++++++----
 1 files changed, 7 insertions(+), 4 deletions(-)

commit d5a9b421174f769bafb8e05b917e8efb5769b07f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 10 10:24:50 2009 +0100

    close_sent_cb: no need to complete in idle

 wocky/wocky-xmpp-scheduler.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

commit dae06ab93eeb484238d50ed35d90702eec5d85d2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 9 17:46:45 2009 +0100

    cancelling a wocky_xmpp_scheduler_close operation doesn't cancel the send_close_async
    
    We can't know if the close has been sent or not when cancelling. Don't
    allow to cancel it to avoid to put the scheduler in an inconsistent
    state.

 tests/wocky-xmpp-scheduler-test.c |    9 ++-------
 wocky/wocky-xmpp-scheduler.c      |   15 ++++++++++++---
 2 files changed, 14 insertions(+), 10 deletions(-)

commit 4360ebaa119cca75152f66c0a3fe7853f2e9f0f3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 9 16:49:37 2009 +0100

    wocky_xmpp_scheduler_dispose: tweak g_warning message

 wocky/wocky-xmpp-scheduler.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit da3dae5f23ed9d547b18660d7141b4a3367c50c2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 9 16:44:45 2009 +0100

    use G_IO_ERROR_PENDING instead of WOCKY_XMPP_SCHEDULER_ERROR_PENDING

 tests/wocky-xmpp-scheduler-test.c |    3 +--
 wocky/wocky-xmpp-scheduler.c      |    4 ++--
 wocky/wocky-xmpp-scheduler.h      |    1 -
 3 files changed, 3 insertions(+), 5 deletions(-)

commit c061b7df5cfa41e1df25e2c0bc05e79532f53434
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 9 15:39:01 2009 +0100

    close_sent_cb: remove useless async result temp variables

 wocky/wocky-xmpp-scheduler.c |   13 +++++--------
 1 files changed, 5 insertions(+), 8 deletions(-)

commit 9d181c22ba4111142e7e169958176523f321f180
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 15:02:28 2009 +0100

    test cancelling wocky_xmpp_scheduler_close

 tests/wocky-xmpp-scheduler-test.c |   51 +++++++++++++++++++++++++++++++++++++
 1 files changed, 51 insertions(+), 0 deletions(-)

commit d9346747d32c8b770f8893ac7a3965454862bee3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 17:02:17 2009 +0100

    don't set local_closed if the cancel operation has been closed

 wocky/wocky-xmpp-scheduler.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit cf77235237b1533019a38f6a804c1da619c21f81
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 15:01:35 2009 +0100

    wocky_xmpp_scheduler_close: add cancellable support

 wocky/wocky-xmpp-scheduler.c |   10 +++++++---
 1 files changed, 7 insertions(+), 3 deletions(-)

commit 07f6bb04555518c8e5d96952677dad06f14eeaef
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 15:00:52 2009 +0100

    close_sent_cb: don't leak the result if wocky_xmpp_connection_send_close_finish failed

 wocky/wocky-xmpp-scheduler.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 9559b315189e16c4a11300cc99db6f3b44cc2994
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 14:26:40 2009 +0100

    close_sent_cb: propagate error

 wocky/wocky-xmpp-scheduler.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit b4a1e557d0d778013a355763c0126bef73905b10
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 14:22:15 2009 +0100

    test_close_twice: try to call wocky_xmpp_scheduler_close once the scheduler has been closed

 tests/wocky-xmpp-scheduler-test.c |   24 ++++++++++++++++++++++++
 1 files changed, 24 insertions(+), 0 deletions(-)

commit e2f131deb2bd55b4e0964fd66ae521384281cd10
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 14:21:50 2009 +0100

    wocky_xmpp_scheduler_close: raise an error if already closed

 wocky/wocky-xmpp-scheduler.c |   14 ++++++++++++--
 wocky/wocky-xmpp-scheduler.h |    1 +
 2 files changed, 13 insertions(+), 2 deletions(-)

commit 5ee041e5a80d9d9e1e417efdc05e46afe900ae7d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 14:06:42 2009 +0100

    test if wocky_xmpp_scheduler_close can be closed after the remote connection has been closed

 tests/wocky-xmpp-scheduler-test.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit a8366339ae38cc591713f15f16beca83d9b95c64
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 14:11:06 2009 +0100

    wocky_xmpp_scheduler_close: don't wait for other side's closing if it has already been closed

 wocky/wocky-xmpp-scheduler.c |   14 +++++++++++++-
 1 files changed, 13 insertions(+), 1 deletions(-)

commit 16fe7d66d331c02fff883a4168543ffa75f72f85
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 13:07:25 2009 +0100

    add priv->remote_closed telling us if the remote connection has been closed

 wocky/wocky-xmpp-scheduler.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 8068686bbf5a093c5743c9eb07ff7b2e4b8cad78
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 12:44:41 2009 +0100

    test remote-closed signal

 tests/wocky-xmpp-scheduler-test.c |   48 +++++++++++++++++++++++++++++++++++++
 1 files changed, 48 insertions(+), 0 deletions(-)

commit f9328d93da37d679e5f464369cf391abd3117306
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 12:28:49 2009 +0100

    Fire remote-error signal when something goes wrong when receiving stanza

 wocky/wocky-xmpp-scheduler.c |   16 ++++++++++++++--
 1 files changed, 14 insertions(+), 2 deletions(-)

commit 6419950e848c165a429ebe178fc336ae3f9f9db9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 12:13:17 2009 +0100

    fire remote-closed signal when peer closed his XMPP connection

 wocky/wocky-xmpp-scheduler.c |   32 ++++++++++++++++++++++++++------
 1 files changed, 26 insertions(+), 6 deletions(-)

commit b45709b2fddefed7eb534247d445ca6c8120484c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 12:04:08 2009 +0100

    wocky_xmpp_scheduler_start: don't assert if sched has already been started

 wocky/wocky-xmpp-scheduler.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit b44a76804e7af23cdc11bf23ed58cf7351733bd1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 11:40:27 2009 +0100

    send_stanza_cb: cancel all pending sending operations if sending failed

 wocky/wocky-xmpp-scheduler.c |   31 +++++++++++++++++++++++--------
 1 files changed, 23 insertions(+), 8 deletions(-)

commit 063a4d203093d14d95b0a3f2c56e22d0d0accc59
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 11:28:27 2009 +0100

    wocky_xmpp_scheduler_finalize: assert than the queue is empty
    
    Queue elements have a ref on the scheduler so it shouldn't be destroyed
    while the queue is not empty.

 wocky/wocky-xmpp-scheduler.c |   13 ++++---------
 1 files changed, 4 insertions(+), 9 deletions(-)

commit b14c17a79d993e42ec1301c28f6c1e6e30e87282
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 10:34:43 2009 +0100

    display a warning when disposing a not closed scheduler

 wocky/wocky-xmpp-scheduler.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 866e4c2d586e1f439a1aa1ab57661103369704c5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 8 10:32:29 2009 +0100

    unref and set to NULL receive_cancellable as soon we stop reading

 wocky/wocky-xmpp-scheduler.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit d77c713f7435de9465a34e261125c007848fa3cb
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 17:00:45 2009 +0100

    test if the right error is raised when trying to close the scheduler twice

 tests/wocky-xmpp-scheduler-test.c |   44 +++++++++++++++++++++++++++++++++++++
 1 files changed, 44 insertions(+), 0 deletions(-)

commit e1fadaf363890ea429665fe01ecd5449a40052ed
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 17:00:23 2009 +0100

    raise an error if wocky_xmpp_scheduler_close is called twice

 wocky/wocky-xmpp-scheduler.c |   12 +++++++++---
 wocky/wocky-xmpp-scheduler.h |    1 +
 2 files changed, 10 insertions(+), 3 deletions(-)

commit d5774f48d3636ac3203a650da681fc8727a7cfd6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 16:36:30 2009 +0100

    test if the right error is raised when trying to close a not started scheduler

 tests/wocky-xmpp-scheduler-test.c |   48 +++++++++++++++++++++++++++++++++++++
 1 files changed, 48 insertions(+), 0 deletions(-)

commit a344fbd5dc64b192b2993bfcb8f2e398fec05fa3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 16:33:03 2009 +0100

    wocky_xmpp_scheduler_close: raise an error if scheduler has not been started

 wocky/wocky-xmpp-scheduler.c |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

commit 23dd4eae609c6d50a102086ab127a156b10e4ac1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 16:31:56 2009 +0100

    add WOCKY_XMPP_SCHEDULER_ERROR

 wocky/wocky-xmpp-scheduler.c |   18 ++++++++++++++++++
 wocky/wocky-xmpp-scheduler.h |   14 ++++++++++++++
 2 files changed, 32 insertions(+), 0 deletions(-)

commit 06fccf9b94869a4df5651cf63b948526886c63e9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 16:17:54 2009 +0100

    create receive_cancellable when scheduler is started
    
    Calling _start more than once doesn't make sense and that way we can use
    the cancellable to check if the scheduler has been started or not.

 wocky/wocky-xmpp-scheduler.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit e9329271e5b7d95c7eaf9d083b9751d837c89d99
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 15:57:19 2009 +0100

    test if the send queue is flushed before closing the connection

 tests/wocky-xmpp-scheduler-test.c |   87 +++++++++++++++++++++++++++++++++++++
 1 files changed, 87 insertions(+), 0 deletions(-)

commit 4fd21899a087a3b165ea7f19596f759adf861985
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 15:56:56 2009 +0100

    flush the sending queue before closing the connection

 wocky/wocky-xmpp-scheduler.c |   32 +++++++++++++++++++++++++++-----
 1 files changed, 27 insertions(+), 5 deletions(-)

commit fc32475f8cbc9941762d70bfec77eb879b3dbb54
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 15:53:55 2009 +0100

    xmpp-scheduler: include wocky-debug.h

 wocky/wocky-xmpp-scheduler.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 189b3e115f656d3858b4970aa779e60f7690a8b9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 15:51:06 2009 +0100

    add xmpp-scheduler debug domain

 wocky/wocky-debug.c |    1 +
 wocky/wocky-debug.h |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit c3aa6ef4804fd7a074fa933b3891b2403b0ea471
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 9 15:21:42 2009 +0100

    stanza_received_cb: no need to store the async result in a temp variable

 wocky/wocky-xmpp-scheduler.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

commit 9f4ce3ea9fcdad4b0460b0210523f0a35c93496f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 12:16:57 2009 +0100

    test filters

 tests/wocky-xmpp-scheduler-test.c |  103 +++++++++++++++++++++++++++++++++++++
 1 files changed, 103 insertions(+), 0 deletions(-)

commit cc92cf455aaf6f5f3ab9e9c4d1fc87bbf99d00c4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 12:01:05 2009 +0100

    test_receive: close the connections

 tests/wocky-xmpp-scheduler-test.c |   67 +++++++++++++++++++++++++++++++++++-
 1 files changed, 65 insertions(+), 2 deletions(-)

commit 17a75b1c0be207e69b37f4ba762e932a59e7d339
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 12:00:33 2009 +0100

    Implement simple and incomplete wocky_xmpp_scheduler_close

 wocky/wocky-xmpp-scheduler.c |   76 +++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-xmpp-scheduler.h |   10 +++++
 2 files changed, 85 insertions(+), 1 deletions(-)

commit 6d74ea1811f57ce2cab7f2501998c489da8996c3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 5 11:57:34 2009 +0100

    add test_open_both_connections() helper

 tests/wocky-test-helper.c |   33 ++++++++++++++++++++++++++++-----
 tests/wocky-test-helper.h |    2 ++
 2 files changed, 30 insertions(+), 5 deletions(-)

commit cd841cc83f95d52b9516181ea4ee98191a079d41
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 18:19:22 2009 +0100

    test stanza receiving

 tests/wocky-xmpp-scheduler-test.c |   50 +++++++++++++++++++++++++++++++++++++
 1 files changed, 50 insertions(+), 0 deletions(-)

commit 13ed721929cebc8bf2ce93ae0caf6953d831b18f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 18:19:07 2009 +0100

    xmpp-scheduler: implement receiving

 wocky/wocky-xmpp-scheduler.c |  137 ++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-scheduler.h |   17 +++++
 2 files changed, 154 insertions(+), 0 deletions(-)

commit 7f1b7c2605ebec8634685b73ec9673c39d5d92d5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 4 10:46:09 2009 +0100

    wocky-xmpp-connection-test: test cancelling wocky_xmpp_connection_recv_stanza_async

 tests/wocky-xmpp-connection-test.c |   46 ++++++++++++++++++++++++++++++++++++
 1 files changed, 46 insertions(+), 0 deletions(-)

commit 0607cf05c67c16e7ff4d1017f6008d904767a864
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 4 10:45:43 2009 +0100

    implement cancellable support in wocky_test_input_stream_read_async

 tests/wocky-test-stream.c |   23 ++++++++++++++++++++---
 1 files changed, 20 insertions(+), 3 deletions(-)

commit 6da1de42742ad4ed326a9d9f92f73dd348bcc4da
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 4 17:28:29 2009 +0100

    rename wocky_test_input_stream_data_available to _try_read and use it in _read_async

 tests/wocky-test-stream.c |   26 +++++++++++++++++---------
 1 files changed, 17 insertions(+), 9 deletions(-)

commit 279ce500d54bb707c0d195d83ef546081891c80b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 4 17:14:02 2009 +0100

    wocky_test_stream_init: pass associated input_stream to  output_data_written_cb

 tests/wocky-test-stream.c |   24 +++++++-----------------
 1 files changed, 7 insertions(+), 17 deletions(-)

commit 19eda286d9a31a7d97d8471558ffb2cd8ec007d8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 15:17:03 2009 +0100

    TestStream: call wocky_test_input_stream_data_available when the OutputStream has written data

 tests/wocky-test-stream.c |   30 +++++++++++++++++++++++++++++-
 1 files changed, 29 insertions(+), 1 deletions(-)

commit 36b6a164f22272b8e830d5da7c405fa63ace641a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 15:16:29 2009 +0100

    TestInputStream: implement async reading

 tests/wocky-test-stream.c |   96 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 96 insertions(+), 0 deletions(-)

commit fcdf24ef1cdcb16fffef6c85e0f20dceade85153
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 15:14:51 2009 +0100

    wocky-test-stream: add data-written signal on the TestOutputStream object

 tests/wocky-test-stream.c |   18 +++++++++++++++++-
 1 files changed, 17 insertions(+), 1 deletions(-)

commit ccf96d2734dc8a18ed9df3c4abc9b5e1ddb7c505
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 15:53:47 2009 +0100

    wait_close_cb: use g_assert_error

 tests/wocky-test-helper.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit f91e267758d7d2e8e0bc42a50033c16dfde8554f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 14:55:09 2009 +0100

    wocky-xmpp-scheduler-test: send one more stanza when testing sending
    
    This will ensure that all and the pending sending operations have been
    completed before calling test_close_connection().

 tests/wocky-xmpp-scheduler-test.c |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

commit e280d1387a3b1b1eddce038f01fbc0d4d1e5e86e
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 14:05:38 2009 +0100

    test_send_simple_message: use test_{open,close}_connection

 tests/wocky-xmpp-connection-test.c |   85 ++++++------------------------------
 1 files changed, 14 insertions(+), 71 deletions(-)

commit b1d67eb9a573d2f960b93252967cc523992eb246
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 13:55:29 2009 +0100

    wocky-xmpp-scheduler-test: use test_{open,from}_connection from test helper

 tests/wocky-xmpp-scheduler-test.c |   92 +------------------------------------
 1 files changed, 2 insertions(+), 90 deletions(-)

commit 2757eb6990a14f335ad05b742057746ee5db489f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 13:55:06 2009 +0100

    add test_{open,close}_connection to test-helper

 tests/wocky-test-helper.c |   88 +++++++++++++++++++++++++++++++++++++++++++++
 tests/wocky-test-helper.h |    4 ++
 2 files changed, 92 insertions(+), 0 deletions(-)

commit 8bd7be587eab9fa3de0f8037a40db0a5bd41d5fe
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 13:49:46 2009 +0100

    wocky-xmpp-connection-test: use test helper

 tests/wocky-xmpp-connection-test.c |   56 +----------------------------------
 1 files changed, 2 insertions(+), 54 deletions(-)

commit 57ba9e784df0a446a22899fb189b696b0fceea5f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 13:49:27 2009 +0100

    wocky-xmpp-scheduler-test: use test helper

 tests/wocky-xmpp-scheduler-test.c |   67 +------------------------------------
 1 files changed, 1 insertions(+), 66 deletions(-)

commit 93a6e922356bffa109a3972771f40e943ed1bf07
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 3 13:49:00 2009 +0100

    add wocky-test-helper.[ch]

 tests/Makefile.am         |    2 +
 tests/wocky-test-helper.c |   58 +++++++++++++++++++++++++++++++++++++++++++++
 tests/wocky-test-helper.h |   32 ++++++++++++++++++++++++
 3 files changed, 92 insertions(+), 0 deletions(-)

commit 881ba77b4d37fea577be5c5c26106d3438226d84
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 18:34:55 2009 +0100

    wocky-xmpp-scheduler-test: factor out close_connection()

 tests/wocky-xmpp-scheduler-test.c |   98 ++++++++++++++++++++++---------------
 1 files changed, 58 insertions(+), 40 deletions(-)

commit 9794e11ccb9db7e300ee5a816be0022b5d56beba
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 17:28:56 2009 +0100

    wocky-xmpp-scheduler-test: factor out open_connection()

 tests/wocky-xmpp-scheduler-test.c |  105 +++++++++++++++++++++----------------
 1 files changed, 59 insertions(+), 46 deletions(-)

commit df77c35236f9131f1a51e048a939354f963058c9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 16:22:43 2009 +0100

    store the self pointer in sending_queue_elem
    
    That way we don't have to use another struct as callback data when
    connecting the cancelled signal.

 wocky/wocky-xmpp-scheduler.c |   45 ++++++++++-------------------------------
 1 files changed, 11 insertions(+), 34 deletions(-)

commit 03eb19c97cdf48766bea07263f91ebb3561d38fc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 16:20:15 2009 +0100

    send_cancelled_cb: use remove instead of remove_all as the same elem isn't expected to be more than once in the queue

 wocky/wocky-xmpp-scheduler.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 16ca9b6e59e7a2ec770dc83fa42e1f3d915bd64c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 16:07:42 2009 +0100

    send_received_open_cb: use g_assert instead of g_assert_not_reached

 tests/wocky-xmpp-scheduler-test.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 189ffc2a988d4642a486e662606709d1aab0f2ab
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 16:06:38 2009 +0100

    check that we receive the right error when waiting for the disconnection

 tests/wocky-xmpp-scheduler-test.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit e74d11f7d165fdea8accc4554afd61c49139c097
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 16:04:21 2009 +0100

    wocky-xmpp-scheduler-test.c: move misleading comment

 tests/wocky-xmpp-scheduler-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8f03cf617138cd1929fe0045c04e34fc0125a828
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 16:00:10 2009 +0100

    wocky_xmpp_scheduler_send_full_finish: check if result is valid

 wocky/wocky-xmpp-scheduler.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 251b9f66cd0408e7c74c2389b4b180385fd24630
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 15:54:52 2009 +0100

    rename sending_queue_elt to sending_queue_elem

 wocky/wocky-xmpp-scheduler.c |   87 +++++++++++++++++++++---------------------
 1 files changed, 44 insertions(+), 43 deletions(-)

commit 418af4933a5d9ca2e819188b399707f3eb4e4a82
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 14:53:16 2009 +0100

    send_stanza_cb: check wocky_xmpp_connection_send_stanza_finish return value

 wocky/wocky-xmpp-scheduler.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit 637da6dcc942c231d5d2049c8906052d122998ac
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 14:13:09 2009 +0100

    test cancelling a stanza before it has been sent

 tests/wocky-xmpp-scheduler-test.c |   46 +++++++++++++++++++++++++++++++++++-
 1 files changed, 44 insertions(+), 2 deletions(-)

commit 477ad45c3d9f9d73c91949f5e03dce85b5137417
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 14:12:40 2009 +0100

    Remove stanza from the queue and cancel its sending if its cancellable is cancelled

 wocky/wocky-xmpp-scheduler.c |   54 ++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 52 insertions(+), 2 deletions(-)

commit 9c4069b2210c00a1dffbcd4e75598d4f0ddd0505
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 11:22:11 2009 +0100

    assert that we received all the expected stanzas when disposing the test

 tests/wocky-xmpp-scheduler-test.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 7c7baecba968d6cc7754d135c48200dbd4daa265
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 1 17:12:11 2009 +0100

    test wocky_xmpp_scheduler_send

 tests/wocky-xmpp-scheduler-test.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit f7e7b6053cb6d464ccf42663d11d493027f4254a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 1 17:12:00 2009 +0100

    add wocky_xmpp_scheduler_send

 wocky/wocky-xmpp-scheduler.c |    7 +++++++
 wocky/wocky-xmpp-scheduler.h |    3 +++
 2 files changed, 10 insertions(+), 0 deletions(-)

commit 9ab57f9b94265c493c3af98cbb7fd3fc9a9823c8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 1 15:54:53 2009 +0100

    test wocky_xmpp_scheduler_send_full

 tests/wocky-xmpp-scheduler-test.c |  206 +++++++++++++++++++++++++++++++++++++
 1 files changed, 206 insertions(+), 0 deletions(-)

commit c490b404e407b8e1851ee847b4e41cfd200050ef
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 1 15:45:23 2009 +0100

    Implement wocky_xmpp_scheduler_send_full

 wocky/wocky-xmpp-scheduler.c |  134 ++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-scheduler.h |   12 ++++
 2 files changed, 146 insertions(+), 0 deletions(-)

commit d8b252ece382d077e0aa98a2e49881e7251ccc76
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 1 12:53:46 2009 +0100

    add tests/wocky-xmpp-scheduler-test to .gitignore

 .gitignore |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit b308b15a7aac4ef0152198cb31f8cd24ddbca5c3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 1 12:53:00 2009 +0100

    add wocky-xmpp-scheduler-test.c and test instantion of the scheduler

 tests/Makefile.am                 |    7 +++++-
 tests/wocky-xmpp-scheduler-test.c |   38 +++++++++++++++++++++++++++++++++++++
 2 files changed, 44 insertions(+), 1 deletions(-)

commit f0bc7751b1d5648ed16543f4511ef85f50e99adc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 1 12:37:43 2009 +0100

    add skeleton of wocky-xmpp-scheduler.[ch]

 wocky/Makefile.am            |    4 +-
 wocky/wocky-xmpp-scheduler.c |  187 ++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-scheduler.h |   64 ++++++++++++++
 3 files changed, 254 insertions(+), 1 deletions(-)

commit 511cfe3be6d61fc643807858a3619498e387cc4a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 2 14:23:48 2009 +0100

    Ignore lcov generated files

 .gitignore |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 897aaa49cd6487a463ea99a6b04712130d44742b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Jun 2 10:53:28 2009 +0100

    Fix typo in comments

 tests/wocky-test-sasl-auth-server.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit f5101174008ec502a2a053c832e6389fb3ca71dc
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Jun 2 10:51:28 2009 +0100

    free the decoded response in all cases

 tests/wocky-test-sasl-auth-server.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit e6996af331116e2b595f52ce0ed2205c49faec1b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Jun 1 19:22:47 2009 +0100

    Propertify the sasl auth user, password, server and connection parameters
    
    The username-requested and password-requested were usually just annoying for
    users of the API and didn't help much as the only authentication mechanisms
    that are currently implemented always need a username/password anyway.
    
    Also moved server and connection up into the constructor as they should be
    static anyway.

 examples/connect.c           |   15 +----
 tests/wocky-test-sasl-auth.c |   22 ++----
 wocky/wocky-sasl-auth.c      |  158 +++++++++++++++++++++++++++++-------------
 wocky/wocky-sasl-auth.h      |    7 +-
 4 files changed, 122 insertions(+), 80 deletions(-)

commit 0f7cd832532ed56cf1d30c965ae371b05a56dbaa
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Jun 1 18:31:42 2009 +0100

    Test Sasl authentication using the wrong username/password

 tests/wocky-test-sasl-auth-server.c |   65 +++++++++++++++++++++++++++++++++--
 tests/wocky-test-sasl-auth-server.h |    2 +
 tests/wocky-test-sasl-auth.c        |   27 ++++++++++++---
 3 files changed, 86 insertions(+), 8 deletions(-)

commit 80d03b583a10815518b8310f4be448e1c04c32c2
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 22 18:37:50 2009 +0100

    Remove unused wocky_debug_stanza

 wocky/wocky-debug.c |   26 --------------------------
 1 files changed, 0 insertions(+), 26 deletions(-)

commit a3a7af80578032f008fead5f8af9fc63c1e91a60
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 22 18:36:59 2009 +0100

    small coding style fix

 wocky/wocky-debug.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit df4225f312414e5c3033ac613f2577703eeeacd5
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 22 18:35:29 2009 +0100

    Move SaslAuth to a more gio like API

 examples/connect.c           |   37 +++++--------
 tests/wocky-test-sasl-auth.c |   54 ++++++++-----------
 wocky/wocky-sasl-auth.c      |  121 +++++++++++++++++++++++++-----------------
 wocky/wocky-sasl-auth.h      |   18 ++++--
 4 files changed, 122 insertions(+), 108 deletions(-)

commit 24ac60b3cc10c80135e9893445d14506c7f4f2dd
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon May 18 17:20:58 2009 +0100

    Make the example work with the latest glib/gio versions

 examples/connect.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit d00206a4b16948abfbd9f21a370963fedbd4e3bd
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon May 18 17:20:31 2009 +0100

    Make the example a bit more friendly to use

 examples/connect.c |   27 +++++++++++++++++++++++----
 1 files changed, 23 insertions(+), 4 deletions(-)

commit d920590317e61e13d326bf01f480c0fce8521378
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 17:35:37 2009 +0100

    Add ability to generate code coverage statistics

 Makefile.am  |    3 +++
 configure.ac |   13 +++++++++++++
 2 files changed, 16 insertions(+), 0 deletions(-)

commit 2790b407dca4bfa39a3a4ffe2819a2cf09311694
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 17:33:15 2009 +0100

    Output all output of genhtml
    
    The output of genhtml doesn't follow a standard format, so don't try to grep
    into it for details. As it is, the output is pretty small and reasonably
    useful, so it doesn't win anything anyway

 rules/lcov.mak |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit 25098ed1acc86e0ed962f3f1f9f03418ba46dd08
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Fri Jul 6 07:31:48 2007 +0000

    Removed a redundant rule in lcov.mak
    
    20070706073148-f974e-45ecdef81918d4d9926bd6a5faba0e09de35c82e.gz

 rules/lcov.mak |    9 +++------
 1 files changed, 3 insertions(+), 6 deletions(-)

commit 44de7acc851cc1307d99f2423de5c85226fc7ecb
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Thu Jul 5 21:54:06 2007 +0000

    rules/lcov.mak: remove the need for the LCOV_PATH variable
    
    20070705215406-f974e-087116fe59a3b2f01f4e12ef470ecd5698eb638a.gz

 rules/lcov.mak |   19 ++++++++++---------
 1 files changed, 10 insertions(+), 9 deletions(-)

commit d0baefd87779c8a426fd21595257e0e238bd79d6
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Tue Jul 3 19:30:08 2007 +0000

    Do not use the internal copy of lcov if we cannot use the system one
    
    The history has been edited and the internal copy of lcov introduced
    in the "Add coverage and valgrind support for tests" patch has been
    deleted. Yay for using textual patches to store the history!
    
    20070703193008-f974e-d2322b04e4566dd2b12e5b6d15a35197343ffb9c.gz

 rules/lcov.mak |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 6c4bb604de9f165b98cf8812774d913e33311cb9
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Mon Jun 25 17:35:12 2007 +0000

    Streamline the coverage output printed to screen to make it more useful
    
    20070625173512-f974e-f1613c3b485bb04b984114493735cf40331a7382.gz

 rules/lcov.mak |   18 ++++++++++--------
 1 files changed, 10 insertions(+), 8 deletions(-)

commit 15b11ff887fae57729d1020de0cfd1010e8f7ee1
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Mon Jun 25 09:39:16 2007 +0000

    Use the variable instead of calling make directly
    
    20070625093916-f974e-a951f658ae1ad2ae4198505fcc9a57e164d1924d.gz

 rules/lcov.mak |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 62678cb1604cd3617072cfe5718256695e901ed6
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Sun Jun 24 22:57:53 2007 +0000

    Put the lcov output in coverage/ instead of lcov/
    
    20070624225753-f974e-5f129404f14e68f686a38231fddd432678232421.gz

 rules/lcov.mak |   20 +++++++++++---------
 1 files changed, 11 insertions(+), 9 deletions(-)

commit 6b058337d0aa472495a62e1f95ed40cf47952912
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Sun Jun 24 21:57:11 2007 +0000

    Add coverage and valgrind support for tests
    
    20070624215711-f974e-565c5019028294ac2c333e9e863af6699abfb83f.gz

 rules/lcov.mak |   25 +++++++++++++++++++++++++
 1 files changed, 25 insertions(+), 0 deletions(-)

commit dfcb0b2b8ca9704b6d6e571f18c4da7eeaaf38b2
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Tue Jul 3 19:30:08 2007 +0000

    Do not use the internal copy of lcov if we cannot use the system one
    
    The history has been edited and the internal copy of lcov introduced
    in the "Add coverage and valgrind support for tests" patch has been
    deleted. Yay for using textual patches to store the history!
    
    20070703193008-f974e-d2322b04e4566dd2b12e5b6d15a35197343ffb9c.gz

 m4/wocky-lcov.m4 |    7 +------
 1 files changed, 1 insertions(+), 6 deletions(-)

commit 5f881517714b1a0b4b504174379d773749231a7e
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Tue Jun 26 13:21:54 2007 +0000

    Fixed the valgrind and coverage compile options reorganizing the macro inclusion
    
    20070626132154-f974e-1c612eaa640fd535b4ebb5b8bfc40695ff9819f5.gz

 m4/wocky-gcov.m4 |   57 +++++++++++++++++++++++++++++------------------------
 m4/wocky-lcov.m4 |   12 +++++++---
 2 files changed, 39 insertions(+), 30 deletions(-)

commit 88bc0fe9e1019025221ed0849417bfcb14999568
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Mon Jun 25 09:13:47 2007 +0000

    Print 'no' when checking for the lcov executable
    
    20070625091347-f974e-685d07ee25031df4129e60f9df4eb6fdd5ba0e84.gz

 m4/wocky-lcov.m4 |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 0c314b851edc62ddff813580517b0b2dd6b4e3bf
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Mon Jun 25 09:13:06 2007 +0000

    Corrected the HAVE_GCOV variable name
    
    20070625091306-f974e-cf057c7c9978d567f3eb46a56e476f5cf4afcc75.gz

 m4/wocky-gcov.m4 |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 75643a4870f1d97423a5006aa6768b386b0d6c2e
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Mon Jun 25 07:57:42 2007 +0000

    Split the command line settings from the detection of libraries and utilities
    
    20070625075742-f974e-6695a3b35627caa5a09411094577c68d34a60d1e.gz

 m4/wocky-gcov.m4 |   48 ++++++++++++++++++++++++++++++++++++++++++++++++
 m4/wocky-lcov.m4 |   22 ++++++++++++++++++++++
 2 files changed, 70 insertions(+), 0 deletions(-)

commit b84438c2c653c085a5acd6f5f8826e555d81a350
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 15:24:52 2009 +0100

    free errors after usage

 tests/wocky-xmpp-connection-test.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit 3b9af1cc237749d5b375d696cd00b128a2648f89
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 15:19:08 2009 +0100

    Mark the input stream as closed when the reader is in CLOSED or ERROR state

 wocky/wocky-xmpp-connection.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit fb292e99a3a70fba491bdfb7685de1f100663e7c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 15:10:28 2009 +0100

    Remove useles empty line

 wocky/wocky-xmpp-connection.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit ded1c661557dae3b6da5c66cc00dc0804b043154
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 15:10:12 2009 +0100

    Implement WOCKY_XMPP_CONNECTION_ERROR_{IS_CLOSED,IS_OPEN} error reporting

 wocky/wocky-xmpp-connection.c |  213 ++++++++++++++++++++++++++++-------------
 1 files changed, 148 insertions(+), 65 deletions(-)

commit 4fc485ff6b62487fa4c6cbf777f6197356fa73a1
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 15:08:55 2009 +0100

    Add WOCKY_XMPP_CONNECTION_ERROR_{IS_CLOSED,IS_OPEN}

 wocky/wocky-xmpp-connection.h |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 2d8b9ebc2de3dcc2fcbcb9d129f56ebde0132cb1
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 13:06:46 2009 +0100

    Add test for _IS_CLOSED and _IS_OPEN errors from the XmppConnection

 tests/wocky-xmpp-connection-test.c |  247 ++++++++++++++++++++++++++++++++++++
 1 files changed, 247 insertions(+), 0 deletions(-)

commit 4dae728e05ed4e7f75872323879bfb5e3e58a780
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 12:25:41 2009 +0100

    Implement reporting of WOCKY_XMPP_CONNECTION_ERROR_NOT_OPEN

 wocky/wocky-xmpp-connection.c |   31 +++++++++++++++++++++++++++++--
 1 files changed, 29 insertions(+), 2 deletions(-)

commit ac98e1b3a12500e7180f18ceba288941016619e7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 22:39:43 2009 +0100

    Add test for WOCKY_XMPP_CONNECTION_ERROR_NOT_OPEN

 tests/wocky-xmpp-connection-test.c |   84 +++++++++++++++++++++++++++++++++++-
 1 files changed, 82 insertions(+), 2 deletions(-)

commit dbdadf768558077acae49bf7431105ac71ad1078
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 11:47:09 2009 +0100

    Correctly count outstanding operation in the simple message test

 tests/wocky-xmpp-connection-test.c |   33 +++++++++++++++++++++++++++++----
 1 files changed, 29 insertions(+), 4 deletions(-)

commit ebfe07410fa3f4a832872d3518e02aab30e51f63
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 11:44:25 2009 +0100

    On write errors use the correct AsyncResult

 wocky/wocky-xmpp-connection.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit e9295ce2d6a9c0e133c335e430153d10e7a312e5
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 11:43:31 2009 +0100

    Chain up dispose to the right parent class

 tests/wocky-test-stream.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 1697164be513289ae8ade35f389ab3ab33f35601
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 11:43:00 2009 +0100

    Remove useless finalize

 tests/wocky-test-stream.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

commit 80e8d2e23db228df1bd813fb56a686882688f924
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 11:42:07 2009 +0100

    GIOStream is now a base-class instead of an interface
    
    GIOStream got merged into glib as a base-class instead of an interface. Make
    WockyTestIOStream implement the basic functionality of this class and also move
    the ownership of the input and output streams from WockyTestStream to
    WockyTestIoStream for more correct refcounting

 tests/wocky-test-stream.c |   52 ++++++++++++++++++++------------------------
 1 files changed, 24 insertions(+), 28 deletions(-)

commit 4118cbe69438eaf43e61fccf9be4a7ec16a1c169
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri May 15 11:11:11 2009 +0100

    get_{input,output}_stream no longer return refs

 wocky/wocky-xmpp-connection.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit 993b66dca1bc78ea1c2d08ba49a53a51fc97b8b6
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 22:27:07 2009 +0100

    Implementing WockyXmppConnection pending error reporting

 wocky/wocky-xmpp-connection.c |   45 +++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-connection.h |    8 +++---
 2 files changed, 49 insertions(+), 4 deletions(-)

commit f5e5186be62cdf5f48a42ac021a47f1340507413
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 20:57:09 2009 +0200

    First propagate errors, then assert validity

 wocky/wocky-xmpp-connection.c |   32 ++++++++++++++++----------------
 1 files changed, 16 insertions(+), 16 deletions(-)

commit a85cd2dfb6c6165baaa3d164a8e6ce0db362526c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 20:49:23 2009 +0200

    Add test for WOCKY_XMPP_CONNECTION_ERROR_PENDING

 tests/wocky-xmpp-connection-test.c |  275 +++++++++++++++++++++++++++++++++++-
 1 files changed, 274 insertions(+), 1 deletions(-)

commit a720f4473a9af3159d106fa7f8d21567bfb5075a
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 20:48:49 2009 +0200

    Add new error messages

 wocky/wocky-xmpp-connection.h |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit 66cd832b07843202288ad90380d8bb436332df28
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 19:19:23 2009 +0200

    Factor out some common test setup

 tests/wocky-xmpp-connection-test.c |   90 ++++++++++++++++++++----------------
 1 files changed, 50 insertions(+), 40 deletions(-)

commit bbb959af3b34fafa7a1e37e2c16b459f7d3a6453
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Sat Apr 25 00:56:22 2009 +0200

    Get rid of the WockyXmppConnectionFlags

 wocky/wocky-xmpp-connection.c |   50 +++++++++++++++++++++++++++--------------
 wocky/wocky-xmpp-connection.h |   13 ----------
 2 files changed, 33 insertions(+), 30 deletions(-)

commit be9bbfa3fdf7ccb9ce4902663f297b947babb3d9
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Sat Apr 25 00:52:36 2009 +0200

    only send stanza after sending the opening has finished

 tests/wocky-xmpp-connection-test.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit 6bcae39e85b1d512a0590b7dbc7675d98d381204
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 15:05:40 2009 +0200

    Fixed documentation style issues

 wocky/wocky-xmpp-connection.c |   87 +++++++++++++++++++++--------------------
 1 files changed, 44 insertions(+), 43 deletions(-)

commit 0848c5e67c9ef3ba999517b9d6a07cfbc940aa8f
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 24 18:54:11 2009 +0100

    Initial documentation for WockyXmppConnection

 wocky/wocky-xmpp-connection.c |  165 ++++++++++++++++++++++++++++++++++++++++-
 1 files changed, 164 insertions(+), 1 deletions(-)

commit 0b84315d26880bf5bd38229c99903b20b2246469
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 24 10:56:00 2009 +0100

    Tweak the WockyXmppConnectionError documentation

 wocky/wocky-xmpp-connection.h |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 7085d1caccfd7c9077e027701447fa8cf5edd100
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 14:21:10 2009 +0200

    Fix coding style

 examples/connect.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 97e52a67cb4b6332f09820e34e02132f4957ea60
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 14:20:54 2009 +0200

    Run coding style checks on the example

 examples/Makefile.am |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit c83d762891efb99196acb92d9f56baeb7d9fb2ff
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 27 14:20:19 2009 +0200

    Remove the useless constructor override in WockyXmppConnection

 wocky/wocky-xmpp-connection.c |   22 +++-------------------
 1 files changed, 3 insertions(+), 19 deletions(-)

commit ffe6fc959326b27d982143d84a1694ec6bf67856
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 24 19:27:11 2009 +0100

    Fix some coding style issues

 wocky/wocky-xmpp-connection.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit d05e3a23d8f1e4da63b0ea137d003d4857b04895
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 18:22:30 2009 +0100

    Port the connect exampe to the new XmppConnection API

 examples/connect.c |  350 ++++++++++++++++++++++++++++++++++------------------
 1 files changed, 228 insertions(+), 122 deletions(-)

commit f8b084781a77bed4dfab9f8ffa96dbb870a1821b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 18:06:17 2009 +0100

    Correct wocky_xmpp_connection_recv_open_finish prototype

 wocky/wocky-xmpp-connection.c |    8 ++++----
 wocky/wocky-xmpp-connection.h |    8 ++++----
 2 files changed, 8 insertions(+), 8 deletions(-)

commit 34514ca4062838df213eca20ac7d3b3a1b889a40
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 15:54:31 2009 +0100

    style tweak

 tests/wocky-test-stream.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 7beb1c240936d32b5116d9f1b078f7e9c58bf548
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 14:58:26 2009 +0100

    Port test-sasl-auth to new WockyXmppConnection api

 tests/wocky-test-sasl-auth-server.c |  207 ++++++++++++++++++++++++++++++-----
 1 files changed, 178 insertions(+), 29 deletions(-)

commit c8e54f29607ef3210f67e67c06094c2fcaf6a7df
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 14:57:48 2009 +0100

    Finish porting WockySaslAuth to new XmppConnection api

 wocky/wocky-sasl-auth.c |   52 +++++++++++++++++++++++++---------------------
 1 files changed, 28 insertions(+), 24 deletions(-)

commit 93067ea7fef23a1f5621136e40dc854413ba6734
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 13:31:08 2009 +0100

    Finish porting wocky-test-sasl-auth to the new XmppConnection api

 tests/wocky-test-sasl-auth.c |  173 ++++++++++++++++++++++++++++++------------
 1 files changed, 125 insertions(+), 48 deletions(-)

commit b6ea317ecfea560b16202465703f24900227d4f7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 16:18:50 2009 +0100

    Add _reset function to WockyXmppConnection

 wocky/wocky-xmpp-connection.c |   14 ++++++++++++++
 wocky/wocky-xmpp-connection.h |    2 ++
 2 files changed, 16 insertions(+), 0 deletions(-)

commit b33584cb42de7d4a8f692d5b70a85189ec9446a8
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 23 16:18:35 2009 +0100

    Rename wocky_xmpp_connection_send_stanza_async_finish to wocky_xmpp_connection_send_stanza_finish

 tests/wocky-xmpp-connection-test.c |    2 +-
 wocky/wocky-xmpp-connection.c      |    8 ++++----
 wocky/wocky-xmpp-connection.h      |    2 +-
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 9a8816e5cf4dee267f8c2135001749fca207fb7b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 22 13:33:32 2009 +0100

    All async operation should have callbacks calling finish

 tests/wocky-xmpp-connection-test.c |   18 ++++++++++++++++--
 1 files changed, 16 insertions(+), 2 deletions(-)

commit 09feab449fef01e09d81cf6d2837a7bd8a399aa0
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 22 13:26:32 2009 +0100

    Implement reading side of WockyXmppConnection

 wocky/wocky-xmpp-connection.c |  171 ++++++++++++++++++++++++++++++++++++++---
 1 files changed, 161 insertions(+), 10 deletions(-)

commit f02177dd6e6e344fa2eb1afc0de7a1edac2803f7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 22 13:25:24 2009 +0100

    Send close from the input connection instead of output

 tests/wocky-xmpp-connection-test.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 9465c4813c86665627c6a37274cd0e9df7f46793
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 17 17:38:34 2009 +0100

    Add a simple message sending test to the connection test

 tests/wocky-xmpp-connection-test.c |  105 +++++++++++++++++++++++++++++++++++-
 1 files changed, 104 insertions(+), 1 deletions(-)

commit e3b1514009d78478bb050f1096db8c37b856524f
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 17 17:01:11 2009 +0100

    Implemented the reading side of WockyXmppConnection

 wocky/wocky-xmpp-connection.c |  390 ++++++++++++++++++-----------------------
 wocky/wocky-xmpp-connection.h |    2 -
 2 files changed, 171 insertions(+), 221 deletions(-)

commit 7dc6e67d8972463b8732c208a6ab5f90b4a6529b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 17 16:59:48 2009 +0100

    More noddy ports to the new XmppConnection api

 tests/wocky-test-sasl-auth-server.c |   24 +++++++++++++++++-------
 tests/wocky-test-sasl-auth.c        |   20 +++++++++++++++-----
 2 files changed, 32 insertions(+), 12 deletions(-)

commit 53abbaef35d5821b8a8284824c6681f041f62793
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 17 16:59:04 2009 +0100

    Port the WockyXmppConnection tests to the new API

 tests/wocky-xmpp-connection-test.c |   79 ++++++++++++++++++++++--------------
 1 files changed, 48 insertions(+), 31 deletions(-)

commit c9c3e51b010523ad1081bb61e8f3d1d97c0e163b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 17 16:58:29 2009 +0100

    Noddy port of WockySaslAuth to the new API

 wocky/wocky-sasl-auth.c |   33 ++++++++++-----------------------
 1 files changed, 10 insertions(+), 23 deletions(-)

commit 25b94703af119d614d9e4622632de91c3fbff31e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 17 16:56:46 2009 +0100

    Add a WockyXmppConnection error domain and various codes

 wocky/wocky-xmpp-connection.c |   18 ++++++++++++++++++
 wocky/wocky-xmpp-connection.h |   21 +++++++++++++++++++++
 2 files changed, 39 insertions(+), 0 deletions(-)

commit a55fb89ee72f9c18757ba776a27152bcfe4433d1
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 10 12:50:10 2009 +0100

    Redo the XmppConnection API in a more push/pull manner
    
    Start of the refactored API for xmpp connection. The intention is that the
    XmppConnection is a very thin layer over GIOStream and the XMPP reader/writers.
    The actual scheduling of stanzas and a more advanced API for adding filters etc
    will be part of a higher level object.
    
    This patch has stubs for all the new methods with the old ones commented out so
    tests can compile and run but fail.

 wocky/wocky-xmpp-connection.c |  217 ++++++++++++++++++++++++++++++++---------
 wocky/wocky-xmpp-connection.h |   74 +++++++++++---
 2 files changed, 227 insertions(+), 64 deletions(-)

commit 98242d24c638f02758e7c7cbd022ccba54832f99
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Apr 17 15:20:54 2009 +0100

    update .gitignore

 .gitignore |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

commit 503b2ae6b7097232b81608c97ac640d6fb6862d5
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 17 15:47:14 2009 +0100

    Fixed typo in documentation (availble -> available)

 wocky/wocky-xmpp-reader.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6ecdea5f71e7ba723896c580f08befda4526aa87
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 16 17:27:16 2009 +0100

    Document that _pop_stanza transfer ownership of the stanza to the caller

 wocky/wocky-xmpp-reader.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit a117f2e59663d2592d9892627a3459ce5ee65df2
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 16 17:22:12 2009 +0100

    test whether the reader handles a stream with no stanzas correctly
    
    Add a test to see whether the reader correctly handles a stream which doesn't
    include any stanzas, just open and close. At the same time test that
    _peek_stanza and _pop_stanza have no effect on the state changes

 tests/wocky-xmpp-reader-test.c |   35 +++++++++++++++++++++++++++++++++++
 1 files changed, 35 insertions(+), 0 deletions(-)

commit 02dd8e89a315b07dc7273c5057aa363c8c79415a
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 16 17:21:55 2009 +0100

    Also exercise wocky_xmpp_reader_peek_stanza in tests

 tests/wocky-xmpp-reader-test.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit a501050e971d32b24b8e01e572f9ce3a5be258b7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 16 16:18:06 2009 +0100

    add wocky_xmpp_reader_peek_stanza function
    
    Add a function to see if there are stanzas available from the xmpp reader.

 wocky/wocky-xmpp-reader.c |   19 +++++++++++++++++++
 wocky/wocky-xmpp-reader.h |    1 +
 2 files changed, 20 insertions(+), 0 deletions(-)

commit 3455033f67d333207d33abf4a92521b7bd4f8755
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:54:28 2009 +0100

    Fix style issues found by coding style checker

 tests/wocky-test-sasl-auth.c   |    2 +-
 tests/wocky-test-stream.h      |    4 ++--
 tests/wocky-xmpp-reader-test.c |    4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 083a0cb3edc72c853100a3efd0c3d39c5f08be61
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:52:08 2009 +0100

    Add coding style checks fo the tests

 tests/Makefile.am |   27 ++++++++++++++++-----------
 1 files changed, 16 insertions(+), 11 deletions(-)

commit 179db666c83486c1039e6d0f5e7b6797ec0617eb
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:35:22 2009 +0100

    Actuall let /xmpp-sasl/no-plain do what was intended

 tests/wocky-test-sasl-auth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8296cf03e838adfbbf264f8bd23efb5df7bb2c8a
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:34:58 2009 +0100

    Add test to refuse plain auth when that's the only one available

 tests/wocky-test-sasl-auth.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit e50dc5ba5b0f457067695e510cf3511d69defc2c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:34:17 2009 +0100

    Use one test case per test

 tests/wocky-test-sasl-auth.c |   37 ++++++++++++++++---------------------
 1 files changed, 16 insertions(+), 21 deletions(-)

commit 7a6eb9b3be535dcab90483ab77677495f8317790
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:03:17 2009 +0100

    Port to gtester testing and GIO

 tests/wocky-test-sasl-auth.c |   74 +++++++++++++++++------------------------
 1 files changed, 31 insertions(+), 43 deletions(-)

commit 1bfe8ba0ff3652a61b2f942159d2e7d684eb13f9
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:01:46 2009 +0100

    Link and build sasl tests against wocky-test-stream

 tests/Makefile.am |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

commit 4566cd7dc6c77a85467e1f09009585cb5c245f27
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 16:01:14 2009 +0100

    Port from GibberTransport to GIOStream

 tests/wocky-test-sasl-auth-server.c |    7 ++++---
 tests/wocky-test-sasl-auth-server.h |    4 ++--
 2 files changed, 6 insertions(+), 5 deletions(-)

commit 8776899c3ab71cd849b96d383d7706ee241e4497
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 15:58:49 2009 +0100

    Write the close tag to the output stream as well

 wocky/wocky-xmpp-connection.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 5c6efc7e87382905d7e17631ba9403a83e0b16a6
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 15:34:16 2009 +0100

    Correctly pass version point to get_object_get

 wocky/wocky-xmpp-connection.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit d53e4a2a9e3f535d67b3cf04125559313573ad77
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 15:32:36 2009 +0100

    Correctly check connection status bitfield

 wocky/wocky-xmpp-connection.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 7e83807aa0a84dd83889c660619a64327fb5925d
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 10 15:09:53 2009 +0100

    build the sasl tests

 configure.ac      |   14 ++++++++++++++
 tests/Makefile.am |   14 ++++++++++++++
 2 files changed, 28 insertions(+), 0 deletions(-)

commit 36b170b45e6f305fdf88d3c3ef9ed07038c64356
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Dec 15 12:33:00 2008 +0000

    wocky-test-sasl-auth-server: fix coding style

 tests/wocky-test-sasl-auth-server.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 00a47a2239891bc7fa3ab2ea5146a152a7f9efcf
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Sat Dec 13 17:25:58 2008 +0000

    wocky-test-sasl-auth: fix static functions and multi declarations

 tests/wocky-test-sasl-auth.c |   25 +++++++++++++------------
 1 files changed, 13 insertions(+), 12 deletions(-)

commit a8411ef267c1c7b03a3a246e69dac6bf10f0e0e6
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Dec 8 14:20:01 2008 +0000

    wocky-test-sasl-auth.c: workaround missing g_set_error_literal

 tests/wocky-test-sasl-auth.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit b7e252cd7cd7874d63e1e3a09b955d3ec474204e
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jun 4 11:31:58 2008 +0000

    Coding style updates
    
    20080604113158-93b9a-6c2078534b174e0730dfb45389ee2fbca53827a8.gz

 tests/wocky-test-sasl-auth-server.c |  392 +++++++++++++++++++----------------
 tests/wocky-test-sasl-auth-server.h |   20 +-
 tests/wocky-test-sasl-auth.c        |  168 ++++++++-------
 3 files changed, 312 insertions(+), 268 deletions(-)

commit ab2c23c715e876004869e370e098514a94a82651
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jun 4 10:19:29 2008 +0000

    Convert tests to telepathy coding style
    
    20080604101929-93b9a-7480a8b55e1a75d9a1797bf42412944f31513e20.gz

 tests/wocky-test-sasl-auth-server.c |   36 +++++++++++++++++-----------------
 1 files changed, 18 insertions(+), 18 deletions(-)

commit 1d2ca3485c2facd14de350faa5fde2c43ee580bf
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Jul 2 07:57:48 2007 +0000

    Correctly restart the xmpp connection after the auth was successfull
    
    20070702075748-b58c9-213277df2d2cb5e38c824542ea6356c1b80f0c0a.gz

 tests/wocky-test-sasl-auth.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e14d42ff4858dd16302e74c898cb6a41ec5e5873
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Sun Jul 1 14:13:34 2007 +0000

    Fix a memleak in the WockySaslAuth test
    
    20070701141334-f974e-cf2e6f47799a9e6abb864d32ffa13a3ac9a8a52e.gz

 tests/wocky-test-sasl-auth.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 1971aee01ad9e27314ecf94caead0bd5b6486827
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Sun Jul 1 14:08:36 2007 +0000

    Fix two memleaks in TestSaslAuthServer
    
    20070701140836-f974e-f6fc59db3a7309773cc92cf5699405169e342aaf.gz

 tests/wocky-test-sasl-auth-server.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 323871a91984219797f928e0e75e4eb8e6f849c3
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Thu Jun 21 20:52:14 2007 +0000

    Ported the SASL test to Check using its looping tests support
    
    20070621205214-f974e-39f1ea943fea106ca043b43e82f42748e7031ede.gz

 tests/wocky-test-sasl-auth.c |  198 ++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 198 insertions(+), 0 deletions(-)

commit aa65b1798f0b1b4bef0662b5f49ee76dc57c6213
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Mar 17 21:20:49 2007 +0000

    Use sasl-test.db as filename for the sasl test
    
    20070317212049-93b9a-74efbb70d1aab22bb0d48f5a7c69eaf2ea35bb8f.gz

 tests/wocky-test-sasl-auth-server.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ca6d85ec64db6d370f581c53b5b14ebf4a658810
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 22:10:01 2007 +0000

    TestSaslAuthServer: Handle PLAIN correctly and add the possibility to simulate problems
    
    20070217221001-93b9a-517090543e2208cdc45dec534e3a99e0eaed1096.gz

 tests/wocky-test-sasl-auth-server.c |  122 ++++++++++++++++++++---------------
 tests/wocky-test-sasl-auth-server.h |    9 ++-
 2 files changed, 77 insertions(+), 54 deletions(-)

commit e021c54b3504bb3332afc8a2b8d77c0500eed964
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 17:06:05 2007 +0000

    Add start of a sasl auth test
    
    20070217170605-93b9a-9af2313bab57fb9611f352d47bd5cd08af3eb92d.gz

 tests/wocky-test-sasl-auth-server.c |  411 +++++++++++++++++++++++++++++++++++
 tests/wocky-test-sasl-auth-server.h |   64 ++++++
 2 files changed, 475 insertions(+), 0 deletions(-)

commit 3f75f90a58986d75e894e0600339c9ec5b37d4b0
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 14:50:05 2009 +0100

    Small style tweaks and typo fixed to the documentation

 wocky/wocky-xmpp-reader.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit 4db621ed08f20fabb8fcd20a341aa2dc8172a100
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 14:17:49 2009 +0100

    fix typo

 tests/wocky-xmpp-readwrite-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 16bc40ed81aaf2534fac9fa87e71300ed8c271a7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 14:12:45 2009 +0100

    Fix some small style issues

 tests/wocky-xmpp-readwrite-test.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit d2f51cb31a340fd94225c24a0d17d97357d5676e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 13 12:55:18 2009 +0100

    Add a comment to clarify wocky_xmpp_reader_check_eos

 wocky/wocky-xmpp-reader.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 621da979f7488e53e6ad03a9cae3bc80a8133943
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 10 12:28:43 2009 +0100

    Don't hardcode the path to valgrind

 tests/Makefile.am |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit c530c1297b6decaf2f044251f4ac21e3561f8e76
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 10 11:16:35 2009 +0100

    Add valgrind surpression for glib leaking tls

 tests/Makefile.am      |    5 +++++
 tests/threadlocal.supp |    8 ++++++++
 2 files changed, 13 insertions(+), 0 deletions(-)

commit c357dc2c1c2ec3f8ee2efb93f4ec670f0666485c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 19:39:35 2009 +0100

    unref the input, output and cancel objects on dispose

 wocky/wocky-xmpp-connection.c |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

commit 86766769cef5c956d44edea151bc65f6dc56c181
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 19:39:11 2009 +0100

    Don't forget to free errors

 tests/wocky-xmpp-reader-test.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 9e3cbb657c7930330fcf1f6f3ceae5f9dcfcc017
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 19:38:55 2009 +0100

    Set all the stream variables to NULL after unreffing

 tests/wocky-test-stream.c |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

commit fa1c63910c72c3a565da344fa90b1861f536e267
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 19:38:27 2009 +0100

    Clear out the stanza that's in progress when disposing

 wocky/wocky-xmpp-reader.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit ca9bc4a1918815d0d1a7383685c8d256a7b99404
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 19:08:56 2009 +0100

    Add valgrind test targets

 tests/Makefile.am |   32 +++++++++++++++++++++++++++++++-
 1 files changed, 31 insertions(+), 1 deletions(-)

commit af573f72676bb2b79c5acfe460ba9abc6f15ae7b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 18:00:42 2009 +0100

    Document various enums and quarks

 wocky/wocky-xmpp-reader.c |    7 +++++++
 wocky/wocky-xmpp-reader.h |   22 ++++++++++++++++++++++
 2 files changed, 29 insertions(+), 0 deletions(-)

commit d54d07bad698c63c2f4fa3e1ea8ab203484581ee
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 18:00:05 2009 +0100

    Generate GObject enums

 wocky/Makefile.am |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 990176ddd27647bc73fadefbf355a0829c6b7dc7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 17:23:58 2009 +0100

    Document the methods

 wocky/wocky-xmpp-reader.c |   61 +++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 61 insertions(+), 0 deletions(-)

commit d00aa6ae721c0214db3705acb2cddea1fcb951a1
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 9 17:10:30 2009 +0100

    Tweak comment so gtk-doc doesn't pick it up

 wocky/wocky-xmpp-stanza.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6b6f3164f2935cc7556484e7be36ac3bcddbb722
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 6 17:25:43 2009 +0100

    Update copyright headers

 wocky/wocky-xmpp-reader.c |    4 ++--
 wocky/wocky-xmpp-reader.h |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit c62484cd570c8f0903ff33e19986f92fa26848d2
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 6 17:05:34 2009 +0100

    Don't reset the reader state in non-streaming mode after parsing a chunk
    
    The API user should explicitely reset the xml parser after it got the chunks it
    wanted out. Thus the parser shouldn't be reset after parsing a chunk of data in
    non-streaming mode. Fixes a bug when parsing one message in seperate
    chunks.

 wocky/wocky-xmpp-reader.c |    6 ------
 1 files changed, 0 insertions(+), 6 deletions(-)

commit 0eb0b3600d7c9a8377f4da24202af0616714daba
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 6 17:05:02 2009 +0100

    Add a test for reader states when parsing chunks

 tests/wocky-xmpp-reader-test.c |   43 ++++++++++++++++++++++++++++++++++++++++
 1 files changed, 43 insertions(+), 0 deletions(-)

commit 09b9556d682c7abab64814af9419577d0b65532a
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Apr 6 16:57:38 2009 +0100

    Assert that the reader state stays open after a full stanza is parsed
    
    For consistenty, even in non-streaming mode, the reader state should stay open
    untill the stanza is popped. Assert this in the tests as well

 tests/wocky-xmpp-readwrite-test.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 33c81ba85a4376e89ce7a4aa706110e18dfbfa81
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 18:58:50 2009 +0100

    Fix some object leaks

 tests/wocky-xmpp-readwrite-test.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 0a86a9b15a52ce5f2858a12631ff5bec64b17e55
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 18:52:48 2009 +0100

    Check if the queue has ended after popping the next stanza

 wocky/wocky-xmpp-reader.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 76910891ff10c669770facac0b7040901f0bf12e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 18:51:58 2009 +0100

    Add some more checks

 tests/wocky-xmpp-readwrite-test.c |   21 ++++++++++++++++++++-
 1 files changed, 20 insertions(+), 1 deletions(-)

commit 67fba3d1c47b7fdd86b152e12484842b02ad7a81
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 18:21:44 2009 +0100

    Correctly return GErrors

 wocky/wocky-xmpp-reader.c |   27 ++++++++++++++++++++++-----
 1 files changed, 22 insertions(+), 5 deletions(-)

commit 67b87e93fb445aed88049d05480711627f8b1759
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 17:00:36 2009 +0100

    Add a pure reader test

 tests/Makefile.am              |    7 ++-
 tests/wocky-xmpp-reader-test.c |  100 ++++++++++++++++++++++++++++++++++++++++
 2 files changed, 106 insertions(+), 1 deletions(-)

commit ea73a3b3457d369e845a6521fc30308a5793140c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 18:16:44 2009 +0100

    Define an error domain for WockyXmppReader

 wocky/wocky-xmpp-reader.c |   12 +++++++++++-
 wocky/wocky-xmpp-reader.h |    8 ++++++++
 2 files changed, 19 insertions(+), 1 deletions(-)

commit 9f5b3abe87aa2eb601eeab823d9288103f6b6a01
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 16:39:25 2009 +0100

    rename the reader state enum to WOCKY_XMPP_READER_STATE_*

 tests/wocky-xmpp-readwrite-test.c |   16 ++++++++++------
 wocky/wocky-xmpp-connection.c     |    6 +++---
 wocky/wocky-xmpp-reader.c         |   14 +++++++-------
 wocky/wocky-xmpp-reader.h         |    8 ++++----
 4 files changed, 24 insertions(+), 20 deletions(-)

commit 94ff0ea84b8ff022b0de84925b126e1632c5e0e3
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 14:35:35 2009 +0100

    Remove double include

 tests/wocky-xmpp-readwrite-test.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

commit 0dd3acfd18f33646deeab0fb32d638ae96d16303
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 14:28:01 2009 +0100

    g_return_if_fail if pushing bytes when the reader has closed

 wocky/wocky-xmpp-reader.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 485238b4180fdbf3efd312b9cf43388118ef2542
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 14:27:34 2009 +0100

    Let the read-write test send multiple messages

 tests/wocky-xmpp-readwrite-test.c |   47 ++++++++++++++++++++++++++-----------
 1 files changed, 33 insertions(+), 14 deletions(-)

commit 2189612f80620c8dd9dca22216f876ba0fb9b387
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 13:29:09 2009 +0100

    Add support for opening streams with a default language set

 tests/wocky-xmpp-readwrite-test.c |    5 ++---
 wocky/wocky-xmpp-connection.c     |    4 ++--
 wocky/wocky-xmpp-reader.c         |   19 +++++++++++++++++++
 wocky/wocky-xmpp-writer.c         |   18 ++++++++++++++++--
 wocky/wocky-xmpp-writer.h         |    8 ++++++--
 5 files changed, 45 insertions(+), 9 deletions(-)

commit 531a7092e1daab286bb4dd3e6d209dd93a610dae
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Apr 3 13:08:52 2009 +0100

    Make the WockyXmppReader API more synchronous
    
    Parsing XML is a synchronous event, blobs of data get pushed in stanzas come
    out. The async API that emits signals doesn't really reflect this nature and
    made using the reader more tedious then needed. The API is now synchronous,
    data gets pushed in by one function, stanzas get pulled out by another one and
    state is checked afterwards by another function.

 tests/wocky-xmpp-readwrite-test.c |  105 ++++++----------
 wocky/wocky-xmpp-connection.c     |   85 +++++--------
 wocky/wocky-xmpp-reader.c         |  253 ++++++++++++++++++++++++++-----------
 wocky/wocky-xmpp-reader.h         |   22 +++-
 4 files changed, 268 insertions(+), 197 deletions(-)

commit 49ec6757939543b86f65df9ee651986cdabeee85
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 17:08:19 2009 +0100

    Fix wording

 wocky/wocky-xmpp-writer.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

commit 485f5b0131d9c00a065748a56acd85cb52387967
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 14:01:31 2009 +0100

    Convert to new coding style

 wocky/wocky-xmpp-writer.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 6e1b39873e86498c052d5a3410fbf2dc134c631c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 12:48:46 2009 +0100

    Document WockyXmppWriter

 wocky/wocky-xmpp-writer.c |   46 ++++++++++++++++++++++++++++++++++++++++----
 1 files changed, 41 insertions(+), 5 deletions(-)

commit e2d28e439a488a3364d6449a6ba0b193dbdbe6df
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 12:38:16 2009 +0100

    Don't return errors from wocky_xmpp_write_stanza
    
    In practise wocky_xmpp_write_stanza never returns an error. Change the function
    signature to reflect this and not act like it could return errors

 wocky/wocky-xmpp-connection.c |    6 +-----
 wocky/wocky-xmpp-writer.c     |    5 ++---
 wocky/wocky-xmpp-writer.h     |    7 ++++---
 3 files changed, 7 insertions(+), 11 deletions(-)

commit 7db9bf17fecd67651f5e0207f7a3601d2da77b8d
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:49:45 2009 +0100

    Start of documentation for xmpp-writer

 wocky/wocky-xmpp-writer.c |   26 ++++++++++++++++++++++++++
 1 files changed, 26 insertions(+), 0 deletions(-)

commit 72f69804e5341f983c7c1f81fb49318e0f1e5eed
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 13:07:34 2009 +0100

    Rename wocky_xmpp_node_compare to wocky_xmpp_node_equal

 tests/wocky-xmpp-readwrite-test.c |    4 ++--
 wocky/wocky-xmpp-node.c           |    4 ++--
 wocky/wocky-xmpp-node.h           |    4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 177774e8edc054604ee214f10b72f318c399e5a0
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 13:02:22 2009 +0100

    Unref all objects used in the test

 tests/wocky-xmpp-readwrite-test.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

commit bcdad3efc3dbf1313289fc816e4e89507e089686
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 13:00:16 2009 +0100

    Remove left-over debugging code

 tests/wocky-xmpp-readwrite-test.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit ff9c11bb7c7de67c289dea8368e8f5becf6edf5e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 12:56:39 2009 +0100

    Use g_strcmp0 to implement wocky_strdiff

 wocky/wocky-utils.c |    9 +--------
 1 files changed, 1 insertions(+), 8 deletions(-)

commit 2f859786fa03aaf8b78a4df546eeb670c6fc443b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Apr 2 12:55:45 2009 +0100

    Fix coding style

 wocky/wocky-utils.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 0b48e635e73f93d86250915002e3480239f82d31
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:17:37 2009 +0100

    Assert that open and close aren't called when not in streaming mode

 wocky/wocky-xmpp-writer.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit c3157c668b7c39f799b69c2516ac700ef2a10ce1
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:17:08 2009 +0100

    Add function to compare to node trees

 wocky/wocky-xmpp-node.c |   52 +++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-node.h |    4 +++
 2 files changed, 56 insertions(+), 0 deletions(-)

commit 92e882f8c126fb0e53c9bdb244f5a0e4f8cabe2e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:16:14 2009 +0100

    If a new child doesn't have a specified namespace, use the parent namespace

 wocky/wocky-xmpp-node.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit 821d4248f8778e4dbe1f0286f4146eaa53110774
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:15:22 2009 +0100

    Fix typo

 wocky/wocky-xmpp-writer.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8a4e1fa27082fef9bfd9ef53cdf3a900b29f538e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:14:18 2009 +0100

    Set namespaces for all stanza types

 wocky/wocky-xmpp-stanza.c |   36 ++++++++++++++++++++++++------------
 1 files changed, 24 insertions(+), 12 deletions(-)

commit 748d7a750638a9a94ad3eeaef6cc7fc5fa674df9
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:13:41 2009 +0100

    Add jabber:client namespace

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit e8480c3bb2150032594b5f4fce327f76e59b6548
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:12:45 2009 +0100

    Add a small test just to test the reader and the writer

 tests/Makefile.am                 |    5 +-
 tests/wocky-xmpp-readwrite-test.c |  159 +++++++++++++++++++++++++++++++++++++
 2 files changed, 163 insertions(+), 1 deletions(-)

commit 60aa14017e59c6d4a6a6a8b38084df7d4401e436
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 19:11:58 2009 +0100

    Add some utilities

 wocky/Makefile.am   |    2 ++
 wocky/wocky-utils.c |   47 +++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-utils.h |   32 ++++++++++++++++++++++++++++++++
 3 files changed, 81 insertions(+), 0 deletions(-)

commit fe48d0aa1516fc2923c162073bfc6d2e195d1fed
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Mar 31 20:11:57 2009 +0100

    Add streaming-mode construct time property

 wocky/wocky-xmpp-writer.c |   78 +++++++++++++++++++++++++++++++++++++++-----
 1 files changed, 69 insertions(+), 9 deletions(-)

commit 83a2c296c787e2512834ed56b21f29639208e4c8
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Wed Apr 1 13:58:28 2009 +0100

    Fallback to connecting to the server directly on port 5222 if srv resolving fails

 examples/connect.c |   68 +++++++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 59 insertions(+), 9 deletions(-)

commit 635f92483e9ce1b965b759af2ee6c4b1f27bd5b2
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Mar 31 18:49:53 2009 +0100

    Add gtkdoc infrastructure

 Makefile.am                |    2 +-
 autogen.sh                 |    2 +
 configure.ac               |    4 ++
 docs/Makefile.am           |    1 +
 docs/reference/Makefile.am |   94 ++++++++++++++++++++++++++++++++++++++++++++
 docs/reference/wocky.types |   11 +++++
 6 files changed, 113 insertions(+), 1 deletions(-)

commit 19a946d9e9346b3ee751d9f4091f5525eed61b3c
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Mar 30 12:48:52 2009 +0100

    Add LGPL 2.1 as COPYING file

 COPYING |  510 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 510 insertions(+), 0 deletions(-)

commit 68b661d09d36e9e4a87523625f69c29cbefcb561
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Mar 30 12:45:07 2009 +0100

    Add a basic gitignore file

 .gitignore |   69 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 69 insertions(+), 0 deletions(-)

commit 906848ae00fe8be9871aac376c3b4be24c6424a2
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Mar 27 15:36:29 2009 +0000

    Ignore eof and cancelled callbacks

 wocky/wocky-xmpp-connection.c |   27 +++++++++++++++++++--------
 1 files changed, 19 insertions(+), 8 deletions(-)

commit e1ab4307a71d28a83c5762d335a7faaba8fbe98d
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Mar 27 14:40:28 2009 +0000

    unref the connection the stream

 tests/wocky-xmpp-connection-test.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 66935908eb1fc342fdd24b8d8089ed8583059d2a
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Mar 27 14:38:16 2009 +0000

    Ref the async queue in both input and output and end the stream when the writing end is disposed

 tests/wocky-test-stream.c |   20 ++++++++++++++------
 1 files changed, 14 insertions(+), 6 deletions(-)

commit c19b402c8320e60a0035d1c019eb94c18bbaef95
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Mar 27 12:49:58 2009 +0000

    Unref objects after usage

 tests/wocky-xmpp-connection-test.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 0eeadab870129450d8930f3522536c40f1eecba7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Mar 27 12:20:30 2009 +0000

    Add missing space

 tests/wocky-test-stream.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e59f23eed6f8021e175abf5f78b8f3c9c19c596f
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 18:59:12 2009 +0000

    Use gtester and generate test resports

 tests/Makefile.am |   18 +++++++++++++++---
 1 files changed, 15 insertions(+), 3 deletions(-)

commit 1469bdcce4b6d788b7d1a1c116cc5106926b8e15
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 18:58:52 2009 +0000

    put libwocky.la in LDADD instead of AM_LDFLAGS

 tests/Makefile.am |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 65b84717f074344a57a6d7599fe64757428c22f3
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 18:57:23 2009 +0000

    Use a hardcoded message and add a timeout

 tests/wocky-xmpp-connection-test.c |  102 ++++++++++++++----------------------
 1 files changed, 40 insertions(+), 62 deletions(-)

commit b0acae0cc7d82cf023b0c8a516ee9d63a70f4f90
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 16:52:00 2009 +0000

    Port to WockTestStream

 tests/wocky-xmpp-connection-test.c |   52 ++++++++++++++++++++++-------------
 1 files changed, 33 insertions(+), 19 deletions(-)

commit 537f300bc4ce02322b805689d108cd1b9d4ef883
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 16:50:48 2009 +0000

    Implement a test stream

 tests/Makefile.am         |    3 +-
 tests/wocky-test-stream.c |  356 +++++++++++++++++++++++++++++++++++++++++++++
 tests/wocky-test-stream.h |   69 +++++++++
 3 files changed, 427 insertions(+), 1 deletions(-)

commit 7ac2ea742ac94923973854ef46b29aa8c0222700
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 16:50:00 2009 +0000

    Compile against libwocky

 tests/Makefile.am |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit a16675a5f38148f4d0cffe1da8d5217b3946dd6e
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 16:49:16 2009 +0000

    Define test programs

 tests/Makefile.am |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 2da6b78091d5a947ee37523ce55aacbe3c061d34
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 11:11:30 2009 +0000

    Remove usueless debugging

 wocky/wocky-xmpp-connection.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

commit 1fac6a540b046c7f3e9292a758813682df05c8a3
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Mar 24 17:02:01 2009 +0000

    Move to GTest

 tests/wocky-xmpp-connection-test.c |   29 ++++++++++++++++-------------
 1 files changed, 16 insertions(+), 13 deletions(-)

commit d7407e5cc8b2d3916904cf27a778fb4ebaf1f89b
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Mar 24 17:01:35 2009 +0000

    Build the xmpp connection test

 Makefile.am       |    2 +-
 configure.ac      |    1 +
 tests/Makefile.am |    9 +++++++++
 3 files changed, 11 insertions(+), 1 deletions(-)

commit 449e09a23fda76464cc52d2c1077d8c0a15b3ca9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Dec 15 12:34:01 2008 +0000

    wocky-xmpp-connection-test: fix coding style

 tests/wocky-xmpp-connection-test.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit e1e3f1b4b64280d2df246b41666e8a1ece8e31b4
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Sat Dec 13 15:22:36 2008 +0000

    wocky-xmpp-connection-test: fix static functions

 tests/wocky-xmpp-connection-test.c |   12 +++++++-----
 1 files changed, 7 insertions(+), 5 deletions(-)

commit 0e69cdef0ef37d3818f7bdcd7373c33963f3b763
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jun 4 10:19:29 2008 +0000

    Convert tests to telepathy coding style
    
    20080604101929-93b9a-7480a8b55e1a75d9a1797bf42412944f31513e20.gz

 tests/wocky-xmpp-connection-test.c |   37 +++++++++++++++++++++--------------
 1 files changed, 22 insertions(+), 15 deletions(-)

commit d8879f17e446f72b2f34260575eb9959a05c3a8b
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Mon Jul 2 16:49:18 2007 +0000

    Fix a memleak in the WockyXmppConnection test
    
    20070702164918-f974e-d961a1edd7f9d983588abecbc339095b1ab43e67.gz

 tests/wocky-xmpp-connection-test.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 263548eb95b7ab382f6c99c8368131de1ef60f0b
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Wed Jun 27 13:03:05 2007 +0000

    Use the $srcdir env var to obtain the input files to make 'make distcheck' happy
    
    20070627130305-f974e-abafbea1da144e4822c77f4c5529a1e84b7c42fe.gz

 tests/wocky-xmpp-connection-test.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit a1a3cfb3c6028eca9a188509caa4aa3e349c6298
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Jun 22 23:00:21 2007 +0000

    The main test runs g_type_init, no need to do it again in indiviual tests
    
    20070622230021-b58c9-b0670ceb4a1c2e27d4b7815421409a7410197d4a.gz

 tests/wocky-xmpp-connection-test.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit ab3a9206ca001b0e6bd414f04915f6a2d68ce682
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Jun 22 22:59:37 2007 +0000

    Add destructor for the file chunker
    
    20070622225937-b58c9-b293278434eaacc2671e4bf79cf4abc5b7278033.gz

 tests/wocky-xmpp-connection-test.c |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

commit 0672214f17623d23b1e101bbe29eb11dfe35d1be
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Wed Jun 13 16:16:40 2007 +0000

    Replaced two variables used as constants with thei values
    
    20070613161640-f974e-df65a86b4479e120293d77316801459df704d0dc.gz

 tests/wocky-xmpp-connection-test.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

commit 3dfc9142f411a14a363d31b42e2c9ecc9838e664
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Wed Jun 13 16:13:24 2007 +0000

    Factored the file chunking code out of the test
    
    20070613161324-f974e-d62367f7adbd4db10479b8e9078b1be0cb45a2e9.gz

 tests/wocky-xmpp-connection-test.c |   51 +++++++++++++++++++++++++++++------
 1 files changed, 42 insertions(+), 9 deletions(-)

commit ea65e79738efeb5a35741345bc4b026879c2cb02
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Wed Jun 13 15:36:14 2007 +0000

    Check the parsing of a valid message
    
    20070613153614-f974e-8c309a7855465643f05f322e1366640a9656f2c6.gz

 tests/wocky-xmpp-connection-test.c |   36 ++++++++++++++++++++++++++++++++++++
 1 files changed, 36 insertions(+), 0 deletions(-)

commit c9038d2b29279027889021bc952c34165e36e306
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Wed Jun 13 14:02:35 2007 +0000

    Add a testcase for WockyXmppConnection and check its istantiation
    
    20070613140235-f974e-38a23919dc403a05ad6852760c6b13bd9ad2e6f5.gz

 tests/wocky-xmpp-connection-test.c |   35 +++++++++++++++++++++++++++++++++++
 1 files changed, 35 insertions(+), 0 deletions(-)

commit 0638057a6768d8120ef7e65c44fa7eb30d0c08a4
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Mar 24 14:35:48 2009 +0000

    Coding style fix

 wocky/wocky-sasl-auth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 4d074ec8e8c8b0bf24f5869cef0a55e5287c2e53
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 11:05:13 2009 +0000

    Add fixmes to catch erros when writing things out

 wocky/wocky-xmpp-connection.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit d5cd67ff979bcb36c611699867701ad4964e5bcc
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 11:03:38 2009 +0000

    Don't locally define the xmpp namespace

 wocky/wocky-xmpp-connection.c |    1 -
 wocky/wocky-xmpp-reader.c     |    6 +++---
 2 files changed, 3 insertions(+), 4 deletions(-)

commit 383751f5111fc1d22c3ba7b2d585d7d04597b057
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Mar 26 11:00:07 2009 +0000

    Don't use C++ style comments

 wocky/wocky-xmpp-connection.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

commit 438382f8318d6af57d95886b04e43375690476b1
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Mar 24 11:55:12 2009 +0000

    Update copyright headers

 wocky/wocky-sasl-auth.c       |    4 ++--
 wocky/wocky-xmpp-connection.h |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 529fc7a6fa74e31b4979422e641f556c502c48e6
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 18:16:23 2009 +0000

    Remove dead code

 examples/connect.c |   55 ----------------------------------------------------
 1 files changed, 0 insertions(+), 55 deletions(-)

commit 1ece255bbf5d98a66ffa0575f74910a525b172df
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 18:11:18 2009 +0000

    Hook in sasl helper

 examples/connect.c |   21 ++++++++-------------
 1 files changed, 8 insertions(+), 13 deletions(-)

commit bb31d5438d401d51b703977c612475fcf8c77bc9
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 17:07:32 2009 +0000

    Add sasl authenticator helper module

 wocky/Makefile.am |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 3c84c10fcea898a73e25a8b06f0b2f2625157fd7
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 17:07:11 2009 +0000

    Port to GLibs md5 checksum functionality

 wocky/wocky-sasl-auth.c |   60 ++++++++++++++++++++++++++--------------------
 1 files changed, 34 insertions(+), 26 deletions(-)

commit 4b75598e43920219416dec5028f8c349a6441370
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Dec 15 12:14:10 2008 +0000

    wocky-sasl-auth: fix coding style

 wocky/wocky-sasl-auth.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 26ab880096b9782311ff127a1331a3638bb00387
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Dec 12 17:54:08 2008 +0000

    update includes to use wocky-signals-marshal.h instead of signals-marshal.h

 wocky/wocky-sasl-auth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 7a542ab51b8aeab8187ac09af99f8954e0403180
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Dec 12 16:20:20 2008 +0000

    wocky_sasl_auth_start_mechanism: fix a declaration

 wocky/wocky-sasl-auth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 8465322a802554fca237d5879737732f0669615b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Dec 12 16:18:29 2008 +0000

    wocky_sasl_auth_has_mechanism has to be static

 wocky/wocky-sasl-auth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 6da185773de26ceee59b96fc0673ce0bd5f7295c
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jun 4 09:28:40 2008 +0000

    Make wocky conform to telepathy coding style
    
    20080604092840-93b9a-aee2061241cb08f169ce5b8e9834aaf1ab65cf9a.gz

 wocky/wocky-sasl-auth.c |  865 +++++++++++++++++++++++++----------------------
 wocky/wocky-sasl-auth.h |   23 +-
 2 files changed, 470 insertions(+), 418 deletions(-)

commit dccf0da6a9ff31acd71d47144989d1ec53f11716
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Sun Jul 1 13:55:50 2007 +0000

    Fix two small memleak in WockySaslAuth
    
    20070701135550-f974e-01e921aff6b722104ea1262ac39980d2dbef55b5.gz

 wocky/wocky-sasl-auth.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 082b548788f9c72e790d176d7dafa756876ad013
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   Mon Jul 2 10:48:55 2007 +0000

    wocky/: generate all signal marshallers together.
    
    Generate them by grepping source code to see which marshallers are needed,
    avoiding the need for .list files.
    
    20070702104855-53eee-56259e92f01b710c85025a8f1bad923288f12ba5.gz

 wocky/wocky-sasl-auth.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 1829e57b45fe1e8ef8464316a3c20e55e0a707e7
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 17:03:28 2007 +0000

    WockySaslAuth: Remove spurious arguments to a debug statement
    
    20070217170328-93b9a-59bd06add72df19d2f3edd1a28886a22e9c9d10b.gz

 wocky/wocky-sasl-auth.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

commit 6109871d6c280863d3ed226db6dc28bea69755e4
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 17:02:55 2007 +0000

    WockySaslAuth: Cope with empty challenges (which are invalid)
    
    20070217170255-93b9a-22ca1a043a082b8e1632749d468c8540e0b7958b.gz

 wocky/wocky-sasl-auth.c |   17 +++++++++++------
 1 files changed, 11 insertions(+), 6 deletions(-)

commit 0565c2c4b1d52cadc6d066dfccb76cead3a1a48e
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Fri Feb 16 11:19:50 2007 +0000

    WockySaslAuth: Generate a 256 bit random cnonce instead of using a hardcoded one
    
    20070216111950-93b9a-6ec73801d3febe68b79942103981dc68edc5efc0.gz

 wocky/wocky-sasl-auth.c |   16 +++++++++++++++-
 1 files changed, 15 insertions(+), 1 deletions(-)

commit ecea718f8c6b34d768e7cc4804c8b083cee9bb3c
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 19:55:10 2007 +0000

    WockySaslAuth: Add support for the PLAIN auth mechanism
    
    20070215195510-93b9a-40b76ba500725cb5f704c9d8a305494e5adb5604.gz

 wocky/wocky-sasl-auth.c |  130 ++++++++++++++++++++++++++++++++++++++++-------
 1 files changed, 112 insertions(+), 18 deletions(-)

commit 5459d59a5a62c8a08394e9cfd122abc0c5f863e3
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 16:06:10 2007 +0000

    WockySaslAuth: Rename the error quak from salut_wocky_auth_failed to wocky_sasl_auth_error
    
    20070215160610-93b9a-5677d3a6fca4f248e779c043fdb6e8c7199fda77.gz

 wocky/wocky-sasl-auth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3f6b5451a209d3ddc4c28e3d3c9158e49de2a431
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 10:55:01 2007 +0000

    Added SASL authentication helper for wocky (just digest-md5 for now)
    
    20070215105501-93b9a-f19f851129b23241b015579541e73f827e5ff373.gz

 wocky/wocky-sasl-auth.c |  700 +++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-sasl-auth.h |   94 +++++++
 2 files changed, 794 insertions(+), 0 deletions(-)

commit d9c0e2f1cbf30d7607f796e5eb9105b572f2dfed
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 12:20:49 2009 +0000

    Add an connection example

 Makefile.am          |    2 +-
 configure.ac         |    9 +-
 examples/Makefile.am |   14 +++
 examples/connect.c   |  280 ++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 300 insertions(+), 5 deletions(-)

commit 38ea6f4656a637bc1d6e063a72ab14e8ef36c1f7
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 12:19:23 2009 +0000

    Define ENABLE_DEBUG if it's not disabled

 configure.ac |   16 ++++++++++++++++
 1 files changed, 16 insertions(+), 0 deletions(-)

commit a6eebde4700395e4f0916fc6d4bf8fd4ded25373
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 12:18:13 2009 +0000

    First noddy port to GNIO

 wocky/wocky-xmpp-connection.c |  129 +++++++++++++++++++++++++++-------------
 wocky/wocky-xmpp-connection.h |   11 +--
 2 files changed, 91 insertions(+), 49 deletions(-)

commit 9558d23edc3f2a6354987af77880ca58ed778724
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Mar 23 12:16:30 2009 +0000

    Add wocky-namespaces to the build

 wocky/Makefile.am |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 131ee48f74d8e45dafd154bb2dd79d0f5aec06ee
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   Mon Nov 24 12:37:06 2008 +0000

    lib/wocky/wocky-namespaces.h: Fix double #define from the merge

 wocky/wocky-namespaces.h |    8 +-------
 1 files changed, 1 insertions(+), 7 deletions(-)

commit dbbbc6cbd707b008e37a32f353bfb754826852b4
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   Wed Oct 8 15:48:33 2008 +0100

    lib/wocky/wocky-namespaces.h: Remove all the uneeded casts

 wocky/wocky-namespaces.h |   38 +++++++++++++++++++-------------------
 1 files changed, 19 insertions(+), 19 deletions(-)

commit 0a3a8450df6ffa7a659d2cadfd08dca06a538e99
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   Thu Oct 2 18:44:45 2008 +0100

    Caps: Add SalutPresenceCache and SalutDisco

 wocky/wocky-namespaces.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 766e1f7d619466203299a2a2c766a58e1b95cd09
Author: Alban Crequy <alban.crequy@collabora.co.uk>
Date:   Wed Oct 1 15:35:01 2008 +0100

    Caps: publish the right caps in txt records after the caps changed with SetSelfCapabilities

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 64099c646a8bea927b66c9228d7825a6c25cd7f7
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Oct 30 19:33:52 2008 +0000

    Add jabber:x:event namespace

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit a728d5057f38610fa87f270e84865ae095a35abe
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Tue Jul 15 18:56:36 2008 +0000

    Added Marco's file transfer code.
    
    20080715185636-8ed0e-06775a31a2c94b716db41375af32db8248b9e8d3.gz

 wocky/wocky-namespaces.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit e21e96c193e92eb2f507bea48e6c054415c4dea4
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   Fri Nov 2 15:53:16 2007 +0000

    Use new Clique namespace to represent the Clique protocol (XMPP-like messages over a reliable multicast protocol)
    
    20071102155316-53eee-fa026748eb7cdb35c32fdc4e523d3cc2a2fc1866.gz

 wocky/wocky-namespaces.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 57319116ef5bfefa47a73290a2766709211149d7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Oct 19 16:08:52 2007 +0000

    add WOCKY_TELEPATHY_NS_RMULTICAST namespace and use it in bytestream-muc
    
    20071019160852-7fe3f-a8289e1842f7371947c6aab5e2f0764297970f2f.gz

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit f0f1ac83fd9a864adb6d3428332b5627ba476d98
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Oct 17 14:51:15 2007 +0000

    add jingle errors NS
    
    20071017145115-7fe3f-9045aaae3cf2efbd008ef6dd4b968e73cf609ad9.gz

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 9a91b49d1d4f43b846b8f5aa61b94799e40dba3f
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Oct 16 14:59:08 2007 +0000

    add OOB NS
    
    20071016145908-7fe3f-0bd6e603b25b2c9a6718107e4302764b63bbdd24.gz

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 25cdbf39b7dcb7d76693a7b3c5fb85e5fec8d783
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Oct 16 11:52:09 2007 +0000

    wocky-namespaces.h: add SI related NS
    
    20071016115209-7fe3f-88728f8ee5e1723c5c876fe7eb77f0d837c8c99c.gz

 wocky/wocky-namespaces.h |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

commit fef054f9cd513e15106ccbadd702890321fdf850
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Aug 17 14:34:51 2007 +0000

    wocky-namespaces.h: add WOCKY_TELEPATHY_NS_OLPC_ACTIVITY_PROPS
    
    20070817143451-7fe3f-b9a78518ce007308ca2f1f3f5b8df4a44dda2563.gz

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 38e80b8f903f8800e6c3f4b9f910cfdc900c71ef
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Aug 1 14:08:53 2007 +0000

    fix IBB NS
    
    20070801140853-7fe3f-6e410e615a9619db3b6b62bd7f0aa763ab2a715e.gz

 wocky/wocky-namespaces.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 79388f1807076e7d7528102e11d11e0024ff9db1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 15 11:55:34 2007 +0000

    wocky-namespaces.h: add tubes NS
    
    20070615115534-7fe3f-bc808f4784fbc66fb160f25de84058a26800d4ea.gz

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 9c760087f91329c7c88a6b51bc9a16eb6435e12b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 17:10:56 2007 +0000

    add IBB and AMP NS
    
    20070613171056-7fe3f-42a9b52794f2a1ddab3aec7d9e65c68fc4f1c5f9.gz

 wocky/wocky-namespaces.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

commit 89c3f9080a667721a0a051d6cdecadd1f8fa3c04
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 14:24:34 2007 +0000

    wocky-namespaces.h: add #define test to protect against multi inclusion
    
    20070612142434-7fe3f-09ccbc7bd36ab724a53220376d1e7c46c842b4f8.gz

 wocky/wocky-namespaces.h |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit cfc80a8794b405ccc2127fe6fa52100fe5cfcdfd
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Fri Mar 16 21:26:30 2007 +0000

    Add xhtml-im and w3c xhtml namespace
    
    20070316212630-93b9a-bcdbd042585561b0f20076b5e7f5f1c41c1e2867.gz

 wocky/wocky-namespaces.h |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit 4a364f0b3f688edf5370d375f2f44b5e077e857a
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Feb 19 22:52:17 2007 +0000

    wocky-namespaces.h: Add TLS namespace
    
    20070219225217-93b9a-a939a12c3ca9cc6a087d08e9e3b045b0a2568f60.gz

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 43811d80edd39543cce3e65e011fc93d10d94edb
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 12:35:57 2007 +0000

    wocky-namespaces: Add the jabber stream namespace
    
    20070217123557-93b9a-2efee7ed7fe5077289e66078c13d9480f975e699.gz

 wocky/wocky-namespaces.h |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 08820023c0787959fd6c746d6e7a04784d5692e3
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 10:55:01 2007 +0000

    Added SASL authentication helper for wocky (just digest-md5 for now)
    
    20070215105501-93b9a-f19f851129b23241b015579541e73f827e5ff373.gz

 wocky/wocky-namespaces.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 952f5bd31390e6d0e291e95e7035628e5e6f8ee9
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Mar 17 19:41:23 2009 +0000

    Add basic build infrastructure

 AUTHORS                     |    1 +
 Makefile.am                 |   10 ++++
 NEWS                        |    1 +
 autogen.sh                  |   31 ++++++++++++
 configure.ac                |  108 +++++++++++++++++++++++++++++++++++++++++++
 m4/Makefile.am              |    2 +
 m4/as-compiler-flag.m4      |   33 +++++++++++++
 m4/tp-compiler-flag.m4      |   36 ++++++++++++++
 m4/tp-compiler-warnings.m4  |   40 ++++++++++++++++
 tools/Makefile.am           |    5 ++
 tools/check-c-style.sh      |   56 ++++++++++++++++++++++
 tools/check-coding-style.mk |   17 +++++++
 tools/check-misc.sh         |   13 +++++
 tools/check-whitespace.sh   |   17 +++++++
 wocky/Makefile.am           |   78 +++++++++++++++++++++++++++++++
 15 files changed, 448 insertions(+), 0 deletions(-)

commit 467cc8de580acb2fd89a7e0f827c75408aadf526
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   Sun Jan 11 17:50:48 2009 +0000

    Define stub DEBUG macros when !ENABLE_DEBUG
    
    Defining DEBUG(...) to expand to nothing trips warnings for code like
    this:
    
      if (foo)
        DEBUG(...);
    
    It could be worked around by using {}s, but better to fix the macros

 wocky/wocky-debug.h |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

commit c86b788131b5e4bb0090e6f2517cf8077bad5265
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   Sun Jan 11 17:04:07 2009 +0000

    Compare strictly to WOCKY_STANZA_TYPE_NONE in several functions.
    
    In check_sub_type, sub_type can legitimately be NONE, but the compiler
    spuriously warns if we check it's non-negative (see previous commit).
    All other comparisons were equally correct if they didn't accept
    WOCKY_STANZA_TYPE_NONE.

 wocky/wocky-xmpp-stanza.c |   11 +++++------
 1 files changed, 5 insertions(+), 6 deletions(-)

commit 7e41eb5e7042eeb9f01828f0e811cff27994a176
Author: Will Thompson <will.thompson@collabora.co.uk>
Date:   Sun Jan 11 15:42:23 2009 +0000

    Remove an unused label.
    
    All references to it were removed in "use assertions instead of
    wocky_goto_if_fail and wocky_goto_if_reached".

 wocky/wocky-xmpp-stanza.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit fb8e0aab248612fd02e702e4a6f9ba5931ce5148
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jan 7 11:56:25 2009 +0000

    wocky-debug.c: don't build code if debug is disabled

 wocky/wocky-debug.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit 3b6d233e8e6cccc4f4186fc2690ff15b62aa71aa
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jan 7 11:55:48 2009 +0000

    wocky-debug.h: G_BEGIN_DECLS has to be outside the #ifdef ENABLE_DEBUG

 wocky/wocky-debug.h |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

commit 8862f970f5194430e8cff9902e774bcdff2e34e5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jan 7 11:53:42 2009 +0000

    use assertions instead of wocky_goto_if_fail and wocky_goto_if_reached

 wocky/wocky-xmpp-stanza.c |   14 +++++++-------
 1 files changed, 7 insertions(+), 7 deletions(-)

commit 4bd74bfd5c424baa2b206a12e4790620e0c698c5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jan 7 11:53:14 2009 +0000

    wocky-debug.h: remove wocky_goto_if_reached and wocky_goto_if_fail as they don't really make sense

 wocky/wocky-debug.h |   22 ----------------------
 1 files changed, 0 insertions(+), 22 deletions(-)

commit 15b3424d3c7e4f4f6bb968e9c7bc23aea9674e9a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Dec 15 12:13:11 2008 +0000

    wocky-xmpp-node: fix coding style

 wocky/wocky-xmpp-node.c |   16 ++++++++--------
 1 files changed, 8 insertions(+), 8 deletions(-)

commit 4c007a2f5caba03babd121d98beb6834b5d813e0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Dec 15 12:12:59 2008 +0000

    wocky-xmpp-reader: fix coding style

 wocky/wocky-xmpp-reader.c |   34 +++++++++++++++++-----------------
 1 files changed, 17 insertions(+), 17 deletions(-)

commit 8a76c2fc4f2761c7ae36aa30358ccf6bbb05b1a0
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Dec 15 12:12:50 2008 +0000

    wocky-xmpp-writer: fix coding style

 wocky/wocky-xmpp-writer.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

commit 5ab277188ce4101b89473630a7e8952f1a647de2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Dec 12 17:54:08 2008 +0000

    update includes to use wocky-signals-marshal.h instead of signals-marshal.h

 wocky/wocky-xmpp-connection.c |    2 +-
 wocky/wocky-xmpp-reader.c     |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 7b4cd5daeb003f91876794f69e58493a6016da12
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Dec 12 16:00:41 2008 +0000

    wocky-xmpp-writer: _write_attr and _write_child have to be static

 wocky/wocky-xmpp-writer.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 3ccd5c9e9edf633210211778b54feb4a59063a9d
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Dec 12 15:58:36 2008 +0000

    add wocky_xmpp_connection_new_no_stream prototype

 wocky/wocky-xmpp-connection.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 4f3e118fda6d886e91a0fe1eededbe0f57068ed8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Dec 12 15:57:00 2008 +0000

    wocky-debug.h: fix wocky_debug_set_flags_from_env prototype

 wocky/wocky-debug.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit ff1ba290ce71cc2c49273c730865b032459e63d2
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Thu Oct 30 19:06:31 2008 +0000

    Push new stanza at the tail of the queue, so they are popped in the right order later on

 wocky/wocky-xmpp-reader.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 77cad2cef33f3152fd47464b73f9e36bffb1ec74
Author: Jonny Lamb <jonny.lamb@collabora.co.uk>
Date:   Tue Jul 15 18:56:36 2008 +0000

    Added Marco's file transfer code.
    
    20080715185636-8ed0e-06775a31a2c94b716db41375af32db8248b9e8d3.gz

 wocky/wocky-debug.c |    1 +
 wocky/wocky-debug.h |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit e2aebb5710e8fb6fb6f2b32e006dad2292ae1921
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jun 4 09:28:40 2008 +0000

    Make wocky conform to telepathy coding style
    
    20080604092840-93b9a-aee2061241cb08f169ce5b8e9834aaf1ab65cf9a.gz

 wocky/wocky-debug.c           |    4 +-
 wocky/wocky-debug.h           |    4 +-
 wocky/wocky-xmpp-connection.c |  314 +++++++++++++++++---------------
 wocky/wocky-xmpp-connection.h |   40 ++--
 wocky/wocky-xmpp-node.c       |  320 +++++++++++++++++---------------
 wocky/wocky-xmpp-node.h       |  128 ++++++-------
 wocky/wocky-xmpp-reader.c     |  405 ++++++++++++++++++++++-------------------
 wocky/wocky-xmpp-reader.h     |   24 ++-
 wocky/wocky-xmpp-stanza.c     |    6 +-
 wocky/wocky-xmpp-stanza.h     |   19 +-
 wocky/wocky-xmpp-writer.c     |  306 +++++++++++++++++--------------
 wocky/wocky-xmpp-writer.h     |   38 ++--
 12 files changed, 848 insertions(+), 760 deletions(-)

commit 51742d045364acce563136414a8bdd1465873f37
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   Fri Oct 19 15:08:41 2007 +0000

    Add WOCKY_NODE_ASSIGN_TO opcode to wocky_xmpp_stanza_build
    
    20071019150841-53eee-c6180e5eccfd5d5819a0d12b881444be3bfc90d9.gz

 wocky/wocky-xmpp-stanza.c |    9 +++++++++
 wocky/wocky-xmpp-stanza.h |    1 +
 2 files changed, 10 insertions(+), 0 deletions(-)

commit 0dd7b754a7991f9420b0ea84a2eeaa75a5e15bc8
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jul 11 09:19:19 2007 +0000

    fix WOCKY_XMPP_CONNECTION_CLOSE_FULLY_CLOSED flag
    
    20070711091919-7fe3f-6ef819ed805180f8c37574ff13147a9955a711e2.gz

 wocky/wocky-xmpp-connection.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit e0e3927117928acc24bfa4209fe4b0f53888ed05
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jul 10 08:46:59 2007 +0000

    wocky-xmpp-connection.c: add CLOSE flags
    
    20070710084659-7fe3f-4ae9b76c8176493817626c6725f61aa7ea3c90d3.gz

 wocky/wocky-xmpp-connection.c |    4 ++++
 wocky/wocky-xmpp-connection.h |   17 +++++++++++------
 2 files changed, 15 insertions(+), 6 deletions(-)

commit 24fd6b222d0eb8e755a288ae71e3a1760fb7bda5
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Jul 2 07:56:29 2007 +0000

    Add flags to indicate which way the stream opening has been sent
    
    20070702075629-b58c9-caba73719213896652eca8671e7606bb09c7792f.gz

 wocky/wocky-xmpp-connection.c |   22 +++++++++++-----------
 wocky/wocky-xmpp-connection.h |    9 ++++++++-
 2 files changed, 19 insertions(+), 12 deletions(-)

commit a471b048c6269470b2b26499e031c9adadc8e1d1
Author: Simon McVittie <simon.mcvittie@collabora.co.uk>
Date:   Mon Jul 2 10:48:55 2007 +0000

    lib/wocky/: generate all signal marshallers together.
    
    Generate them by grepping source code to see which marshallers are needed,
    avoiding the need for .list files.
    
    20070702104855-53eee-56259e92f01b710c85025a8f1bad923288f12ba5.gz

 wocky/wocky-xmpp-connection.c |    4 ++--
 wocky/wocky-xmpp-reader.c     |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 4bc73e5c0936180cfaab2e5267916f4eb702e4c7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 28 14:06:46 2007 +0000

    xmpp-stanza: assert stanza->node != NULL
    
    20070628140646-7fe3f-6e9a2388bc757c87c00addad2f36c7d9a917d420.gz

 wocky/wocky-xmpp-stanza.c |    8 +-------
 1 files changed, 1 insertions(+), 7 deletions(-)

commit dfa38e4d0e9e3f2d82e79f16bc62fc94c8753878
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 28 13:57:42 2007 +0000

    xmpp-stanza: factor out (sub) type name -> WockyStanza(Sub)Type to simplify code
    
    20070628135742-7fe3f-63c98e9add085256738a6d841354e8ac4a5d7366.gz

 wocky/wocky-xmpp-stanza.c |   90 +++++++++++++++++++++++----------------------
 1 files changed, 46 insertions(+), 44 deletions(-)

commit 316afe222f71d36bcae05b66f0878972bb966cc7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 28 13:39:32 2007 +0000

    rename LAST_WOCKY_STANZA_(SUB_)TYPE to NUM_WOCKY_STANZA_(SUB_)TYPE
    
    20070628133932-7fe3f-12f50c87a912fdcaf632cbd2496162fdb95d6019.gz

 wocky/wocky-xmpp-stanza.c |   26 +++++++++++++-------------
 wocky/wocky-xmpp-stanza.h |    4 ++--
 2 files changed, 15 insertions(+), 15 deletions(-)

commit 0721a4a4a39f59f97a112dcfeebb307a1f0e24d2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 28 12:44:49 2007 +0000

    add wocky_xmpp_stanza_get_type_info
    
    20070628124449-7fe3f-7ce76716162f4ef37a00cfaf0135f998fe684df0.gz

 wocky/wocky-xmpp-stanza.c |   63 +++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-stanza.h |    4 +++
 2 files changed, 67 insertions(+), 0 deletions(-)

commit 0be3da65c21240e3c9b514b1468734af101603a2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 28 11:52:15 2007 +0000

    add WOCKY_STANZA_TYPE_UNKNOWN and WOCKY_STANZA_SUB_TYPE_UNKNOWN
    
    20070628115215-7fe3f-b1554b27ca4159ccabfb0440253f4511dd2cd9f6.gz

 wocky/wocky-xmpp-stanza.c |    3 +++
 wocky/wocky-xmpp-stanza.h |    2 ++
 2 files changed, 5 insertions(+), 0 deletions(-)

commit fba5b3d743d2ef44fce54ae7dae2eee1fe84c3ab
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 27 15:40:13 2007 +0000

    xmpp writer: wocky_xmpp_writer_write_stanza: properly end the XML document if we opened it
    
    20070627154013-7fe3f-4531ab5c3ffdc7098d6a7cb10cbf53b1fbd4ae9f.gz

 wocky/wocky-xmpp-writer.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 144379b5082f74b2f2683c9fdc2d5d2b8d72d261
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 27 15:29:50 2007 +0000

    xmpp-reader: fix parser leak
    
    20070627152950-7fe3f-66c9308c55f88482fc97277bf40d24a9f382e6fc.gz

 wocky/wocky-xmpp-reader.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 5d185bb1b41e4b6b2682ef51d4c9c66832935aa1
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 09:21:29 2007 +0000

    resolve conflicts
    
    20070613092129-7fe3f-2b6baa02dcd135f33a8f7b8a9c02d8453d962d23.gz

 wocky/wocky-debug.c |    2 ++
 wocky/wocky-debug.h |    3 +++
 2 files changed, 5 insertions(+), 0 deletions(-)

commit bf1eee65708b2e3be575896ab2be6efc0f1478ad
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 11 10:14:31 2007 +0000

    add bytestream flag in wocky-debug
    
    20070611101431-7fe3f-d1f9d74df54bc1e246ab75826b931d6bd9695999.gz

 wocky/wocky-debug.c |    1 -
 wocky/wocky-debug.h |    1 -
 2 files changed, 0 insertions(+), 2 deletions(-)

commit f73827190c938dfa875964636794db7e33e535d2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 22 09:50:36 2007 +0000

    wocky-xmpp-reader: don't leak the nodes queue
    
    20070622095036-7fe3f-38a0c4ea6789444c6b04a1f6df11e6ef84f99c0e.gz

 wocky/wocky-xmpp-reader.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit fa04537b90306f15562cd2312dffe695a803015b
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 21 13:45:17 2007 +0000

    wocky-xmpp-connection.c: generate an id for stanza who doesn't have one before sending
    
    20070621134517-7fe3f-74190255a1c13b53ffe1d07aac675e0e925c58e6.gz

 wocky/wocky-xmpp-connection.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

commit dc6c99e3e6d00e41832b4794c6c50262588c05d9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Thu Jun 21 13:39:08 2007 +0000

    add wocky_xmpp_connection_new_id public method[3~
    
    20070621133908-7fe3f-086b66767bad06086b6f74f8dc19bc04d6fa01e6.gz

 wocky/wocky-xmpp-connection.c |   20 +++++++++++++++++++-
 wocky/wocky-xmpp-connection.h |    3 +++
 2 files changed, 22 insertions(+), 1 deletions(-)

commit 2652b052605d50f9b5487c0d427dbddd85b508f8
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Jun 19 03:27:15 2007 +0000

    Initialize the debugging flags if that wasn't done yet
    
    20070619032715-b58c9-173cdbd3f369494cf1a519097bc9fbab3ad39215.gz

 wocky/wocky-debug.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

commit 51712116dd763988f32a75293f1ed88e169df039
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Tue Jun 19 12:01:26 2007 +0000

    Format type fixes from misc@mandriva.org
    
    20070619120126-b58c9-44b9271200324439d74cb1969dc22f6f661c4de8.gz

 wocky/wocky-xmpp-reader.c |    2 +-
 wocky/wocky-xmpp-writer.c |    6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 50412b9c566bb63a06137c8f4977092f56481865
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 15 12:30:45 2007 +0000

    reimplement wocky_debug_stanza to use wocky_xmpp_node_to_string
    
    20070615123045-7fe3f-bb91394e6454c0d035256c299c86aab08d365e06.gz

 wocky/wocky-debug.c |   77 ++++----------------------------------------------
 1 files changed, 7 insertions(+), 70 deletions(-)

commit 4055ba7ff34b23a10e4cd62af03cd633d03acd9a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Fri Jun 15 12:23:06 2007 +0000

    add wocky_xmpp_node_to_string
    
    20070615122306-7fe3f-2f268e618ce79a7d8d06c310612a3a596f74a327.gz

 wocky/wocky-xmpp-node.c |   72 +++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-node.h |    4 ++
 2 files changed, 76 insertions(+), 0 deletions(-)

commit d73925be92098f822a484ce132ffd3db50d82ba2
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 16:19:06 2007 +0000

    wocky-xmpp-stanza.c: fix an argument error in wocky_xmpp_stanza_build documentation
    
    20070613161906-7fe3f-3c14588a9ea94511993588092993b6629aaf7e8a.gz

 wocky/wocky-xmpp-stanza.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit cdaecd0c999362ca02137967d6977064bb06f6b5
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Fri Jun 15 11:40:07 2007 +0000

    remove some trailing spaces
    
    20070615114007-93b9a-2338f688e7b0ce01c5070bac8708adb0aaff78d5.gz

 wocky/wocky-xmpp-node.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit 6f6380896a97a822e02fab3b8aa5e74282859b41
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Fri Jun 15 11:39:49 2007 +0000

    Use g_return_val_if_fail in wocky_xmpp_node_get_language when a NULL node is passed
    
    20070615113949-93b9a-775a9a54736ba1c8f382daf936a060760e78b9df.gz

 wocky/wocky-xmpp-node.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

commit 4918b36bcf360b27a8e50fa921f48821ca8ccdb4
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Sat Jun 9 09:19:16 2007 +0000

    Tested wocky_xmpp_node_set_language_n() and fixed wocky_xmpp_node_set_language() with a NULL lang
    
    20070609091916-f974e-25d6e0593963b0bd7c33fce670639d08b476bf55.gz

 wocky/wocky-xmpp-node.c |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

commit 15e31a547272ad0f1f5093b4cd94f763b45df2f5
Author: Emanuele Aina <em@nerd.ocracy.org>
Date:   Sat Jun 9 08:52:06 2007 +0000

    Test and fix wocky_xmpp_node_get_language() with a NULL node
    
    20070609085206-f974e-1b61af2304ed7605d44148e95e77f6ebad7707aa.gz

 wocky/wocky-xmpp-node.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit b360f8d3554c2ae6d65c5045a9068e8a3b13d06a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 09:17:55 2007 +0000

    don't create the stanza if there is an error during build argument parsing
    
    20070613091755-7fe3f-802a0d76f1fb50a69a28468b181192d7841358ad.gz

 wocky/wocky-xmpp-stanza.c |   26 +++++++++++++++++---------
 1 files changed, 17 insertions(+), 9 deletions(-)

commit 72b18fc647a588cf1f3ac7159ae5602283863ffc
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 08:50:15 2007 +0000

    wocky-xmpp-stanza.c: use wocky_goto_if_reached and wocky_goto_if_fail during stanza build parsing to fix a leak
    
    20070613085015-7fe3f-6959e93f20bab7ce55761ba4a19d5cba606925ad.gz

 wocky/wocky-xmpp-stanza.c |   14 ++++++++------
 1 files changed, 8 insertions(+), 6 deletions(-)

commit da9aa5559cd85df763e99c67290793739c1473d9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 08:49:50 2007 +0000

    wocky-debug: add wocky_goto_if_reached and wocky_goto_if_fail macros
    
    20070613084950-7fe3f-279be93f5843f3e83cf19c8ea065266813e27e44.gz

 wocky/wocky-debug.h |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

commit 8508e9c7dc3520fb7c58a9d83770af0d3a69f76c
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 08:21:06 2007 +0000

    wocky-xmpp-stanza.c: use g_return_if_reached instead of g_assert_not_reached during stanza_build args parsing
    
    20070613082106-7fe3f-fea96904e7c8341ec782ef7adb4010051b54c1fd.gz

 wocky/wocky-xmpp-stanza.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 3e06b80331181dbd51db8b558c05413055c273eb
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Wed Jun 13 08:18:50 2007 +0000

    wocky-xmpp-stanza: typedef WockyBuildTag
    
    20070613081850-7fe3f-de42e6fe3365b02f563fea147bcf931159d0b0fc.gz

 wocky/wocky-xmpp-stanza.c |    9 +++++----
 wocky/wocky-xmpp-stanza.h |    4 ++--
 2 files changed, 7 insertions(+), 6 deletions(-)

commit 17057f079cb009d328a6d15ff055d60dc6123365
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 16:37:54 2007 +0000

    wocky-xmpp-stanza.c: use type_names array to find the optionnal NS associated with a type
    
    20070612163754-7fe3f-a3af4d83860cdfabecfcad53976adf601434aa4b.gz

 wocky/wocky-xmpp-stanza.c |   42 +++++++++++++++++++++++++-----------------
 1 files changed, 25 insertions(+), 17 deletions(-)

commit b6d570618ea9607824a4b791e7016be9fee826a9
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 16:26:37 2007 +0000

    wocky-xmpp-stanza.c: use the sub_type_names array instead of a switch to check if sub types belong to the right type
    
    20070612162637-7fe3f-955ab74a038aad6251a18cdcaff5de5851137ef9.gz

 wocky/wocky-xmpp-stanza.c |  122 ++++++++++++++++++++-------------------------
 1 files changed, 54 insertions(+), 68 deletions(-)

commit f8a66555b6d9653604179cc64c09357bcdad7940
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 13:23:50 2007 +0000

    wocky-xmpp-stanza.c: properly handle STREAM types
    
    20070612132350-7fe3f-7d209e6f707c34287d5bf777d569184ae06e8204.gz

 wocky/wocky-xmpp-stanza.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

commit ca2e030db5c297c8add2e35b0be9c5c149fae7a3
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 13:03:45 2007 +0000

    ibber-xmpp-stanza.c: use static array instead of big switch to find subtype's name
    
    20070612130345-7fe3f-876077a1161eb2518338057adbe44bc465fd5591.gz

 wocky/wocky-xmpp-stanza.c |   92 +++++++++++++++++---------------------------
 wocky/wocky-xmpp-stanza.h |    2 +-
 2 files changed, 37 insertions(+), 57 deletions(-)

commit 8f6dfc96eda50ab3c4dd38fd85e8dbae7930ca15
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 12:42:10 2007 +0000

    wocky-xmpp-stanza.c: use static array instead of big switch to find type's name
    
    20070612124210-7fe3f-09e3c49ea8a4d1d3c76d1b7474082e771cf75bab.gz

 wocky/wocky-xmpp-stanza.c |   65 ++++++++++++++++++--------------------------
 wocky/wocky-xmpp-stanza.h |    2 +-
 2 files changed, 28 insertions(+), 39 deletions(-)

commit 866769bc8214c2edc50bf3f9a0e2ab8408e5a8f5
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 11:33:57 2007 +0000

    wocky-xmpp-stanza.c: use g_slist_delete_link instead of 4 instructions doing exactly that
    
    20070612113357-7fe3f-d5ec9f715c4648b185b34189b65e2fcf5981818b.gz

 wocky/wocky-xmpp-stanza.c |    8 ++------
 1 files changed, 2 insertions(+), 6 deletions(-)

commit 4ecc416de40fd54b4cca41aef2811200117fe606
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 11:18:15 2007 +0000

    wocky-xmpp-stanza.c: remove useless case WOCKY_STANZA_END in wocky_xmpp_stanza_build parsing
    
    20070612111815-7fe3f-4cc369ea682244bda2023a2139e745de97de32dc.gz

 wocky/wocky-xmpp-stanza.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

commit 67d33ef83577620b9f2032ac277a30efa8983e7a
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 11:02:56 2007 +0000

    wocky-debug.c: fix a leak in wocky_debug_stanza
    
    20070612110256-7fe3f-877bb91429285528b2850f12fa6de368b8abc29d.gz

 wocky/wocky-debug.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

commit fadd12766cf9429859d28fb98ded3c01a8c1bef7
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Tue Jun 12 10:13:18 2007 +0000

    wocky-xmpp-stanza: implement wocky_xmpp_stanza_build
    
    20070612101318-7fe3f-b362200f7804bace88b1c37e219a7c2a6dfd6b5e.gz

 wocky/wocky-xmpp-stanza.c |  307 ++++++++++++++++++++++++++++++++++++++++++++-
 wocky/wocky-xmpp-stanza.h |   54 ++++++++-
 2 files changed, 359 insertions(+), 2 deletions(-)

commit 2cfc4be419d9c1945ffab0934f322f596bae0adb
Author: Guillaume Desmottes <guillaume.desmottes@collabora.co.uk>
Date:   Mon Jun 11 18:17:48 2007 +0000

    move DEBUG_STANZA to wocky-debug
    
    20070611181748-7fe3f-e4fe05a3b32cde8da6bbafc991d35af099fd2f4f.gz

 wocky/wocky-debug.c |   84 +++++++++++++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-debug.h |   11 +++++++
 2 files changed, 95 insertions(+), 0 deletions(-)

commit 059efc894984d1b42a42bce38dddd12ca1b699c9
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Jun 12 16:09:01 2007 +0000

    Move SalutMucConnection to wocky as WockyMucConnection
    
    20070612160901-93b9a-3c886d3735de02ed4b8193747040b2d2aff41ae0.gz

 wocky/wocky-debug.c |    1 +
 wocky/wocky-debug.h |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit bac62f2a52fc7011fd8a4735d28ac519cdead593
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Jun 11 13:01:12 2007 +0000

    Fix some silly memleaks in wocky-xmpp-node, spotted by Marco Barisione and Mikael Hallendal
    
    20070611130112-93b9a-24d1d091e1c29656fbb77310229ac46ab8a6a646.gz

 wocky/wocky-xmpp-node.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

commit cc004e9082a0b6cc0041eccd029269621d6a614d
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Sat Jun 9 12:01:06 2007 +0000

    Streaming property no long exists
    
    20070609120106-b58c9-591196b73410755f9547fcba3db24a3ee42d6236.gz

 wocky/wocky-xmpp-connection.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit bb496013e58ed3c9fdd189be4c332cbe2ebc3d23
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Fri Jun 8 20:55:58 2007 +0000

    Remove non-streaming mode
    
    20070608205558-b58c9-1f43c402d842d1568296e44f0d45dc6028af7ffc.gz

 wocky/wocky-xmpp-connection.c |   83 +++-------------------------------------
 wocky/wocky-xmpp-connection.h |    3 -
 2 files changed, 7 insertions(+), 79 deletions(-)

commit 88842e2845cbfd917540158bb9a7d1f7ec42a430
Author: Sjoerd Simons <sjoerd.simons@collabora.co.uk>
Date:   Mon Jun 4 06:53:29 2007 +0000

    wocky-debug: Add a specific rmulticast debugging category
    
    20070604065329-b58c9-068df8879b1a105a2989f236df4bb093276a8e9e.gz

 wocky/wocky-debug.c |    1 +
 wocky/wocky-debug.h |    3 ++-
 2 files changed, 3 insertions(+), 1 deletions(-)

commit 0add488b22c20aa4ab5a8cc818b378cf1d77fa80
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon May 21 11:51:57 2007 +0000

    Add debug category for the multicast sender
    
    20070521115157-93b9a-2300e537dcec6524cef474128ad490b38999bea5.gz

 wocky/wocky-debug.c |   17 +++++++++--------
 wocky/wocky-debug.h |   13 +++++++------
 2 files changed, 16 insertions(+), 14 deletions(-)

commit 10968df7be60c30b6f4f4690a71992380fdfbf31
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Mar 13 18:43:38 2007 +0000

    WockyXmppConnection: Compile fixes
    
    20070313184338-93b9a-5922970bfa5ca6805d2a89777d47dd5d02dba8e5.gz

 wocky/wocky-xmpp-connection.c |   13 ++++++++-----
 1 files changed, 8 insertions(+), 5 deletions(-)

commit 808e37792b31f6491d5536aaff325a665d709b8f
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Mar 13 12:59:15 2007 +0000

    WockyXmppConnection: Add a non-streaming mode
    
    20070313125915-93b9a-da87a011ed0cb9e681d3912fb1a7620ab3850548.gz

 wocky/wocky-xmpp-connection.c |  123 ++++++++++++++++++++++++++++++++++++-----
 wocky/wocky-xmpp-connection.h |    4 +
 2 files changed, 113 insertions(+), 14 deletions(-)

commit 790bba519b03494265255886c8c1b9b4695f3467
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Mar 13 11:58:10 2007 +0000

    WockyXmppConnection: Allow the connection to be created without an underlying transport
    
    20070313115810-93b9a-3e0ad2e51ba1732a87de2d306e29d803871c35d4.gz

 wocky/wocky-xmpp-connection.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

commit 4d27720ab917b387ae8fa39da9c43874eeec11a6
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Mar 1 14:49:17 2007 +0000

    wocky-debug.h: Fix typo in __DEBUG_H__ define
    
    20070301144917-93b9a-28b4ed528b50e24b899889e30576e620069476aa.gz

 wocky/wocky-debug.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit a0c600b9c07cb0681ca1bb2333e1065bfe3dd11f
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Mon Feb 19 22:53:07 2007 +0000

    WockyXmppConnection: Add functions to disengage the connection from the transport and re-engage it on top of a new transport
    
    20070219225307-93b9a-dad771f4cc6e83f618d5e41d3ef3171df3148d71.gz

 wocky/wocky-xmpp-connection.c |   27 ++++++++++++++++++++++-----
 wocky/wocky-xmpp-connection.h |    5 +++++
 2 files changed, 27 insertions(+), 5 deletions(-)

commit 7b44ac78160a88adf50edee43259669ce24474d8
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 22:07:03 2007 +0000

    WockyXmppConnection: Mark stream as closed after calling connection_restart
    
    20070217220703-93b9a-e72fce05b9ca351dc6500cb684edd735e26ad680.gz

 wocky/wocky-xmpp-connection.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 660cfd64118d30b5b7c846db3a2cde8e610e1b49
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 17:05:05 2007 +0000

    WockyXmppConnection: Add function to restart the stream, which allows the other side to reopen the connection (After say a sasl authentication)
    
    20070217170505-93b9a-15e939bb4095cee5e33b12455685e8349929a3c6.gz

 wocky/wocky-xmpp-connection.c |    9 +++++++++
 wocky/wocky-xmpp-connection.h |    6 ++++++
 2 files changed, 15 insertions(+), 0 deletions(-)

commit 5f6902411d555f942f906a6adc9948c64834860a
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Sat Feb 17 12:34:45 2007 +0000

    WockyXmppReader: Make wocky_xmpp_reader_push reentrant
    
    20070217123445-93b9a-e4981edf60f86e15232a86156acb3ff36d8843b6.gz

 wocky/wocky-xmpp-reader.c |   74 +++++++++++++++++++++++++++++++--------------
 1 files changed, 51 insertions(+), 23 deletions(-)

commit f7a9270d556a5e7da4219574d3cfd1ed4a20b813
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Fri Feb 16 10:35:42 2007 +0000

    WockyXmppConnection: Only reset after we reopen our own stream, not after the other side has opened their stream
    
    20070216103542-93b9a-7b716672297079528284236d21f1d4549b4263b4.gz

 wocky/wocky-xmpp-connection.c |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

commit 474568cb7bd70ae27943eca403780f16ab8fa3e6
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 19:54:17 2007 +0000

    WockyXmppConnection: If the stream is re-opened reset the xml reader
    
    20070215195417-93b9a-36e408dd62df217b236f334913da992957612110.gz

 wocky/wocky-xmpp-connection.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

commit 28098b62916ff654251334f9200b738ffbeea57d
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 19:53:41 2007 +0000

    WockyXmppWriter: Turn of indenting of the output stream for now
    
    20070215195341-93b9a-06a6024612b2c75cf254a05be028c776e605a2f9.gz

 wocky/wocky-xmpp-writer.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

commit e4328fefd92299a312323722b173a0e44189ae1b
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 19:50:36 2007 +0000

    WockyXmppReader: Add ability to reset the reader when needed
    
    20070215195036-93b9a-101186da1a23a1456991feb9e5e9ac6312856eac.gz

 wocky/wocky-xmpp-reader.c |   26 +++++++++++++++++++++++---
 wocky/wocky-xmpp-reader.h |    1 +
 2 files changed, 24 insertions(+), 3 deletions(-)

commit b8565f2e2f4dc54cf7edd79eacafb243a9dab3bc
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 16:06:33 2007 +0000

    Implement an SSL transport for wocky
    
    20070215160633-93b9a-bbb1468c182c157f593dcf07ef21d5bed09e8f7f.gz

 wocky/wocky-debug.c |    1 +
 wocky/wocky-debug.h |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit 825318c597fe94d083534de7c34b9b42eb6d1f50
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 15 10:55:01 2007 +0000

    Added SASL authentication helper for wocky (just digest-md5 for now)
    
    20070215105501-93b9a-f19f851129b23241b015579541e73f827e5ff373.gz

 wocky/wocky-debug.c |    1 +
 wocky/wocky-debug.h |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

commit 9c1ca9bc99f8339ac39ec2f640660ac85f62658e
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Feb 13 15:51:44 2007 +0000

    SalutXmppWriter: Add debugging to stream open and close
    
    20070213155144-93b9a-8fa834e31dda7628e45ca7cfcce8dcf34fccbca3.gz

 wocky/wocky-xmpp-writer.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit de5327a61f7ffbd4b8bf0bd3800ca11851d30408
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Feb 13 13:26:33 2007 +0000

    Push received transport data through handler functions instead of signals
    
    20070213132633-93b9a-25678d8680408e6e7ecb88289afd577cb1163734.gz

 wocky/wocky-debug.c           |    1 +
 wocky/wocky-debug.h           |    7 ++++---
 wocky/wocky-xmpp-connection.c |   21 +++++++++++----------
 3 files changed, 16 insertions(+), 13 deletions(-)

commit eaa86572f2ee3c1f283577e4747749bef79265ac
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Feb 13 10:05:59 2007 +0000

    WockyXmppNode: Assert that attribute values are !NULL
    
    20070213100559-93b9a-407f99a9c26a5769c78345098b0bc53a6a44eb19.gz

 wocky/wocky-xmpp-node.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

commit 9c139ce0b8eadf1b44ed5790cb0ebc1da409aaf9
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Feb 13 10:05:08 2007 +0000

    WockyXmppWriter: Add debugging
    
    20070213100508-93b9a-82ec00ac21ed4b0b4094ab1b5dfbcc35784c8c67.gz

 wocky/wocky-xmpp-writer.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

commit ec14381d7e181456e515fef019d77b118a65ccb5
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 8 15:47:08 2007 +0000

    Reinitialize the parser after each chunk when not in stream mode
    
    20070208154708-93b9a-7f92d7d174ea5da1ba624838e3a94e6b54306391.gz

 wocky/wocky-xmpp-reader.c |   21 ++++++++++++++++-----
 1 files changed, 16 insertions(+), 5 deletions(-)

commit c6f178501aaadebdd1ab6dcdd21725c739853239
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 8 15:46:31 2007 +0000

    Add debugging
    
    20070208154631-93b9a-fb77ac76d5b324196b2b84a8f57077cadc6ec14e.gz

 wocky/wocky-xmpp-reader.c |   17 +++++++++++++++++
 1 files changed, 17 insertions(+), 0 deletions(-)

commit af18cf0a81cd75e41ef0cc311d0e195d5991d465
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Thu Feb 8 15:45:34 2007 +0000

    Add xmpp debugging categories
    
    20070208154534-93b9a-be8e1257a1ccf376fd7134229d62d5187219f7cb.gz

 wocky/wocky-debug.c |    6 +++++-
 wocky/wocky-debug.h |    4 ++++
 2 files changed, 9 insertions(+), 1 deletions(-)

commit 456ea6b3c19601fdbacf438596aca68c46000adb
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Fri Feb 2 13:48:00 2007 +0000

    Fix conflicts in libwocky
    
    20070202134800-93b9a-accfe9e4ec5f2ac7d7d4360889743b8e09d9ca4b.gz

 wocky/wocky-xmpp-reader.c |    8 ++++----
 wocky/wocky-xmpp-reader.h |    6 ++++--
 wocky/wocky-xmpp-writer.c |    8 ++++----
 wocky/wocky-xmpp-writer.h |    3 ++-
 4 files changed, 14 insertions(+), 11 deletions(-)

commit 11e8272e8ad14c1eeac8ba162227c3626fedf11f
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jan 24 23:10:56 2007 +0000

    If not in stream mode, clear the parser for every new buffer
    
    20070124231056-93b9a-a17e06fc79026e8dca6cf50db26c9f18eb112397.gz

 wocky/wocky-xmpp-reader.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

commit 4cc6811422ef30741f9c61bf51fa335d93a515be
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jan 24 22:54:24 2007 +0000

    Xmpp stanza end on depth 1 in stream mode and depth 0 in non-streaming mode
    
    20070124225424-93b9a-0169f09b6155c007c04c7dc66d453bd600291ee8.gz

 wocky/wocky-xmpp-reader.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

commit 48a09308f5782730a8b77fef7f8f45fdc5da2336
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jan 24 22:09:34 2007 +0000

    Let the xmpp reader provide a non-stream mode
    
    20070124220934-93b9a-b436df2985b6622eb18b66a2116af4ed6375c65f.gz

 wocky/wocky-xmpp-reader.c |   18 +++++++++++++++---
 wocky/wocky-xmpp-reader.h |    4 ++--
 2 files changed, 17 insertions(+), 5 deletions(-)

commit 238939565225f060e327b4fcd100eccd85575806
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Wed Jan 24 22:09:05 2007 +0000

    Provide a non-stream mode
    
    20070124220905-93b9a-4d27e82d447907538d5b5e9215583bc4fb6fa0f9.gz

 wocky/wocky-xmpp-writer.c |   15 +++++++++++++++
 wocky/wocky-xmpp-writer.h |    2 +-
 2 files changed, 16 insertions(+), 1 deletions(-)

commit 37f2ef26d25198ac6f39d5122d91f2da66995413
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Jan 23 12:02:45 2007 +0000

    Only recognize the standard stream namespaces after a stream open
    
    20070123120245-93b9a-78aa5121c17e4668e8fdf11b6a0a66d5848751ce.gz

 wocky/wocky-xmpp-writer.c |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

commit ef14dec7c25700a1ada1436a41610154a6e2dc10
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Fri Feb 2 13:37:11 2007 +0000

    Refactor xmpp magic into it's own seperate library
    
    20070202133711-93b9a-4dec550fce51511f5f452fa5e1c2158049fdc2f6.gz

 wocky/wocky-debug.c           |   55 +++++++
 wocky/wocky-debug.h           |   49 +++++++
 wocky/wocky-xmpp-connection.c |  275 ++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-connection.h |   73 ++++++++++
 wocky/wocky-xmpp-node.c       |  281 +++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-node.h       |  131 +++++++++++++++++
 wocky/wocky-xmpp-reader.c     |  310 +++++++++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-reader.h     |   63 +++++++++
 wocky/wocky-xmpp-stanza.c     |   99 +++++++++++++
 wocky/wocky-xmpp-stanza.h     |   62 ++++++++
 wocky/wocky-xmpp-writer.c     |  271 +++++++++++++++++++++++++++++++++++
 wocky/wocky-xmpp-writer.h     |   76 ++++++++++
 12 files changed, 1745 insertions(+), 0 deletions(-)

commit d3816f063f3902037b69763d91e57738d7e781e5
Author: Sjoerd Simons <sjoerd@luon.net>
Date:   Tue Mar 17 18:52:43 2009 +0000

    Initial commit

 README |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
